import{_ as a,c as l,a as n,g as i,h as e,d as s,f as t,F as o,e as c,i as d,t as p,j as r,k as u,o as m}from"./index-DIFAsZJV.js";const v={class:"app-container"},f={class:"main-content"},g={class:"attendance-card"},h={class:"form-group"},b=["value"],k={class:"action-group"},y=["disabled"],L={key:0,class:"confirmation-message"},M={class:"info-section"},w={class:"info-card"},U={class:"info-content"},x={class:"info-row"},I={class:"info-value"},P={class:"info-row"},j={class:"info-value"},S=["src"],$={class:"info-card"},A={class:"info-content"},B={class:"info-row"},C={class:"info-value"},G={class:"info-row"},H={class:"info-value"},z={class:"info-row"},F={class:"info-value"},R={class:"info-row"},T={class:"info-value"},D=["src"];const E=a({setup(){const a=r({ipv4:"Mengambil data...",ipv6:"Mengambil data..."}),l=r({lat:"Mengambil data...",lon:"Mengambil data..."}),n=r({city:"Mengambil data...",country:"Mengambil data...",lat:"",lon:""}),i=r(""),e=r(""),s=r(!1),t=r(""),o=r(["HO Balikpapan","HUB Sanga-sanga","HUB Melak","HUB Sangata","HUB Berau"]);return u((()=>{(async()=>{try{const l=await fetch("https://api.ipify.org?format=json"),n=await l.json();a.value.ipv4=n.ip;const i=await fetch("https://api64.ipify.org?format=json"),e=await i.json();a.value.ipv6=e.ip}catch(l){a.value.ipv4="Gagal memuat",a.value.ipv6="Gagal memuat"}})(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((a=>{l.value.lat=a.coords.latitude.toFixed(6),l.value.lon=a.coords.longitude.toFixed(6),i.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${l.value.lon},${l.value.lat}&size=450,300&z=12&l=map&pt=${l.value.lon},${l.value.lat},pm2rdm`}),(a=>{l.value.lat="Izin ditolak",l.value.lon="Izin ditolak"})):(l.value.lat="Tidak didukung",l.value.lon="Tidak didukung"),(async()=>{try{const a=await fetch("http://ip-api.com/json/"),l=await a.json();n.value={city:l.city||"Tidak diketahui",country:l.country||"Tidak diketahui",lat:l.lat?l.lat.toFixed(6):"",lon:l.lon?l.lon.toFixed(6):""},l.lon&&l.lat&&(e.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${l.lon},${l.lat}&size=450,300&z=12&l=map&pt=${l.lon},${l.lat},pm2rdm`)}catch(a){n.value.city="Gagal memuat",n.value.country="Gagal memuat"}})()})),{ipData:a,gpsLocation:l,ipLocation:n,gpsMapUrl:i,ipMapUrl:e,attendanceRecorded:s,selectedLocation:t,locations:o}},methods:{openCamera(){this.selectedLocation?document.getElementById("cameraInput").click():alert("Silakan pilih lokasi absen terlebih dahulu!")},handlePhoto(a){a.target.files[0]&&(this.attendanceRecorded=!0,setTimeout((()=>{this.attendanceRecorded=!1}),5e3))}}},[["render",function(a,r,u,E,J,K){return m(),l("div",v,[n("main",f,[r[15]||(r[15]=n("h1",{class:"app-title"},"Absensi Karyawan",-1)),r[16]||(r[16]=n("p",{class:"app-subtitle"},null,-1)),n("div",g,[n("div",h,[r[4]||(r[4]=n("label",{for:"location",class:"form-label"},"Lokasi Absensi",-1)),s(n("select",{"onUpdate:modelValue":r[0]||(r[0]=a=>E.selectedLocation=a),id:"location",class:"form-select"},[r[3]||(r[3]=n("option",{value:"",disabled:"",selected:""},"Pilih lokasi Anda",-1)),(m(!0),l(o,null,c(E.locations,((a,n)=>(m(),l("option",{key:n,value:a},p(a),9,b)))),128))],512),[[t,E.selectedLocation]])]),n("div",k,[n("input",{type:"file",accept:"image/*",capture:"environment",onChange:r[1]||(r[1]=(...a)=>K.handlePhoto&&K.handlePhoto(...a)),id:"cameraInput",class:"hidden-input"},null,32),n("button",{onClick:r[2]||(r[2]=(...a)=>K.openCamera&&K.openCamera(...a)),class:"primary-btn",disabled:!E.selectedLocation},r[5]||(r[5]=[n("i",{class:"fa-solid fa-camera"},null,-1),d(" Absen Sekarang ")]),8,y)]),E.attendanceRecorded?(m(),l("div",L,r[6]||(r[6]=[n("i",{class:"fa-solid fa-check-circle success-icon"},null,-1),n("span",null,"Absensi berhasil direkam!",-1)]))):e("",!0)]),r[17]||(r[17]=i('<div class="announcement-card"><div class="announcement-header"><i class="fa-solid fa-bullhorn announcement-icon"></i><h3>TRJA Memo</h3></div><div class="announcement-content"><img src="/office/assets/eid-CZptpngE.jpg" alt="Gambar Lebaran" class="announcement-image"><p class="announcement-text">Selamat Hari Raya Idul Fitri 1445 H</p></div></div>',1)),n("div",M,[n("div",w,[r[9]||(r[9]=n("div",{class:"info-header"},[n("i",{class:"fa-solid fa-map-marker-alt"}),n("h4",null,"Lokasi GPS Anda")],-1)),n("div",U,[n("div",x,[r[7]||(r[7]=n("span",{class:"info-label"},"Latitude:",-1)),n("span",I,p(E.gpsLocation.lat),1)]),n("div",P,[r[8]||(r[8]=n("span",{class:"info-label"},"Longitude:",-1)),n("span",j,p(E.gpsLocation.lon),1)]),E.gpsMapUrl?(m(),l("img",{key:0,src:E.gpsMapUrl,alt:"GPS Map",class:"map-image"},null,8,S)):e("",!0)])]),n("div",$,[r[14]||(r[14]=n("div",{class:"info-header"},[n("i",{class:"fa-solid fa-network-wired"}),n("h4",null,"Informasi Jaringan")],-1)),n("div",A,[n("div",B,[r[10]||(r[10]=n("span",{class:"info-label"},"IPv4:",-1)),n("span",C,p(E.ipData.ipv4),1)]),n("div",G,[r[11]||(r[11]=n("span",{class:"info-label"},"IPv6:",-1)),n("span",H,p(E.ipData.ipv6),1)]),n("div",z,[r[12]||(r[12]=n("span",{class:"info-label"},"Kota:",-1)),n("span",F,p(E.ipLocation.city),1)]),n("div",R,[r[13]||(r[13]=n("span",{class:"info-label"},"Negara:",-1)),n("span",T,p(E.ipLocation.country),1)]),E.ipMapUrl?(m(),l("img",{key:0,src:E.ipMapUrl,alt:"IP Map",class:"map-image"},null,8,D)):e("",!0)])])])])])}]]);export{E as default};
