import{u as A,r,p as $,o as B,c as n,a as e,m as f,n as V,b as g,v as _,h as k,t as l,F as j,j as E,s as y,A as w,aa as x,g as i}from"./index-D-BFvQlv.js";const H={class:"container py-5"},R={class:"row justify-content-center"},T={class:"col-md-6"},q={class:"card shadow-sm mb-4"},D={class:"card-body p-4"},F={class:"mb-3"},z={class:"mb-3"},M=["disabled"],N={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Y={key:0,class:"alert alert-success mt-4 mb-0",role:"alert"},O=["href"],I={key:1,class:"alert alert-danger mt-4 mb-0",role:"alert"},J={key:0,class:"card shadow-sm"},P={class:"card-header bg-light fw-semibold d-flex justify-content-between align-items-center"},Q={class:"list-group list-group-flush"},W={class:"flex-grow-1 text-break"},X={class:"fw-medium mb-1"},G=["href"],K={class:"fw-medium mb-1"},Z={class:"fw-medium mb-1"},ee=["onClick"],le={__name:"ShortenerCreate",setup(te){const b=A(),a=r(""),c=r(""),d=r(""),p=r(""),u=r(!1),v=r(""),m=r([{original_link:"https://example.com/long-url-about-product",link:"https://yourdomain.com/s/prod123"},{original_link:"https://another-site.com/blog/how-to-code",link:"https://yourdomain.com/s/codeTips"},{original_link:"https://docs.google.com/spreadsheets/d/1ualp1qErnEOoYcXwF3UVWbcRc1DYiqzrJxjTmwrq5Q4/edit?gid=1894959304#gid=1894959304",link:"https://yourdomain.com/s/contact"}]),C=async()=>{try{const o=await y.get(`${w}/shortener?username=${b.username}`,{headers:{Authorization:`Bearer ${b.token}`}});console.log("History:",o.data),m.value=o.data.map(t=>({...t,link:`${x}/office/s/${t.link}`}))}catch(o){console.error("Failed to fetch history:",o)}},L=$(()=>m.value.filter(o=>o.original_link.toLowerCase().includes(v.value.toLowerCase())||o.link.toLowerCase().includes(v.value.toLowerCase()))),U=async()=>{var o,t;console.log(a.value),console.log(c.value),p.value="",d.value="",u.value=!0;try{const s=await y.post(`${w}/shortener`,{code:c.value,original_link:a.value},{headers:{Authorization:`Bearer ${b.token}`,"Content-Type":"application/json"}}),h=`${x}/office/s/${s.data.data.code}`;d.value=h,m.value.unshift({original_link:a.value,link:d.value}),a.value="",c.value=""}catch(s){console.error(s),p.value=((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.error)||"Something went wrong."}finally{u.value=!1}},S=o=>{m.value.splice(o,1)};return B(async()=>{await C()}),(o,t)=>(i(),n("div",H,[e("div",R,[e("div",T,[e("div",q,[e("div",D,[t[6]||(t[6]=e("h5",{class:"card-title text-center mb-3"},"ðŸ”— Create Shortened Link",-1)),t[7]||(t[7]=e("p",{class:"text-muted text-center mb-4"},"Easily shorten a long URL with optional custom code",-1)),e("form",{onSubmit:V(U,["prevent"])},[e("div",F,[t[3]||(t[3]=e("label",{class:"form-label"},"Original URL",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),type:"url",class:"form-control",required:"",placeholder:"https://www.transkon-rent.com"},null,512),[[_,a.value]])]),e("div",z,[t[4]||(t[4]=e("label",{class:"form-label"},[k("Custom Code "),e("small",{class:"text-muted"})],-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),type:"text",class:"form-control",placeholder:"my-short-link"},null,512),[[_,c.value]])]),e("button",{type:"submit",class:"btn btn-primary w-100",disabled:u.value||!a.value},[u.value?(i(),n("span",N)):f("",!0),k(" "+l(u.value?"Creating...":"Create Link"),1)],8,M)],32),d.value?(i(),n("div",Y,[t[5]||(t[5]=k(" âœ… Short link created: ")),e("a",{href:d.value,target:"_blank",class:"alert-link"},l(d.value),9,O)])):f("",!0),p.value?(i(),n("div",I," âŒ "+l(p.value),1)):f("",!0)])]),m.value.length?(i(),n("div",J,[e("div",P,[t[8]||(t[8]=e("span",null,"Your Short Link History",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),type:"text",class:"form-control form-control-sm w-auto",placeholder:"Search link..."},null,512),[[_,v.value]])]),e("ul",Q,[(i(!0),n(j,null,E(L.value,(s,h)=>(i(),n("li",{key:h,class:"list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row gap-2"},[e("div",W,[e("div",X,l(s.original_link),1),e("a",{href:s.link,target:"_blank",class:"text-primary small text-break"},l(s.link),9,G),t[9]||(t[9]=e("br",null,null,-1)),e("div",K,"Created at: "+l(s.createdAt)+" || Last Access: "+l(s.lastUpdated),1),e("div",Z,"Access count: "+l(s.access_count)+" || Last accessed: "+l(s.lastAccessed),1)]),e("div",null,[e("button",{class:"btn btn-sm btn-outline-danger",onClick:se=>S(h)},t[10]||(t[10]=[e("i",{class:"fa-solid fa-eraser"},null,-1)]),8,ee)])]))),128))])])):f("",!0)])])]))}};export{le as default};
