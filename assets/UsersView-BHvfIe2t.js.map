{"version":3,"file":"UsersView-BHvfIe2t.js","sources":["../../src/views/admin/UsersView.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-users\">\r\n    <h2>User Management</h2>\r\n    <button @click=\"openCreateUserModal\">Create New User</button>\r\n\r\n    <vue-good-table\r\n      :columns=\"columns\"\r\n      :rows=\"users\"\r\n      :pagination-options=\"{ enabled: true, mode: 'pages', perPage: 10 }\"\r\n      :search-options=\"{ enabled: true }\"\r\n      :sort-options=\"{ enabled: true }\"\r\n    >\r\n      <template v-slot:table-row=\"props\">\r\n        <!-- Editable Name -->\r\n        <template v-if=\"props.column.field === 'name'\">\r\n          <input v-model=\"props.row.name\" />\r\n        </template>\r\n        <!-- Editable Username -->\r\n        <template v-else-if=\"props.column.field === 'username'\">\r\n          <input v-model=\"props.row.username\" />\r\n        </template>\r\n        <!-- Level Dropdown -->\r\n        <template v-else-if=\"props.column.field === 'level'\">\r\n          <select v-model=\"props.row.level\">\r\n            <option v-for=\"lvl in levels\" :key=\"lvl\" :value=\"lvl\">\r\n              {{ lvl }}\r\n            </option>\r\n          </select>\r\n        </template>\r\n        <!-- Actions -->\r\n        <template v-else-if=\"props.column.field === 'actions'\">\r\n          <button @click=\"updateUser(props.row)\">Save</button>\r\n          <button @click=\"deleteUser(props.row)\">Delete</button>\r\n        </template>\r\n        <!-- Default Display -->\r\n        <template v-else>\r\n          <span>{{ props.row[props.column.field] }}</span>\r\n        </template>\r\n      </template>\r\n    </vue-good-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      users: [],\r\n      levels: Array.from({ length: 11 }, (_, i) => i), // Levels 0 to 10\r\n      columns: [\r\n        { label: \"Name\", field: \"name\", editable: true },\r\n        { label: \"Username\", field: \"username\", editable: true },\r\n        { label: \"Level\", field: \"level\", editable: true },\r\n        { label: \"Actions\", field: \"actions\" },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const response = await fetch(\r\n          \"https://www.transkon-rent.com/api/users\",\r\n          {\r\n            method: \"GET\", // or 'POST', 'PUT', etc.\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: `Bearer ${localStorage.getItem(\"jwt-token\")}`, // Replace yourToken with your actual token\r\n            },\r\n            body: JSON.stringify({ level: localStorage.getItem(\"user_level\") }),\r\n          }\r\n        );\r\n        this.users = await response.json();\r\n      } catch (error) {\r\n        console.error(\"Error fetching users:\", error);\r\n      }\r\n    },\r\n    async updateUser(user) {\r\n      try {\r\n        await fetch(`/api/users/${user.id}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(user),\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error updating user:\", error);\r\n      }\r\n    },\r\n    async deleteUser(user) {\r\n      if (confirm(`Are you sure you want to delete ${user.username}?`)) {\r\n        try {\r\n          await fetch(`/api/users/${user.id}`, { method: \"DELETE\" });\r\n          this.fetchUsers();\r\n        } catch (error) {\r\n          console.error(\"Error deleting user:\", error);\r\n        }\r\n      }\r\n    },\r\n    openCreateUserModal() {\r\n      // Placeholder for modal logic\r\n      alert(\"Open user creation modal\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUsers();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-users {\r\n  max-width: 80%;\r\n  margin: auto;\r\n  padding: 20px;\r\n}\r\n\r\nbutton {\r\n  margin: 5px;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  cursor: pointer;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border-radius: 5px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\ninput,\r\nselect {\r\n  padding: 5px;\r\n  margin: 2px;\r\n}\r\n</style>\r\n"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","key","data","users","levels","Array","from","length","_","i","columns","label","field","editable","methods","fetchUsers","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","level","this","json","error","updateUser","user","id","deleteUser","confirm","username","openCreateUserModal","alert","mounted","_openBlock","_createElementBlock","_cache","_createElementVNode","onClick","$options","args","_createVNode","_component_vue_good_table","$data","rows","enabled","mode","perPage","_withCtx","props","column","$event","row","name","_Fragment","_renderList","lvl","value","_toDisplayString","_hoisted_8"],"mappings":"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"}