import{s as G}from"./vue-multiselect-BJJtxQkm.js";import{_ as L,l as K,m as J,g as n,f as $,I as Q,H as z,y as V,i as W,r as s,u as X,A as v,w as Y,o as Z,G as ee,c as i,n as u,a as e,d as _,C as te,t as m,h as S,F as ae,j as se,s as F,x as le}from"./index-D-LeOEd-.js";import{C as w}from"./Charts-CwYxUkQ6.js";/* empty css                                                                   */import{_ as oe}from"./BigTable-DKlsfmR9.js";import"./xlsx-Bfj2mpcQ.js";/* empty css                            *//* empty css                                                 */const ne={__name:"RouterLink",props:{type:{type:String,default:"button"},color:{type:String,default:"primary"},size:{type:String,default:"md",validator:d=>["sm","md","lg"].includes(d)},block:{type:Boolean,default:!1},customStyle:{type:Object,default:()=>({})},padding:{type:String,default:""}},setup(d){const f=d,p=K(()=>f.size==="sm"?"btn-sm":f.size==="lg"?"btn-lg":"");return(c,o)=>{const b=W("RouterLink",!0);return n(),J(b,{to:c.to,type:d.type,class:V(["btn",[`btn-${d.color}`,p.value,{"d-block w-100":d.block}]]),style:z(d.customStyle)},{default:$(()=>[Q(c.$slots,"default",{},void 0,!0)]),_:3},8,["to","type","class","style"])}}},re=L(ne,[["__scopeId","data-v-16113fd6"]]),ie={key:0},de={class:"mb-2"},ue={class:"text-end"},ce={class:"row text-center mb-4"},ve={class:"col"},_e={class:"card border-success"},me={class:"card-body"},pe={class:"text-success"},ye={class:"col"},ge={class:"card border-danger"},be={class:"card-body"},he={class:"text-danger",style:{"text-align":"center"}},fe={style:{"margin-right":"10px"}},we={style:{"margin-left":"10px"}},ke={class:"col"},xe={class:"card border-warning"},Se={class:"card-body"},De={class:"text-warning",style:{"text-align":"center"}},Ce={style:{"margin-right":"10px"}},Ue={style:{"margin-left":"10px"}},Te={class:"nav nav-tabs"},Be=["onClick"],Ie={key:1,class:"card mb-4"},Re={class:"card-body"},Ae={key:2,class:"row g-4 mb-4"},Fe={key:0,class:"col-md-12"},Le={key:1,class:"col-md-12"},$e={class:"card h-100"},ze={key:2,class:"col-md-12"},Ve={class:"card h-100"},je={key:3,class:"col-md-12"},Ee={class:"card h-100"},Ne={key:4,class:"col-md-12"},Pe={class:"card h-100"},He={__name:"DeDashboardCustomer",setup(d){const f=s(null),p=X(),c=s(""),o=s(""),b=s([]),D=s(!0),C=s({title:"Daily Trend",type:"bar",api:{url:v+"/chart/de_running_total",params:[14,o.value,""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),k=s({title:"Daily Trend",type:"line",api:{url:v+"/chart/de_running_total",params:[14,o.value,""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),U=s({title:"Unit Summary",type:"pie",api:{url:v+"/chart/de_total_rental",params:[o.value,""]},columns:{datas:["unit_rental","spare_exists_false","spare_exists_true"]},colors:["green","red","orange"],labels:["Unit Rental","PA Unit","PA Rental"]}),j=s({title:"Customer Summary",type:"bar",api:{url:v+"/chart/de_customer_summary"},columns:{label:["customer"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),E=s({title:"Location Summary",type:"bar",api:{url:v+"/chart/de_location_summary"},columns:{label:["alt_location"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),N=s({title:""}),P=s({firstCol:{label:"TK NO",field:"tk_no",type:"type"},merge:[{fields:["hour_in","hour_out"],to:"hour"},{fields:["jarak_in","jarak_out"],to:"jarak"}],priority:["customer","alt_location"],unpriority:["username","createdAt","lastUpdated"],hidden:["id","done"],toRemove:["vehicle_type","plate_no"],uneditable:["id","plan_hub"],checkbox:["spare_exists"],date:[],datetime:["down_since","estimated_return"]}),H=s({data:`${p.apiBaseUrl}/de_site`,dropdowns:{vehicle_type:{url:p.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:p.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:p.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),l=s(""),O=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],q=async()=>{try{const a=await F.get(v+"/dropdowns/customer");b.value=a.data.map(t=>({label:t,value:t}))}catch(a){console.error("Error fetching dropdown data:",a)}};s();const T=s(),M=async a=>{console.log(a),c.value=a,o.value=c.value.value,C.value.api.params[1]=o.value,k.value.api.params[1]=o.value,await T.value.renderChart(),await x(),await le()},h=s([0,0]),y=s([0,0]),g=s([0,0]),B=s("");function I(){const a=new Date,t=a.getHours().toString().padStart(2,"0"),r=a.getMinutes().toString().padStart(2,"0"),A=a.getSeconds().toString().padStart(2,"0");B.value=`${t}:${r}:${A}`}const x=async()=>{try{const a=await F.get(v+"/chart/de_total_rental",{params:{params:[o.value,""]}}),t=a.data[0].unit_rental+a.data[0].spare_exists_false+a.data[0].spare_exists_true;h.value[0]=a.data[0].unit_rental,y.value[0]=a.data[0].spare_exists_false+a.data[0].spare_exists_true,g.value[0]=a.data[0].spare_exists_false,t===0?(h.value[1]=0,y.value[1]=0,g.value[1]=0):(h.value[1]=(h.value[0]/t*100).toFixed(2),y.value[1]=(y.value[0]/t*100).toFixed(2),g.value[1]=(g.value[0]/t*100).toFixed(2))}catch(a){console.error("Fetch error:",a)}};Y(o.value,async()=>{console.log("selectedItems : ",o.value),C.value.api.params[1]=o.value,k.value.api.params[1]=o.value,U.value.api.params[0]=o.value,await x()});let R;return Z(async()=>{await q(),await x(),D.value=!1,console.log("dropdown : ",b.value),I(),R=setInterval(I,1e3)}),ee(()=>{clearInterval(R)}),(a,t)=>(n(),i("div",{class:"content",style:z({paddingTop:a.showHeader?"100px":"0px"})},[D.value?u("",!0):(n(),i("div",ie,[t[2]||(t[2]=e("label",{for:"dropdown",class:"form-label"},"Select Customer",-1)),_(te(G),{modelValue:c.value,"onUpdate:modelValue":[t[0]||(t[0]=r=>c.value=r),t[1]||(t[1]=r=>M(r))],options:b.value||[],placeholder:"Select Customer",label:"label","track-by":"value",class:"multiselect no-border"},null,8,["modelValue","options"])])),e("div",de,[t[9]||(t[9]=e("h1",{class:"h4 fw-bold"},"Down Equipment Dashboard",-1)),e("div",ue,[t[3]||(t[3]=e("h5",{class:"fw-bold text-primary"},null,-1)),e("div",null,m(B.value),1)]),e("div",ce,[e("div",ve,[e("div",_e,[e("div",me,[e("h3",pe,m(h.value[0]),1),t[4]||(t[4]=e("p",{class:"fw-bold mb-0"},"On Hire (UIC)",-1))])])]),e("div",ye,[e("div",ge,[e("div",be,[e("h3",he,[e("span",fe,m(y.value[1])+"%",1),t[5]||(t[5]=S(" || ")),e("span",we,m(y.value[0]),1)]),t[6]||(t[6]=e("p",{class:"fw-bold mb-0"},"PA Unit",-1))])])]),e("div",ke,[e("div",xe,[e("div",Se,[e("h3",De,[e("span",Ce,m(g.value[1])+"%",1),t[7]||(t[7]=S(" || ")),e("span",Ue,m(g.value[0]),1)]),t[8]||(t[8]=e("p",{class:"fw-bold mb-0"},"PA Rental",-1))])])])])]),e("ul",Te,[(n(),i(ae,null,se(O,r=>e("li",{class:"nav-item",key:r.value},[e("button",{class:V(["nav-link",{active:l.value===r.value}]),onClick:A=>l.value=r.value},m(r.label),11,Be)])),64))]),l.value===""||l.value==="site-summary"?(n(),i("div",Ie,[e("div",Re,[t[10]||(t[10]=e("h5",{class:"card-title text-danger"},"Site Summary",-1)),_(oe,{ref_key:"bigTableRef",ref:f,settings:N.value,urls:H.value,fields:P.value,canInsert:!1,canUpdate:!1},null,8,["settings","urls","fields"])])])):u("",!0),l.value===""||["0","1","2","3"].includes(l.value)?(n(),i("div",Ae,[l.value===""||l.value==="0"?(n(),i("div",Fe)):u("",!0),l.value===""||l.value==="0"?(n(),i("div",Le,[e("div",$e,[_(w,{ref_key:"chart11",ref:T,settings:k.value},null,8,["settings"])])])):u("",!0),l.value===""||l.value==="1"?(n(),i("div",ze,[e("div",Ve,[_(w,{settings:U.value},null,8,["settings"])])])):u("",!0),l.value===""||l.value==="2"?(n(),i("div",je,[e("div",Ee,[_(w,{settings:j.value},null,8,["settings"])])])):u("",!0),l.value===""||l.value==="3"?(n(),i("div",Ne,[e("div",Pe,[_(w,{settings:E.value},null,8,["settings"])])])):u("",!0)])):u("",!0),e("div",null,[_(re,{to:"/de/down-equipment",color:"danger",size:"md"},{default:$(()=>t[11]||(t[11]=[S("Back to Down Equipment")])),_:1})])],4))}},Xe=L(He,[["__scopeId","data-v-b4a43938"]]);export{Xe as default};
