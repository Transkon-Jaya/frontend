import{_ as I,u as D,z as T,B as V,r as u,l as E,o as L,s as b,c as l,a as e,p as M,b as U,v as N,y as f,C as k,d as p,t as h,f as m,T as A,n as w,V as _,A as K,g as i,F as O,j as R,h as y,x as J}from"./index-P8gt9Fxf.js";import{l as j,a as $}from"./logger-B1IqVKgO.js";const q={class:"row"},G={class:"col-xl-6 mx-auto"},H={class:"card"},Q={class:"card-body p-4"},W={class:"col-md-12"},X={class:"col-md-12"},Y=["onClick"],Z={class:"col-md-12"},ee={key:0,class:"mt-3"},ae=["src"],se={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},te={__name:"FormIzin",setup(oe){const d=D(),g=T(),v=K+"/perizinan",s=V({keterangan:"",izin:"",izinLabel:""}),o=new FormData,z=u(),c=u(null),x=a=>{c.value=a.target.files[0]};E(()=>s.password!==s.confirmPassword),L(async()=>{console.log("Photo : ",d.photo);try{const a=await b.get(v,{params:{username:d.username}});z.value=a.data[0]}catch(a){console.error("Fetch error:",a)}});const F=()=>{s.keterangan="",s.izin="",s.izinLabel=""},P=async()=>{try{if(s.keterangan==""){alert("Keterangan Masih Kosong");return}if(s.izin==""){alert("Pilih Jenis Perizinan");return}if(!c.value){alert("Upload Foto Bukti");return}o.append("username",d.username),o.append("picture",c.value),o.append("keterangan",s.keterangan),o.append("izin",s.izin);const a=await b.post(v,o);j("RESPONSE : ",a.data),await J(),alert("Inserted successfully!")}catch(a){$("Submit error:",a),alert("Error updating profile.")}},C=[{value:"datang",label:"Datang terlambat"},{value:"pulang",label:"Pulang cepat"},{value:"tidak-masuk",label:"Tidak masuk"}],r=u(!1);function S(){r.value=!r.value}function B(a){s.izin=a.value,s.izinLabel=a.label,r.value=!1}return(a,t)=>(i(),l("div",q,[e("div",G,[e("div",H,[t[6]||(t[6]=e("div",{class:"card-header px-4 py-3"},[e("h5",{class:"mb-0"},"Perizinan")],-1)),e("div",Q,[e("form",{onSubmit:M(P,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[e("div",W,[t[1]||(t[1]=e("label",{for:"keterangan",class:"form-label"},"Keterangan",-1)),U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.keterangan=n),type:"text",class:"form-control",id:"keterangan"},null,512),[[N,s.keterangan]])]),e("div",X,[t[2]||(t[2]=e("label",{for:"izin",class:"form-label"},"Jenis Izin",-1)),e("div",{class:f(["dropdown",k(g).darkMode?"bg-dark text-white border-secondary":"bg-white text-dark border-secondary"])},[e("div",{class:"dropdown-selected",onClick:S},h(s.izinLabel||"Pilih salah satu"),1),p(A,{name:"slide-fade"},{default:m(()=>[r.value?(i(),l("div",{key:0,class:f(["dropdown-options border",k(g).darkMode?"bg-dark text-white border-secondary":"bg-white text-dark border-secondary"])},[(i(),l(O,null,R(C,n=>e("div",{key:n.value,class:"dropdown-option",onClick:ne=>B(n)},h(n.label),9,Y)),64))],2)):w("",!0)]),_:1})],2)]),e("div",Z,[t[3]||(t[3]=e("label",{for:"photo",class:"form-label"},"Upload Foto Bukti",-1)),e("input",{type:"file",class:"form-control",id:"photo",onChange:x,accept:"image/*"},null,32),a.previewImage?(i(),l("div",ee,[e("img",{src:a.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,ae)])):w("",!0)]),e("div",se,[p(_,{type:"submit",color:"danger",size:"md",block:!1},{default:m(()=>t[4]||(t[4]=[y(" Submit ")])),_:1}),p(_,{type:"reset",class:"btn btn-secondary",onClick:F},{default:m(()=>t[5]||(t[5]=[y(" Reset ")])),_:1})])],32)])])])]))}},ie=I(te,[["__scopeId","data-v-72310091"]]);export{ie as default};
