{"version":3,"file":"MarketingView-a3qBPeEX.js","sources":["../../src/views/MarketingView.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { utils, writeFile } from \"xlsx\";\r\nimport { VueGoodTable } from \"vue-good-table-next\";\r\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\r\n\r\nconst marketingData = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\nconst searchQuery = ref(\"\");\r\n\r\n// **Pagination & Table Config**\r\nconst perPage = ref(20);\r\nconst currentPage = ref(1);\r\nconst totalRows = computed(() => marketingData.value.length);\r\n\r\n// **Fetch API Data**\r\nconst fetchMarketingData = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      \"https://www.transkon-rent.com/api/marketing\"\r\n    );\r\n    marketingData.value = response.data;\r\n  } catch (err) {\r\n    error.value = \"Failed to load data\";\r\n    console.error(err);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// **Filtered Data for Search**\r\nconst filteredData = computed(() => {\r\n  if (!searchQuery.value) return marketingData.value;\r\n  return marketingData.value.filter((item) =>\r\n    item.name_customer.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n  );\r\n});\r\n\r\n// **Export Data to Excel**\r\nconst exportToExcel = () => {\r\n  const worksheet = utils.json_to_sheet(marketingData.value);\r\n  const workbook = utils.book_new();\r\n  utils.book_append_sheet(workbook, worksheet, \"Marketing Data\");\r\n  writeFile(workbook, \"MarketingData.xlsx\");\r\n};\r\n\r\nonMounted(fetchMarketingData);\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <h2>Marketing Data</h2>\r\n\r\n    <div class=\"actions\">\r\n      <input v-model=\"searchQuery\" placeholder=\"Search Customer Name...\" />\r\n      <button @click=\"exportToExcel\">Export to Excel</button>\r\n    </div>\r\n\r\n    <vue-good-table\r\n      :columns=\"[\r\n        { label: 'ID', field: 'id', sortable: true },\r\n        { label: 'Customer Name', field: 'name_customer', sortable: true },\r\n        { label: 'Location', field: 'location', sortable: true },\r\n      ]\"\r\n      :rows=\"filteredData\"\r\n      :pagination-options=\"{ enabled: true, mode: 'pages', perPage: perPage }\"\r\n      :search-options=\"{ enabled: true, placeholder: 'Search table' }\"\r\n      :sort-options=\"{ enabled: true }\"\r\n    />\r\n\r\n    <p v-if=\"loading\">Loading...</p>\r\n    <p v-if=\"error\" class=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 10px;\r\n}\r\ninput {\r\n  padding: 6px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\nbutton {\r\n  padding: 6px 12px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"names":["marketingData","ref","loading","error","searchQuery","perPage","computed","value","length","filteredData","filter","item","name_customer","toLowerCase","includes","exportToExcel","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","onMounted","async","response","axios","get","data","err"],"mappings":"gRAOM,MAAAA,EAAgBC,EAAI,IACpBC,EAAUD,GAAI,GACdE,EAAQF,EAAI,MACZG,EAAcH,EAAI,IAGlBI,EAAUJ,EAAI,IACAA,EAAI,GACGK,GAAA,IAAMN,EAAcO,MAAMC,SAGrD,MAeMC,EAAeH,GAAS,IACvBF,EAAYG,MACVP,EAAcO,MAAMG,QAAQC,GACjCA,EAAKC,cAAcC,cAAcC,SAASV,EAAYG,MAAMM,iBAF/Bb,EAAcO,QAOzCQ,EAAgB,KACpB,MAAMC,EAAYC,EAAMC,cAAclB,EAAcO,OAC9CY,EAAWF,EAAMG,WACjBH,EAAAI,kBAAkBF,EAAUH,EAAW,kBAC7CM,EAAUH,EAAU,qBAAoB,SAG1CI,GA9B2BC,UACrB,IACI,MAAAC,QAAiBC,EAAMC,IAC3B,+CAEF3B,EAAcO,MAAQkB,EAASG,IAChC,OAAQC,GACP1B,EAAMI,MAAQ,qBAElB,CAAY,QACRL,EAAQK,OAAQ,CACjB"}