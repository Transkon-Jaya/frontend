import"./vue-multiselect-BRPY6vpw.js";import{_ as A,u as B,r as e,A as u,o as I,y as k,c as d,q as c,a as s,l as U,h as N,t as S,F as H,j as R,d as w,p as T,g as n,z as $}from"./index-DVG3XZWj.js";/* empty css                            *//* empty css                                                 */import{C as x}from"./Charts-CLI3iT_f.js";import"./chart-BSyum5xv.js";const E={key:0,class:"container-global mb-2"},F={class:"d-flex justify-content-between align-items-center mb-2 mt-auto"},M={class:"text-end"},O={class:"nav nav-tabs"},V=["onClick"],z={key:0,class:"row g-4 mb-4"},P={key:0,class:"col-md-12"},j={class:"card h-100"},L={key:1,class:"col-md-12"},W={class:"card h-100"},q={__name:"AbsensiDashboard",setup(G){const r=B();e(null);const v=e(!0);e(null),e(null),e([]),e([]);const _=e(),h=e({title:"Daily Hour Worked",type:"line",api:{url:u+"/chart/absensi_avg_hw",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_worked"]},colors:["red"],labels:["Hour Worked"]}),m=e(),p=e({title:"Daily Hour In Out",type:"line",api:{url:u+"/chart/absensi_avg_hio",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_in_decimal","avg_hour_out_decimal"],extras:["avg_hour_in","avg_hour_out"]},colors:["green","red"],labels:["Hour In","Hour Out"]});async function D(){try{const a=await T.get(`${u}/get/myname`,{headers:{Authorization:`Bearer ${r.token}`},params:[r.username]});console.log("UPDATE NAME : ",a.data[0]),h.value.api.params[2]=a.data[0],p.value.api.params[2]=a.data[0]}catch(a){console.error("Failed to load name:",a)}}const b=e();function g(){const a=new Date,t=a.getHours().toString().padStart(2,"0"),o=a.getMinutes().toString().padStart(2,"0"),i=a.getSeconds().toString().padStart(2,"0");b.value=`${t}:${o}:${i}`}I(async()=>{var a,t;g(),setInterval(g,1e3),await D(),await k(),await k(),await Promise.all([(a=_.value)==null?void 0:a.renderChart(),(t=m.value)==null?void 0:t.renderChart()]),v.value=!1});const l=e(""),C=[{label:"All",value:""},{label:"Daily Trend",value:"0"},{label:"Coming Soon",value:"1"}];return e({title:"",styleClass:"",size:[10,30,100]}),e({firstCol:{label:"USERNAME",field:"username",type:"type",width:100},priority:["status","name","department","jabatan","hour_in","hour_out"],unpriority:["lastUpdated"],hidden:["tanggal","rn","created_at"],toRemove:["id"],exclude:[],uneditable:[],checkbox:["spare_exists"],date:[],datetime:[],status:{field:"status",calculate:a=>{var y,f;const t=new Date().toISOString().slice(0,10),o=(y=a.hour_in)==null?void 0:y.slice(0,10),i=(f=a.hour_out)==null?void 0:f.slice(0,10);return o!==t&&i!==t?"Tidak Hadir":a.hour_out==null?"Masuk":"Pulang"}}}),e({data:`${r.apiBaseUrl}/absensi-latest`,dropdowns:{vehicle_type:{url:r.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:r.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:r.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),(a,t)=>v.value?c("",!0):(n(),d("div",E,[s("div",F,[t[0]||(t[0]=s("h1",{class:"h3 fw-bold mb-0"},[s("i",{class:"bi bi-people-fill me-2"}),N(" Absensi Dashboard ")],-1)),s("div",M,[s("div",null,S(b.value),1)])]),t[1]||(t[1]=U('<div class="row text-center mb-2 mt-4" data-v-ad2b48cd><div class="col" data-v-ad2b48cd><div class="card border-success" data-v-ad2b48cd><div class="card-body" data-v-ad2b48cd><h3 class="text-success" data-v-ad2b48cd>0</h3><p class="fw-bold mb-0" data-v-ad2b48cd>Coming Soon</p></div></div></div><div class="col" data-v-ad2b48cd><div class="card border-danger" data-v-ad2b48cd><div class="card-body" data-v-ad2b48cd><h3 class="text-success" data-v-ad2b48cd>0</h3><p class="fw-bold mb-0" data-v-ad2b48cd>Coming Soon</p></div></div></div></div>',1)),s("ul",O,[(n(),d(H,null,R(C,o=>s("li",{class:"nav-item",key:o.value},[s("button",{class:$(["nav-link",{active:l.value===o.value}]),onClick:i=>l.value=o.value},S(o.label),11,V)])),64))]),l.value===""||["0","1","2","3"].includes(l.value)?(n(),d("div",z,[l.value===""||l.value==="0"?(n(),d("div",P,[s("div",j,[w(x,{ref_key:"chartRef1",ref:_,settings:h.value},null,8,["settings"])])])):c("",!0),l.value===""||l.value==="0"?(n(),d("div",L,[s("div",W,[w(x,{ref_key:"chartRef2",ref:m,settings:p.value},null,8,["settings"])])])):c("",!0)])):c("",!0)]))}},aa=A(q,[["__scopeId","data-v-ad2b48cd"]]);export{aa as default};
