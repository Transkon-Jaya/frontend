import{z as a,j as e,C as l,k as s,l as o,c as t,a as r,q as n,h as d,d as i,v as m,b as p,w as u,V as c,o as v,i as f,D as b,H as w,I as h}from"./index-DIFAsZJV.js";const y={class:"row"},P={class:"col-xl-6 mx-auto"},g={class:"card"},x={class:"card-body p-4"},U={class:"col-md-12"},V={class:"col-md-12"},N={class:"col-md-12"},k={class:"col-md-12"},C={class:"col-md-12"},S={class:"col-md-12"},_={class:"col-md-12"},j={class:"col-md-12"},D={key:0,class:"text-danger"},I={class:"col-md-12"},E={key:0,class:"mt-3"},q=["src"],z={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},B="Loading...",F={__name:"ProfileView",setup(F){const H=a(),L=H.apiBaseUrl+"/profile",R=e({name:B,email:B,phone:B,department:B,position:B,username:B,password:"",confirmPassword:""}),A=new FormData,G=e(),J=e(null),K=a=>{J.value=a.target.files[0]},M=l((()=>R.value.password!==R.value.confirmPassword));s((async()=>{try{const a=await o.get(L,{params:{username:H.username}});G.value=a.data[0],O()}catch(a){}}));const O=()=>{R.value.name=G.value.name,R.value.email=G.value.email,R.value.phone=G.value.phone,R.value.department=G.value.department,R.value.position=G.value.jabatan,R.value.username=H.username,R.value.password="",R.value.confirmPassword=""},Q=()=>{O()},T=async()=>{if(!M.value)try{A.append("name",R.value.name),A.append("email",R.value.email),A.append("phone",R.value.phone),A.append("department",R.value.department),A.append("position",R.value.position),A.append("username",R.value.username),R.value.password&&A.append("password",R.value.password),J.value&&A.append("profilePicture",J.value);const a=await o.post(L,A);b("update profile : ",a.data),H.setProfile(a.data.foto),b("user data : ",H.photo),await w(),window.location.reload(),alert("Profile updated successfully!")}catch(a){h("Submit error:",a),alert("Error updating profile.")}};return(a,e)=>(v(),t("div",y,[r("div",P,[r("div",g,[e[19]||(e[19]=r("div",{class:"card-header px-4 py-3"},[r("h5",{class:"mb-0"},"User Settings")],-1)),r("div",x,[r("form",{onSubmit:n(T,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[r("div",U,[e[8]||(e[8]=r("label",{for:"Name",class:"form-label"},"Name",-1)),i(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>R.value.name=a),type:"text",class:"form-control",id:"firstName",disabled:""},null,512),[[m,R.value.name]])]),r("div",V,[e[9]||(e[9]=r("label",{for:"phone",class:"form-label"},"E-mail",-1)),i(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>R.value.email=a),type:"text",class:"form-control",id:"email"},null,512),[[m,R.value.email]])]),r("div",N,[e[10]||(e[10]=r("label",{for:"phone",class:"form-label"},"Phone",-1)),i(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>R.value.phone=a),type:"text",class:"form-control",id:"phone"},null,512),[[m,R.value.phone]])]),r("div",k,[e[11]||(e[11]=r("label",{for:"department",class:"form-label"},"Department",-1)),i(r("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>R.value.department=a),type:"text",class:"form-control",id:"department",disabled:""},null,512),[[m,R.value.department]])]),r("div",C,[e[12]||(e[12]=r("label",{for:"position",class:"form-label"},"Position",-1)),i(r("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>R.value.position=a),type:"text",class:"form-control",id:"position",disabled:""},null,512),[[m,R.value.position]])]),r("div",S,[e[13]||(e[13]=r("label",{for:"userName",class:"form-label"},"User Name",-1)),i(r("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>R.value.username=a),type:"userName",class:"form-control",id:"userName",disabled:""},null,512),[[m,R.value.username]])]),r("div",_,[e[14]||(e[14]=r("label",{for:"password",class:"form-label"},"Password",-1)),i(r("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>R.value.password=a),type:"password",class:"form-control",id:"password"},null,512),[[m,R.value.password]])]),r("div",j,[e[15]||(e[15]=r("label",{for:"confirmationPassword",class:"form-label"},"Confirm Password",-1)),i(r("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>R.value.confirmPassword=a),type:"password",class:"form-control",id:"confirmationPassword"},null,512),[[m,R.value.confirmPassword]])]),M.value?(v(),t("small",D," Passwords do not match! ")):d("",!0),r("div",I,[e[16]||(e[16]=r("label",{for:"photo",class:"form-label"},"Upload Photo",-1)),r("input",{type:"file",class:"form-control",id:"photo",onChange:K,accept:"image/*"},null,32),a.previewImage?(v(),t("div",E,[r("img",{src:a.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,q)])):d("",!0)]),r("div",z,[p(c,{type:"submit",class:"btn btn-danger",disabled:M.value},{default:u((()=>e[17]||(e[17]=[f("Submit ")]))),_:1},8,["disabled"]),p(c,{type:"reset",class:"btn btn-secondary",onClick:Q},{default:u((()=>e[18]||(e[18]=[f(" Reset ")]))),_:1})])],32)])])])]))}};export{F as default};
