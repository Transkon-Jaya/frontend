import{_ as F,J as L,r as u,o as M,c as l,a as s,q as D,d as I,h as A,f as V,i as C,t as a,F as H,j as J,p as b,A as h,P as T,g as i}from"./index-Dg9o2Xjh.js";const O={class:"container-global"},Y={class:"d-flex justify-content-between align-items-center"},j={class:"button-group"},z={key:0,class:"text-center py-5"},R={key:1,class:"alert alert-danger"},U={key:2},q={class:"d-flex align-items-center mb-3"},G={class:"detail-img me-4"},K=["src"],Q={key:1,class:"fas fa-user-circle fa-5x text-secondary"},W={class:"col-md-4 employee-info"},X={class:"info-row"},Z={class:"info-value"},ss={class:"info-row"},es={class:"info-value"},ts={class:"info-row"},as={class:"info-value"},os={class:"info-row"},ns={class:"info-value"},ls={class:"info-row"},is={class:"info-value"},rs={class:"info-row"},ds={class:"info-value"},us={class:"info-row"},cs={class:"info-value"},ps={class:"info-row"},fs={class:"info-value"},vs={class:"col-md-4 employee-info"},ms={class:"info-row"},_s={class:"info-value"},gs={class:"info-row"},bs={class:"info-value"},hs={class:"info-row"},ys={class:"info-value"},ws={class:"info-row"},ks={class:"info-value"},Ds={class:"info-row"},As={class:"info-value"},xs={class:"info-row"},$s={class:"info-value"},Es={class:"info-row"},Ss={class:"info-value"},Bs={key:0,class:"text-center py-3"},Ns={key:1,class:"table table-bordered mt-3"},Ps={key:0},Fs={__name:"AbsensiDetailView",setup(Ls){const y=L(),w=y.params.username,f=localStorage.getItem("token"),t=u(null),v=u(null),m=u(!0),p=u(null),_=u([]),g=u(!0),x=async o=>{try{const e=await b.get(`${h}/get/profile-picture`,{params:{params:[o]},headers:{Authorization:`Bearer ${f}`}});v.value=T+"/profile/"+e.data}catch(e){console.error("Error fetching employee photo:",e)}},$=async()=>{var o;try{m.value=!0;const e=await b.get(`${h}/users?username=${w}`,{headers:{Authorization:`Bearer ${f}`}});t.value=e.data,t.value&&((o=t.value[0])!=null&&o.username)&&await x(t.value[0].username),E()}catch(e){p.value=e.message||"Failed to load employee data"}finally{m.value=!1}},E=async()=>{try{g.value=!0;const o=await b.get(`${h}/table-user?username=${y.params.username}&limit=7`,{headers:{Authorization:`Bearer ${f}`}});_.value=o.data}catch(o){p.value=o.message||"Failed to load attendance data"}finally{g.value=!1}};M(async()=>{console.log("Username from route:",w),await $(),console.log("data : ",t.value)});function S(o){const e=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],n=new Date(o),r=n.getDate(),d=e[n.getMonth()],c=n.getFullYear();return String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0"),String(n.getSeconds()).padStart(2,"0"),`${r} ${d} ${c}`}function k(o){return o&&o.split(" ")[1]||"-"}const B=o=>{if(!o)return null;try{const e=new Date(o),n=new Date;if(isNaN(e.getTime()))return"Invalid date";let r=n.getFullYear()-e.getFullYear(),d=n.getMonth()-e.getMonth(),c=n.getDate()-e.getDate();if(c<0){d--;const P=new Date(n.getFullYear(),n.getMonth(),0);c+=P.getDate()}return d<0&&(r--,d+=12),`${r} Tahun ${d} Bulan ${c} Hari`}catch(e){return console.error("Error calculating age:",e),"Error"}},N=()=>{window.print()};return(o,e)=>{const n=C("router-link");return i(),l("div",O,[s("div",Y,[e[2]||(e[2]=s("h2",{class:"fw-bold"},"Employee Attendance Detail",-1)),s("div",j,[s("button",{onClick:N,class:"btn btn-danger me-2"},e[0]||(e[0]=[s("i",{class:"fas fa-print me-1"},null,-1),A(" Print ")])),I(n,{to:"/hr/employee",class:"btn btn-danger"},{default:V(()=>e[1]||(e[1]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),A(" Back ")])),_:1})])]),m.value?(i(),l("div",z,e[3]||(e[3]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading employee data...",-1)]))):p.value?(i(),l("div",R,a(p.value),1)):t.value?(i(),l("div",U,[s("div",q,[s("div",G,[v.value?(i(),l("img",{key:0,src:v.value,alt:"Employee Photo",class:"employee-photo"},null,8,K)):(i(),l("i",Q))]),s("div",W,[s("div",X,[e[4]||(e[4]=s("span",{class:"info-label"},"NIK",-1)),s("span",Z,a(t.value[0].username),1)]),s("div",ss,[e[5]||(e[5]=s("span",{class:"info-label"},"Name",-1)),s("span",es,a(t.value[0].name),1)]),s("div",ts,[e[6]||(e[6]=s("span",{class:"info-label"},"Dob",-1)),s("span",as,a(t.value[0].dob||"-"),1)]),s("div",os,[e[7]||(e[7]=s("span",{class:"info-label"},"Age",-1)),s("span",ns,a(B(t.value[0].dob)||"-"),1)]),s("div",ls,[e[8]||(e[8]=s("span",{class:"info-label"},"Gender",-1)),s("span",is,a(t.value[0].gender),1)]),s("div",rs,[e[9]||(e[9]=s("span",{class:"info-label"},"Status",-1)),s("span",ds,a(t.value[0].status||"-"),1)]),s("div",us,[e[10]||(e[10]=s("span",{class:"info-label"},"Email",-1)),s("span",cs,a(t.value[0].email||"-"),1)]),s("div",ps,[e[11]||(e[11]=s("span",{class:"info-label"},"Phone",-1)),s("span",fs,a(t.value[0].phone||"-"),1)])]),s("div",vs,[s("div",ms,[e[12]||(e[12]=s("span",{class:"info-label"},"Dept",-1)),s("span",_s,a(t.value[0].department||"-"),1)]),s("div",gs,[e[13]||(e[13]=s("span",{class:"info-label"},"Jabatan",-1)),s("span",bs,a(t.value[0].jabatan||"-"),1)]),s("div",hs,[e[14]||(e[14]=s("span",{class:"info-label"},"Emp status",-1)),s("span",ys,a(t.value[0].kepegawaian||"-"),1)]),s("div",ws,[e[15]||(e[15]=s("span",{class:"info-label"},"Class",-1)),s("span",ks,a(t.value[0].klasifikasi||"-"),1)]),s("div",Ds,[e[16]||(e[16]=s("span",{class:"info-label"},"Placement",-1)),s("span",As,a(t.value[0].placement||"-"),1)]),s("div",xs,[e[17]||(e[17]=s("span",{class:"info-label"},"Hub",-1)),s("span",$s,a(t.value[0].hub_placement||"-"),1)]),s("div",Es,[e[18]||(e[18]=s("span",{class:"info-label"},"Location",-1)),s("span",Ss,a(t.value[0].lokasi||"-"),1)])])]),e[22]||(e[22]=s("h4",{class:"fw-bold mt-4"},"Attendance History",-1)),g.value?(i(),l("div",Bs,e[19]||(e[19]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(i(),l("table",Ns,[e[21]||(e[21]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Date"),s("th",null,"In"),s("th",null,"Out")])],-1)),s("tbody",null,[_.value.length===0?(i(),l("tr",Ps,e[20]||(e[20]=[s("td",{colspan:"4",class:"text-center py-4"},"No attendance records found",-1)]))):D("",!0),(i(!0),l(H,null,J(_.value,(r,d)=>(i(),l("tr",{key:d},[s("td",null,a(S(r.tanggal)),1),s("td",null,a(k(r.hour_in||"-")),1),s("td",null,a(k(r.hour_out||"-")),1)]))),128))])]))])):D("",!0)])}}},Is=F(Fs,[["__scopeId","data-v-62e6d6f5"]]);export{Is as default};
