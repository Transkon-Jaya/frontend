import{_ as I,J as F,r as u,o as T,c as l,a as s,q as y,d as C,h as x,f as H,i as J,t as e,F as A,j as P,p as _,A as h,P as V,g as o}from"./index-Br1_NATY.js";const j={class:"container-global"},O={class:"d-flex justify-content-between align-items-center"},Y={class:"button-group"},z={key:0,class:"text-center py-5"},R={key:1,class:"alert alert-danger"},U={key:2},G={class:"d-flex align-items-center mb-3"},q={class:"detail-img me-4"},K=["src"],Q={key:1,class:"fas fa-user-circle fa-5x text-secondary"},W={class:"col-md-4 employee-info"},X={class:"info-row"},Z={class:"info-value"},ss={class:"info-row"},ts={class:"info-value"},es={class:"info-row"},as={class:"info-value"},ns={class:"info-row"},ls={class:"info-value"},os={class:"info-row"},is={class:"info-value"},rs={class:"info-row"},ds={class:"info-value"},us={class:"info-row"},cs={class:"info-value"},ps={class:"info-row"},fs={class:"info-value"},vs={class:"col-md-4 employee-info"},ms={class:"info-row"},gs={class:"info-value"},bs={class:"info-row"},ys={class:"info-value"},_s={class:"info-row"},hs={class:"info-value"},ws={class:"info-row"},ks={class:"info-value"},Ds={class:"info-row"},xs={class:"info-value"},As={class:"info-row"},Ps={class:"info-value"},Ss={class:"info-row"},Ms={class:"info-value"},$s={key:0,class:"text-center py-3"},Bs={key:1,class:"table table-bordered mt-3"},Es={key:0},Ls={key:2,class:"text-center py-3"},Ns={key:3,class:"table table-bordered mt-3"},Is={key:0},Fs={__name:"AbsensiDetailView",setup(Ts){const w=F(),k=w.params.username,m=localStorage.getItem("token"),a=u(null),g=u(null),b=u(!0),p=u(null),f=u([]),v=u(!0),S=async n=>{try{const t=await _.get(`${h}/get/profile-picture`,{params:{params:[n]},headers:{Authorization:`Bearer ${m}`}});g.value=V+"/profile/"+t.data}catch(t){console.error("Error fetching employee photo:",t)}},M=async()=>{var n;try{b.value=!0;const t=await _.get(`${h}/users?username=${k}`,{headers:{Authorization:`Bearer ${m}`}});a.value=t.data,a.value&&((n=a.value[0])!=null&&n.username)&&await S(a.value[0].username),$()}catch(t){p.value=t.message||"Failed to load employee data"}finally{b.value=!1}},$=async()=>{try{v.value=!0;const n=await _.get(`${h}/table-user?username=${w.params.username}&limit=7`,{headers:{Authorization:`Bearer ${m}`}});f.value=n.data}catch(n){p.value=n.message||"Failed to load attendance data"}finally{v.value=!1}};T(async()=>{console.log("Username from route:",k),await M(),console.log("data : ",a.value)});function B(n){const t=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],i=new Date(n),r=i.getDate(),d=t[i.getMonth()],c=i.getFullYear();return String(i.getHours()).padStart(2,"0"),String(i.getMinutes()).padStart(2,"0"),String(i.getSeconds()).padStart(2,"0"),`${r} ${d} ${c}`}function D(n){return n&&n.split(" ")[1]||"-"}const E=n=>{if(!n)return null;try{const t=new Date(n),i=new Date;if(isNaN(t.getTime()))return"Invalid date";let r=i.getFullYear()-t.getFullYear(),d=i.getMonth()-t.getMonth(),c=i.getDate()-t.getDate();if(c<0){d--;const N=new Date(i.getFullYear(),i.getMonth(),0);c+=N.getDate()}return d<0&&(r--,d+=12),`${r} Tahun ${d} Bulan ${c} Hari`}catch(t){return console.error("Error calculating age:",t),"Error"}},L=()=>{window.print()};return(n,t)=>{const i=J("router-link");return o(),l("div",j,[s("div",O,[t[2]||(t[2]=s("h2",{class:"fw-bold"},"Employee Attendance Detail",-1)),s("div",Y,[s("button",{onClick:L,class:"btn btn-danger me-2"},t[0]||(t[0]=[s("i",{class:"fas fa-print me-1"},null,-1),x(" Print ")])),C(i,{to:"/hr/employee",class:"btn btn-danger"},{default:H(()=>t[1]||(t[1]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),x(" Back ")])),_:1})])]),b.value?(o(),l("div",z,t[3]||(t[3]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading employee data...",-1)]))):p.value?(o(),l("div",R,e(p.value),1)):a.value?(o(),l("div",U,[s("div",G,[s("div",q,[g.value?(o(),l("img",{key:0,src:g.value,alt:"Employee Photo",class:"employee-photo"},null,8,K)):(o(),l("i",Q))]),s("div",W,[s("div",X,[t[4]||(t[4]=s("span",{class:"info-label"},"NIK",-1)),s("span",Z,e(a.value[0].username),1)]),s("div",ss,[t[5]||(t[5]=s("span",{class:"info-label"},"Name",-1)),s("span",ts,e(a.value[0].name),1)]),s("div",es,[t[6]||(t[6]=s("span",{class:"info-label"},"Dob",-1)),s("span",as,e(a.value[0].dob||"-"),1)]),s("div",ns,[t[7]||(t[7]=s("span",{class:"info-label"},"Age",-1)),s("span",ls,e(E(a.value[0].dob)||"-"),1)]),s("div",os,[t[8]||(t[8]=s("span",{class:"info-label"},"Gender",-1)),s("span",is,e(a.value[0].gender),1)]),s("div",rs,[t[9]||(t[9]=s("span",{class:"info-label"},"Status",-1)),s("span",ds,e(a.value[0].status||"-"),1)]),s("div",us,[t[10]||(t[10]=s("span",{class:"info-label"},"Email",-1)),s("span",cs,e(a.value[0].email||"-"),1)]),s("div",ps,[t[11]||(t[11]=s("span",{class:"info-label"},"Phone",-1)),s("span",fs,e(a.value[0].phone||"-"),1)])]),s("div",vs,[s("div",ms,[t[12]||(t[12]=s("span",{class:"info-label"},"Dept",-1)),s("span",gs,e(a.value[0].department||"-"),1)]),s("div",bs,[t[13]||(t[13]=s("span",{class:"info-label"},"Jabatan",-1)),s("span",ys,e(a.value[0].jabatan||"-"),1)]),s("div",_s,[t[14]||(t[14]=s("span",{class:"info-label"},"Emp status",-1)),s("span",hs,e(a.value[0].kepegawaian||"-"),1)]),s("div",ws,[t[15]||(t[15]=s("span",{class:"info-label"},"Class",-1)),s("span",ks,e(a.value[0].klasifikasi||"-"),1)]),s("div",Ds,[t[16]||(t[16]=s("span",{class:"info-label"},"Placement",-1)),s("span",xs,e(a.value[0].placement||"-"),1)]),s("div",As,[t[17]||(t[17]=s("span",{class:"info-label"},"Hub",-1)),s("span",Ps,e(a.value[0].hub_placement||"-"),1)]),s("div",Ss,[t[18]||(t[18]=s("span",{class:"info-label"},"Location",-1)),s("span",Ms,e(a.value[0].lokasi||"-"),1)])])]),t[29]||(t[29]=s("h4",{class:"fw-bold mt-4"},"Training History",-1)),v.value?(o(),l("div",$s,t[19]||(t[19]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(o(),l("table",Bs,[t[25]||(t[25]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Training Certificate"),s("th",null,"Date issued"),s("th",null,"Issued by")])],-1)),s("tbody",null,[f.value.length===0?(o(),l("tr",Es,t[20]||(t[20]=[s("td",{colspan:"4",class:"text-center py-4"},"No records found",-1)]))):y("",!0),(o(!0),l(A,null,P(n.sertifikatData,(r,d)=>(o(),l("tr",{key:d},[s("td",null,e(r.sertifikat||"-"),1),s("td",null,e(r.tanggal||"-"),1),s("td",null,e(r.lembaga||"-"),1)]))),128)),t[21]||(t[21]=s("tr",null,[s("td",null,"Sertifikat Pelatihan Leadership 2023"),s("td",null,"15 Maret 2023"),s("td",null,"PT. Pelatihan Profesional Indonesia")],-1)),t[22]||(t[22]=s("tr",null,[s("td",null,"Sertifikat Digital Marketing Masterclass"),s("td",null,"2 September 2022"),s("td",null,"Google Digital Academy")],-1)),t[23]||(t[23]=s("tr",null,[s("td",null,"Sertifikat Manajemen Proyek"),s("td",null,"10 November 2021"),s("td",null,"Project Management Institute")],-1)),t[24]||(t[24]=s("tr",null,[s("td",null,"Sertifikat Bahasa Inggris Bisnis"),s("td",null,"5 Juli 2020"),s("td",null,"British Council Indonesia")],-1))])])),t[30]||(t[30]=s("h4",{class:"fw-bold mt-4"},"Attendance History",-1)),v.value?(o(),l("div",Ls,t[26]||(t[26]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(o(),l("table",Ns,[t[28]||(t[28]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Date"),s("th",null,"In"),s("th",null,"Out")])],-1)),s("tbody",null,[f.value.length===0?(o(),l("tr",Is,t[27]||(t[27]=[s("td",{colspan:"4",class:"text-center py-4"},"No attendance records found",-1)]))):y("",!0),(o(!0),l(A,null,P(f.value,(r,d)=>(o(),l("tr",{key:d},[s("td",null,e(B(r.tanggal)),1),s("td",null,e(D(r.hour_in||"-")),1),s("td",null,e(D(r.hour_out||"-")),1)]))),128))])]))])):y("",!0)])}}},Hs=I(Fs,[["__scopeId","data-v-9734f0eb"]]);export{Hs as default};
