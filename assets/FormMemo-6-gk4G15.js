import{_ as y,u as z,z as B,B as F,r as i,l as P,o as M,s as c,c as m,a as e,p as S,b as u,v as p,n as V,d as f,f as g,V as v,A as E,g as b,h as k,D as U,x as A,E as D}from"./index-K7Fjj5Ko.js";const N={class:"row"},T={class:"col-xl-6 mx-auto"},I={class:"card"},C={class:"card-body p-4"},R={class:"col-md-12"},L={class:"col-md-12"},J={key:0,class:"mt-3"},K=["src"],O={class:"col-md-12"},$={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},j={__name:"FormMemo",setup(q){const s=z();B();const d=E+"/perizinan",a=F({keterangan:"",izin:"",izinLabel:""}),r=new FormData,_=i(),n=i(null),h=o=>{n.value=o.target.files[0]};P(()=>a.password!==a.confirmPassword),M(async()=>{console.log("Photo : ",s.photo);try{const o=await c.get(d,{headers:{Authorization:`Bearer ${s.token}`},params:{username:s.username}});_.value=o.data[0]}catch(o){console.error("Fetch error:",o)}});const x=()=>{a.keterangan="",a.izin="",a.izinLabel=""},w=async()=>{try{if(a.keterangan==""){alert("Keterangan Masih Kosong");return}if(a.izin==""){alert("Pilih Jenis Perizinan");return}if(!n.value){alert("Upload Foto Bukti");return}r.append("username",s.username),r.append("picture",n.value),r.append("keterangan",a.keterangan),r.append("izin",a.izin);const o=await c.post(d,r,{headers:{Authorization:`Bearer ${s.token}`}});U("RESPONSE : ",o.data),await A(),alert("Inserted successfully!")}catch(o){D("Submit error:",o),alert("Error updating profile.")}};return i(!1),(o,t)=>(b(),m("div",N,[e("div",T,[e("div",I,[t[7]||(t[7]=e("div",{class:"card-header px-4 py-3"},[e("h5",{class:"mb-0"},"TRJA Memo Officer Page")],-1)),e("div",C,[e("form",{onSubmit:S(w,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[e("div",R,[t[2]||(t[2]=e("label",{for:"no_dokument",class:"form-label"},"No Dokument",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.keterangan=l),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,a.keterangan]])]),e("div",L,[t[3]||(t[3]=e("label",{for:"photo",class:"form-label"},"Upload Memo",-1)),e("input",{type:"file",class:"form-control",id:"photo",onChange:h,accept:"image/*"},null,32),o.previewImage?(b(),m("div",J,[e("img",{src:o.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,K)])):V("",!0)]),e("div",O,[t[4]||(t[4]=e("label",{for:"text",class:"form-label"},"Text",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.keterangan=l),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,a.keterangan]])]),e("div",$,[f(v,{type:"submit",color:"danger",size:"md",block:!1},{default:g(()=>t[5]||(t[5]=[k(" Submit ")])),_:1}),f(v,{type:"reset",class:"btn btn-secondary",onClick:x},{default:g(()=>t[6]||(t[6]=[k(" Reset ")])),_:1})])],32)])])])]))}},H=y(j,[["__scopeId","data-v-0a545b6d"]]);export{H as default};
