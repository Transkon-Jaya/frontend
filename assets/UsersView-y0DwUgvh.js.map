{"version":3,"file":"UsersView-y0DwUgvh.js","sources":["../../src/views/admin/UsersView.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-users\">\r\n    <h2>User Management</h2>\r\n    <button @click=\"openCreateUserModal\">Create New User</button>\r\n\r\n    <vue-good-table\r\n      :columns=\"columns\"\r\n      :rows=\"users\"\r\n      :pagination-options=\"{ enabled: true, mode: 'pages', perPage: 10 }\"\r\n      :search-options=\"{ enabled: true }\"\r\n      :sort-options=\"{ enabled: true }\"\r\n    >\r\n      <template v-slot:table-row=\"props\">\r\n        <!-- Editable Name -->\r\n        <template v-if=\"props.column.field === 'name'\">\r\n          <input v-model=\"props.row.name\" />\r\n        </template>\r\n        <!-- Editable Username -->\r\n        <template v-else-if=\"props.column.field === 'username'\">\r\n          <input v-model=\"props.row.username\" />\r\n        </template>\r\n        <!-- Level Dropdown -->\r\n        <template v-else-if=\"props.column.field === 'level'\">\r\n          <select v-model=\"props.row.level\">\r\n            <option v-for=\"lvl in levels\" :key=\"lvl\" :value=\"lvl\">\r\n              {{ lvl }}\r\n            </option>\r\n          </select>\r\n        </template>\r\n        <!-- Actions -->\r\n        <template v-else-if=\"props.column.field === 'actions'\">\r\n          <button @click=\"updateUser(props.row)\">Save</button>\r\n          <button @click=\"deleteUser(props.row)\">Delete</button>\r\n        </template>\r\n        <!-- Default Display -->\r\n        <template v-else>\r\n          <span>{{ props.row[props.column.field] }}</span>\r\n        </template>\r\n      </template>\r\n    </vue-good-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      users: [],\r\n      levels: Array.from({ length: 11 }, (_, i) => i), // Levels 0 to 10\r\n      columns: [\r\n        { label: \"Name\", field: \"name\", editable: true },\r\n        { label: \"Username\", field: \"username\", editable: true },\r\n        { label: \"Level\", field: \"level\", editable: true },\r\n        { label: \"Actions\", field: \"actions\" },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const response = await fetch(\r\n          \"https://www.transkon-rent.com/api/users\",\r\n          {\r\n            method: \"GET\", // or 'POST', 'PUT', etc.\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: `Bearer ${localStorage.getItem(\"jwt-token\")}`, // Replace yourToken with your actual token\r\n            },\r\n            body: JSON.stringify({ level: localStorage.getItem(\"user_level\") }),\r\n          }\r\n        );\r\n        this.users = await response.json();\r\n      } catch (error) {\r\n        console.error(\"Error fetching users:\", error);\r\n      }\r\n    },\r\n    async updateUser(user) {\r\n      try {\r\n        await fetch(`/api/users/${user.id}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(user),\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error updating user:\", error);\r\n      }\r\n    },\r\n    async deleteUser(user) {\r\n      if (confirm(`Are you sure you want to delete ${user.username}?`)) {\r\n        try {\r\n          await fetch(`/api/users/${user.id}`, { method: \"DELETE\" });\r\n          this.fetchUsers();\r\n        } catch (error) {\r\n          console.error(\"Error deleting user:\", error);\r\n        }\r\n      }\r\n    },\r\n    openCreateUserModal() {\r\n      // Placeholder for modal logic\r\n      alert(\"Open user creation modal\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUsers();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-users {\r\n  max-width: 80%;\r\n  margin: auto;\r\n  padding: 20px;\r\n}\r\n\r\nbutton {\r\n  margin: 5px;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  cursor: pointer;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border-radius: 5px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\ninput,\r\nselect {\r\n  padding: 5px;\r\n  margin: 2px;\r\n}\r\n</style>\r\n"],"names":["_sfc_main","_","i","response","error","user","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_cache","_createElementVNode","$options","args","_createVNode","_component_vue_good_table","$data","_withCtx","props","$event","_Fragment","_renderList","lvl","_toDisplayString","_hoisted_8"],"mappings":"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"}