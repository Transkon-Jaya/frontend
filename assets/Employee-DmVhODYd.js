import{_ as Y,u as Z,r as m,o as ee,n as E,c as n,a as e,q as C,h as f,t as i,F as c,j as p,b as d,k as b,z as B,s as le,v as j,p as L,A as P,G as te,g as o}from"./index-B44UkB8J.js";const ae={class:"card border-0 shadow-sm"},se={class:"card-header"},ne={class:"d-flex justify-content-between align-items-center"},oe=["disabled"],ie={class:"card-body"},ue={key:0,class:"alert alert-danger alert-dismissible fade show"},re={key:1,class:"text-center py-5"},de={key:2,class:"table-responsive"},ve={class:"table table-hover table-striped table-bordered mb-0"},me={class:"table-dark"},ce=["onUpdate:modelValue","placeholder"],pe={key:0},be=["colspan"],fe={class:"text-center"},ge=["onClick"],ke={class:"text-center"},ye={class:"text-center"},_e={class:"text-center"},we={class:"text-center"},xe={class:"text-center"},he={class:"text-center"},Ce={class:"text-center"},Se={class:"btn-group btn-group-sm",role:"group"},Ue=["onClick"],Ve=["onClick"],Be={class:"d-flex flex-wrap justify-content-between align-items-center mt-3"},je={class:"d-flex align-items-center mb-2"},Le=["value"],Pe={class:"text-muted"},De={"aria-label":"Page navigation"},$e={class:"pagination pagination-sm mb-0"},Ee={class:"page-item disabled"},Ie={class:"page-link"},Ne={key:0,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},Ae={class:"modal-dialog modal-dialog-centered modal-lg"},Ke={class:"modal-content border-0 shadow"},Te={class:"modal-header bg-danger text-white"},qe={class:"modal-title"},Oe={class:"modal-body"},Fe={class:"row g-3"},Me={class:"col-md-6"},Re=["disabled"],ze={class:"col-md-6"},Ge={class:"col-md-6"},He={class:"col-md-6"},Je={class:"col-md-6"},Qe=["value"],We={class:"col-md-6"},Xe=["value"],Ye={class:"col-md-6"},Ze=["value"],el={class:"col-md-6"},ll=["value"],tl={class:"col-md-6"},al=["value"],sl={class:"col-md-6"},nl=["value"],ol={class:"col-md-6"},il=["value"],ul={class:"col-md-6"},rl=["value"],dl={class:"col-md-6"},vl=["value"],ml={class:"col-md-6"},cl=["value"],pl={class:"col-md-6"},bl=["value"],fl={class:"modal-footer border-top-0"},gl={type:"submit",class:"btn btn-danger"},kl={key:1,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},yl={class:"modal-dialog modal-dialog-centered"},_l={class:"modal-content border-0 shadow"},wl={class:"modal-body"},xl={__name:"Employee",setup(hl){const q=Z(),O=te(),v=m([]),a=m({departments:[],jabatan:[],placements:[],genders:["L","P"],locations:[],hub_placement:[],status:[],divisi:[],section:[],kepegawaian:[],klasifikasi:[],salary_code:[]}),S=m(!0),w=m(null),F=m(0),U=m(!1),k=m(!1),s=m({}),M=m(-1),h=m(!1),x=m(null),y=m({username:"",name:"",department:"",jabatan:"",placement:"",gender:"",lokasi:""}),_=m(10),g=m(1),R=[10,20,50,{value:-1,text:"All"}],I=[{text:"Id  ",value:"username",align:"center",sortable:!0,filterable:!0},{text:"Nama",value:"name",align:"center",sortable:!0,filterable:!0},{text:"Departemen",value:"department",align:"center",sortable:!0,filterable:!0},{text:"Position",value:"jabatan",align:"center",sortable:!0,filterable:!0},{text:"Penempatan",value:"placement",align:"center",sortable:!0,filterable:!0},{text:"Gender",value:"gender",align:"center",sortable:!0,filterable:!0},{text:"Lokasi",value:"lokasi",align:"center",sortable:!0,filterable:!0},{text:"Actions",value:"actions",align:"center",sortable:!1,filterable:!1}],D=async()=>{var r,l;try{S.value=!0;const t=await L.get(`${P}/users`,{headers:{Authorization:`Bearer ${q.token}`}});v.value=t.data,F.value=v.value.length,a.value.departments=[...new Set(v.value.map(u=>u.department).filter(Boolean))],a.value.jabatan=[...new Set(v.value.map(u=>u.jabatan).filter(Boolean))],a.value.placements=[...new Set(v.value.map(u=>u.placement).filter(Boolean))],a.value.locations=[...new Set(v.value.map(u=>u.lokasi).filter(Boolean))],a.value.site=[...new Set(v.value.map(u=>u.site).filter(Boolean))],a.value.hub_placement=[...new Set(v.value.map(u=>u.hub_placement).filter(Boolean))],a.value.status=[...new Set(v.value.map(u=>u.status).filter(Boolean))],a.value.divisi=[...new Set(v.value.map(u=>u.divisi).filter(Boolean))],a.value.section=[...new Set(v.value.map(u=>u.section).filter(Boolean))],a.value.kepegawaian=[...new Set(v.value.map(u=>u.kepegawaian).filter(Boolean))],a.value.klasifikasi=[...new Set(v.value.map(u=>u.klasifikasi).filter(Boolean))],a.value.salary_code=[...new Set(v.value.map(u=>u.salary_code).filter(Boolean))],S.value=!1}catch(t){w.value=((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||t.message,S.value=!1}};ee(async()=>{await D()});const V=E(()=>v.value.filter(r=>Object.keys(y.value).every(l=>y.value[l]?String(r[l]).toLowerCase().includes(y.value[l].toLowerCase()):!0))),$=E(()=>{if(_.value===-1)return V.value;const r=(g.value-1)*_.value,l=r+_.value;return V.value.slice(r,l)}),N=E(()=>_.value===-1?1:Math.ceil(V.value.length/_.value)),z=()=>{s.value={username:"",name:"",dob:"",placement:a.value.placements[0]||"",gender:a.value.genders[0]||"L",lokasi:a.value.locations[0]||"",hub_placement:a.value.hub_placement[0]||"",status:a.value.status[0]||"",department:a.value.jabatan[0]||"",department:a.value.departments[0]||"",divisi:a.value.divisi[0]||"",section:a.value.section[0]||"",kepegawaian:a.value.kepegawaian[0]||"",klasifikasi:a.value.klasifikasi[0]||"",salary_code:a.value.salary_code[0]||"",klasifikasi:a.value.klasifikasi[0]||"",site:a.value.site[0]||""},k.value=!0},G=r=>{M.value=v.value.findIndex(l=>l.username===r.username),s.value=JSON.parse(JSON.stringify(r)),U.value=!0},H=async()=>{var r,l;try{k.value?(await L.post(`${P}/users`,s.value,{headers:{"Content-Type":"application/json"}}),k.value=!1):(await L.put(`${P}/users`,s.value,{headers:{"Content-Type":"application/json"}}),U.value=!1),s.value={},await D()}catch(t){w.value=((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.error)||t.message,console.error("CRUD Error:",t)}},J=r=>{x.value=r,h.value=!0},Q=async()=>{var r,l;try{await L.delete(`${P}/users?username=${x.value.username}`),h.value=!1,x.value=null,await D()}catch(t){w.value=((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||t.message,h.value=!1}},A=()=>{h.value=!1,x.value=null},K=()=>{U.value=!1,k.value=!1,s.value={}},W=r=>{O.push({name:"hr-absensi-detail",params:{username:r}})},X=()=>{Object.keys(y.value).forEach(r=>{y.value[r]=""}),g.value=1};return(r,l)=>(o(),n("div",ae,[e("div",se,[e("div",ne,[l[23]||(l[23]=e("h3",{class:"mb-0"},"List Karyawan",-1)),e("div",null,[e("button",{onClick:X,class:"btn btn-sm btn-light me-2",disabled:!Object.values(y.value).some(Boolean)},l[21]||(l[21]=[e("i",{class:"fas fa-filter-circle-xmark me-1"},null,-1),f(" Reset Filters ")]),8,oe),e("button",{onClick:z,class:"btn btn-sm btn-danger"},l[22]||(l[22]=[e("i",{class:"fas fa-plus me-1"},null,-1),f(" Add New ")]))])])]),e("div",ie,[w.value?(o(),n("div",ue,[f(i(w.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=t=>w.value=null)})])):C("",!0),S.value?(o(),n("div",re,l[24]||(l[24]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-2"},"Loading data...",-1)]))):(o(),n("div",de,[e("table",ve,[e("thead",me,[e("tr",null,[(o(),n(c,null,p(I,t=>e("th",{key:t.value,class:B(["text-center",{"filter-cell":t.filterable}])},[e("div",null,i(t.text),1),t.filterable?d((o(),n("input",{key:0,"onUpdate:modelValue":u=>y.value[t.value]=u,type:"text",class:"form-control form-control-sm mt-1 text-center",placeholder:`Filter ${t.text}`,onInput:l[1]||(l[1]=u=>g.value=1)},null,40,ce)),[[j,y.value[t.value]]]):C("",!0)],2)),64))])]),e("tbody",null,[$.value.length===0?(o(),n("tr",pe,[e("td",{colspan:I.length,class:"text-center py-4"},"No data available",8,be)])):C("",!0),(o(!0),n(c,null,p($.value,(t,u)=>(o(),n("tr",{key:u,class:"align-middle"},[e("td",fe,[e("a",{href:"javascript:void(0)",onClick:T=>W(t.username),class:"text-primary fw-semibold"},i(t.username),9,ge)]),e("td",ke,i(t.name),1),e("td",ye,i(t.department),1),e("td",_e,i(t.jabatan),1),e("td",we,i(t.placement),1),e("td",xe,[e("span",{class:B(["badge",t.gender==="Laki-laki"?"bg-info":"bg-danger"])},i(t.gender),3)]),e("td",he,i(t.lokasi),1),e("td",Ce,[e("div",Se,[e("button",{onClick:T=>G(t),class:"btn btn-warning",title:"Edit"},l[25]||(l[25]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ue),e("button",{onClick:T=>J(t),class:"btn btn-danger",title:"Delete",id:"confirm-text"},l[26]||(l[26]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Ve)])])]))),128))])])])),e("div",Be,[e("div",je,[d(e("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>_.value=t),class:"form-select form-select-sm me-2",style:{width:"90px"},onChange:l[3]||(l[3]=t=>g.value=1)},[(o(),n(c,null,p(R,t=>e("option",{key:t.value||t,value:t.value||t},i(t.text||t),9,Le)),64))],544),[[b,_.value]]),e("small",Pe," Showing "+i($.value.length)+" of "+i(V.value.length)+" entries ",1)]),e("nav",De,[e("ul",$e,[e("li",{class:B(["page-item",{disabled:g.value===1}])},[e("button",{class:"page-link",onClick:l[4]||(l[4]=t=>g.value--)},l[27]||(l[27]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))],2),e("li",Ee,[e("span",Ie," Page "+i(g.value)+" of "+i(N.value),1)]),e("li",{class:B(["page-item",{disabled:g.value===N.value}])},[e("button",{class:"page-link",onClick:l[5]||(l[5]=t=>g.value++)},l[28]||(l[28]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])]),U.value||k.value?(o(),n("div",Ne,[e("div",Ae,[e("div",Ke,[e("div",Te,[e("h5",qe,i(k.value?"Tambah Karyawan Baru":"Edit Karyawan"),1),e("button",{type:"button",class:"btn-close btn-close-white",onClick:K})]),e("div",Oe,[e("form",{onSubmit:le(H,["prevent"])},[e("div",Fe,[e("div",Me,[l[29]||(l[29]=e("label",{class:"form-label"},[f("NIK "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[6]||(l[6]=t=>s.value.username=t),type:"text",class:"form-control",disabled:!k.value,required:""},null,8,Re),[[j,s.value.username]])]),e("div",ze,[l[30]||(l[30]=e("label",{class:"form-label"},[f("Nama "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[7]||(l[7]=t=>s.value.name=t),type:"text",class:"form-control",required:""},null,512),[[j,s.value.name]])]),e("div",Ge,[l[31]||(l[31]=e("label",{class:"form-label"},"Tanggal Lahir",-1)),d(e("input",{"onUpdate:modelValue":l[8]||(l[8]=t=>s.value.dob=t),type:"date",class:"form-control"},null,512),[[j,s.value.dob]])]),e("div",He,[l[33]||(l[33]=e("label",{class:"form-label"},"Gender",-1)),d(e("select",{"onUpdate:modelValue":l[9]||(l[9]=t=>s.value.gender=t),class:"form-select",required:""},l[32]||(l[32]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)]),512),[[b,s.value.gender]])]),e("div",Je,[l[34]||(l[34]=e("label",{class:"form-label"},"Departemen",-1)),d(e("select",{"onUpdate:modelValue":l[10]||(l[10]=t=>s.value.department=t),class:"form-select",required:""},[(o(!0),n(c,null,p(a.value.departments,t=>(o(),n("option",{value:t},i(t),9,Qe))),256))],512),[[b,s.value.department]])]),e("div",We,[l[35]||(l[35]=e("label",{class:"form-label"},"Jabatan",-1)),d(e("select",{"onUpdate:modelValue":l[11]||(l[11]=t=>s.value.jabatan=t),class:"form-select",required:""},[(o(!0),n(c,null,p(a.value.jabatan,t=>(o(),n("option",{value:t},i(t),9,Xe))),256))],512),[[b,s.value.jabatan]])]),e("div",Ye,[l[36]||(l[36]=e("label",{class:"form-label"},"Penempatan",-1)),d(e("select",{"onUpdate:modelValue":l[12]||(l[12]=t=>s.value.placement=t),class:"form-select",required:""},[(o(!0),n(c,null,p(a.value.placements,t=>(o(),n("option",{value:t},i(t),9,Ze))),256))],512),[[b,s.value.placement]])]),e("div",el,[l[38]||(l[38]=e("label",{class:"form-label"},"Lokasi",-1)),d(e("select",{"onUpdate:modelValue":l[13]||(l[13]=t=>s.value.lokasi=t),class:"form-select"},[l[37]||(l[37]=e("option",{value:""},"Pilih Lokasi",-1)),(o(!0),n(c,null,p(a.value.locations,t=>(o(),n("option",{value:t},i(t),9,ll))),256))],512),[[b,s.value.lokasi]])]),e("div",tl,[l[39]||(l[39]=e("label",{class:"form-label"},"Hub",-1)),d(e("select",{"onUpdate:modelValue":l[14]||(l[14]=t=>s.value.hub_placement=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.hub_placement,t=>(o(),n("option",{value:t},i(t),9,al))),256))],512),[[b,s.value.hub_placement]])]),e("div",sl,[l[40]||(l[40]=e("label",{class:"form-label"},"Status",-1)),d(e("select",{"onUpdate:modelValue":l[15]||(l[15]=t=>s.value.status=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.status,t=>(o(),n("option",{value:t},i(t),9,nl))),256))],512),[[b,s.value.status]])]),e("div",ol,[l[41]||(l[41]=e("label",{class:"form-label"},"Divisi",-1)),d(e("select",{"onUpdate:modelValue":l[16]||(l[16]=t=>s.value.divisi=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.divisi,t=>(o(),n("option",{value:t},i(t),9,il))),256))],512),[[b,s.value.divisi]])]),e("div",ul,[l[42]||(l[42]=e("label",{class:"form-label"},"Section",-1)),d(e("select",{"onUpdate:modelValue":l[17]||(l[17]=t=>s.value.section=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.section,t=>(o(),n("option",{value:t},i(t),9,rl))),256))],512),[[b,s.value.section]])]),e("div",dl,[l[43]||(l[43]=e("label",{class:"form-label"},"Kepegawaian",-1)),d(e("select",{"onUpdate:modelValue":l[18]||(l[18]=t=>s.value.kepegawaian=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.kepegawaian,t=>(o(),n("option",{value:t},i(t),9,vl))),256))],512),[[b,s.value.kepegawaian]])]),e("div",ml,[l[44]||(l[44]=e("label",{class:"form-label"},"Klasifikasi",-1)),d(e("select",{"onUpdate:modelValue":l[19]||(l[19]=t=>s.value.klasifikasi=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.klasifikasi,t=>(o(),n("option",{value:t},i(t),9,cl))),256))],512),[[b,s.value.klasifikasi]])]),e("div",pl,[l[45]||(l[45]=e("label",{class:"form-label"},"Salary Code",-1)),d(e("select",{"onUpdate:modelValue":l[20]||(l[20]=t=>s.value.salary_code=t),class:"form-select"},[(o(!0),n(c,null,p(a.value.salary_code,t=>(o(),n("option",{value:t},i(t),9,bl))),256))],512),[[b,s.value.salary_code]])])]),e("div",fl,[e("button",{type:"button",class:"btn btn-secondary",onClick:K},l[46]||(l[46]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Cancel ")])),e("button",gl,[l[47]||(l[47]=e("i",{class:"fas fa-save me-1"},null,-1)),f(" "+i(k.value?"Simpan":"Update"),1)])])],32)])])])])):C("",!0),h.value?(o(),n("div",kl,[e("div",yl,[e("div",_l,[e("div",{class:"modal-header bg-danger text-white"},[l[48]||(l[48]=e("h5",{class:"modal-title"},"Konfirmasi Hapus",-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:A})]),e("div",wl,[l[51]||(l[51]=e("p",null,"Apakah Anda yakin ingin menghapus karyawan ini?",-1)),e("p",null,[l[49]||(l[49]=e("strong",null,"NIK:",-1)),f(" "+i(x.value.username),1)]),e("p",null,[l[50]||(l[50]=e("strong",null,"Nama:",-1)),f(" "+i(x.value.name),1)]),l[52]||(l[52]=e("p",{class:"text-danger"},"Data yang dihapus tidak dapat dikembalikan!",-1))]),e("div",{class:"modal-footer border-top-0"},[e("button",{type:"button",class:"btn btn-secondary",onClick:A},l[53]||(l[53]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Batal ")])),e("button",{type:"button",class:"btn btn-danger",onClick:Q},l[54]||(l[54]=[e("i",{class:"fas fa-trash-alt me-1"},null,-1),f(" Hapus ")]))])])])])):C("",!0)]))}},Sl=Y(xl,[["__scopeId","data-v-3e8fba5e"]]);export{Sl as default};
