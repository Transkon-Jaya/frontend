import{s as A}from"./vue-multiselect-Bk9hWved.js";import{_ as j}from"./BigTable-Dgf0CfSA.js";import{_ as z,u as K,r as s,A as m,o as I,c as n,m as i,a as t,h as V,t as R,l as P,H as U,B,d as p,f as W,V as q,F as T,j as G,q as H,s as J,g as r,x as Q}from"./index-Dp6XvDYE.js";import{C as O}from"./Charts-D4pC2I82.js";import"./xlsx-CWKxJYCL.js";/* empty css                            *//* empty css                                                 */const X={key:0,class:"container-local mb-2"},Y={class:"d-flex justify-content-between align-items-center mb-2 mt-auto"},Z={class:"text-end"},ee={class:"row align-items-end mb-4"},ae={class:"col-md-5"},te={class:"col-md-5"},se={class:"col-md-2 text-end"},le={class:"nav nav-tabs"},oe=["onClick"],re={key:1,class:"card mb-4"},ne={class:"card-body"},ie={key:2,class:"row g-4 mb-4"},de={key:0,class:"col-md-12"},ue={class:"card h-100"},ce={class:"card h-100"},ve={__name:"AbsensiDashboard",setup(me){const u=K(),$=s(null),d=s(!0),b=s(null),_=s(null),h=s([]),y=s([]),g=s(),f=s({title:"Daily Average Hour Worked",type:"line",api:{url:m+"/chart/absensi_avg_hw",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_worked"]},colors:["red"],labels:["Average Hour Worked"]}),k=s(),w=s({title:"Daily Average Hour In Out",type:"line",api:{url:m+"/chart/absensi_avg_hio",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_in_decimal","avg_hour_out_decimal"],extras:["avg_hour_in","avg_hour_out"]},colors:["green","red"],labels:["Average Hour In","Average Hour Out"]}),E=async()=>{const l=await H.get(`${m}/dropdowns/department`);h.value=l.data.map(a=>({label:a,value:a})),console.log(h.value);const e=await H.get(`${m}/dropdowns/name`);y.value=e.data.map(a=>({label:a,value:a})),console.log(y.value),d.value=!1},S=s();function c(){const l=new Date,e=l.getHours().toString().padStart(2,"0"),a=l.getMinutes().toString().padStart(2,"0"),v=l.getSeconds().toString().padStart(2,"0");S.value=`${e}:${a}:${v}`}I(async()=>{c(),setInterval(c,1e3),await E(),d.value=!1});const o=s(""),F=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],M=s({title:"",styleClass:"",size:[10,30,100]}),N=s({firstCol:{label:"USERNAME",field:"username",type:"type",width:100},priority:["status","name","department","jabatan","hour_in","hour_out"],unpriority:["lastUpdated"],hidden:["tanggal","rn","created_at"],toRemove:["id"],exclude:[],uneditable:[],checkbox:["spare_exists"],date:[],datetime:[],status:{field:"status",calculate:l=>{var x,C;const e=new Date().toISOString().slice(0,10),a=(x=l.hour_in)==null?void 0:x.slice(0,10),v=(C=l.hour_out)==null?void 0:C.slice(0,10);return a!==e&&v!==e?"Tidak Hadir":l.hour_out==null?"Masuk":"Pulang"}}}),L=s({data:`${u.apiBaseUrl}/absensi-latest`,dropdowns:{vehicle_type:{url:u.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:u.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:u.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),D=async(l,e)=>{let a=0;l==="dep"?(b.value=e,a=3):l==="emp"&&(_.value=e,a=2),f.value.api.params[a]=e.value,w.value.api.params[a]=e.value,await g.value.renderChart(),await k.value.renderChart(),await J()};return I(()=>{c(),setInterval(c,1e3)}),(l,e)=>(r(),n(T,null,[d.value?i("",!0):(r(),n("div",X,[t("div",Y,[e[4]||(e[4]=t("h1",{class:"h3 fw-bold mb-0"},[t("i",{class:"bi bi-people-fill me-2"}),V(" Absensi Dashboard ")],-1)),t("div",Z,[t("div",null,R(S.value),1)])]),t("div",ee,[t("div",ae,[e[5]||(e[5]=t("label",{class:"form-label"},"Select Department",-1)),d.value?i("",!0):(r(),U(B(A),{key:0,modelValue:b.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>b.value=a),e[1]||(e[1]=a=>D("dep",a))],options:h.value||[],placeholder:"Select Department",label:"label","track-by":"value",class:"multiselect no-border"},null,8,["modelValue","options"]))]),t("div",te,[e[6]||(e[6]=t("label",{class:"form-label"},"Select Employee",-1)),d.value?i("",!0):(r(),U(B(A),{key:0,modelValue:_.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>_.value=a),e[3]||(e[3]=a=>D("emp",a))],options:y.value||[],placeholder:"Select Employee",label:"label","track-by":"value",class:"multiselect no-border"},null,8,["modelValue","options"]))]),t("div",se,[p(q,{type:"submit",color:"danger",size:"md",block:!1},{default:W(()=>e[7]||(e[7]=[V("Reset Filter")])),_:1})]),e[8]||(e[8]=P('<div class="row text-center mb-2 mt-4" data-v-543be462><div class="col" data-v-543be462><div class="card border-success" data-v-543be462><div class="card-body" data-v-543be462><h3 class="text-success" data-v-543be462>0</h3><p class="fw-bold mb-0" data-v-543be462>Total Karyawan Masuk Hari Ini</p></div></div></div><div class="col" data-v-543be462><div class="card border-danger" data-v-543be462><div class="card-body" data-v-543be462><h3 class="text-success" data-v-543be462>0</h3><p class="fw-bold mb-0" data-v-543be462>Total Karyawan Tidak Masuk Hari Ini</p></div></div></div></div>',1))]),t("ul",le,[(r(),n(T,null,G(F,a=>t("li",{class:"nav-item",key:a.value},[t("button",{class:Q(["nav-link",{active:o.value===a.value}]),onClick:v=>o.value=a.value},R(a.label),11,oe)])),64))])])),o.value===""||o.value==="site-summary"?(r(),n("div",re,[t("div",ne,[p(j,{ref_key:"bigTableRef",ref:$,settings:M.value,urls:L.value,fields:N.value,canInsert:!1,canUpdate:!0},null,8,["settings","urls","fields"])])])):i("",!0),o.value===""||["0","1","2","3"].includes(o.value)?(r(),n("div",ie,[o.value===""||o.value==="0"?(r(),n("div",de,[t("div",ue,[p(O,{ref_key:"chartRef1",ref:g,settings:f.value},null,8,["settings"])])])):i("",!0),t("div",ce,[p(O,{ref_key:"chartRef2",ref:k,settings:w.value},null,8,["settings"])])])):i("",!0)],64))}},ke=z(ve,[["__scopeId","data-v-543be462"]]);export{ke as default};
