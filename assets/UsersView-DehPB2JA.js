import{_ as e,c as a,a as o,b as t,w as l,r as s,o as n,d as r,v as d,F as i,e as u,t as c,f as m}from"./index-Cp3yx03n.js";const p={class:"admin-users"},f=["onUpdate:modelValue"],h=["onUpdate:modelValue"],w=["onUpdate:modelValue"],y=["value"],U=["onClick"],b=["onClick"],v={key:4};const k=e({data:()=>({users:[],levels:Array.from({length:11},((e,a)=>a)),columns:[{label:"Name",field:"name",editable:!0},{label:"Username",field:"username",editable:!0},{label:"Level",field:"level",editable:!0},{label:"Actions",field:"actions"}]}),methods:{async fetchUsers(){try{const e=await fetch("https://www.transkon-rent.com/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwt-token")}`},body:JSON.stringify({level:localStorage.getItem("user_level")})});this.users=await e.json()}catch(e){}},async updateUser(e){try{await fetch(`/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(a){}},async deleteUser(e){if(confirm(`Are you sure you want to delete ${e.username}?`))try{await fetch(`/api/users/${e.id}`,{method:"DELETE"}),this.fetchUsers()}catch(a){}},openCreateUserModal(){alert("Open user creation modal")}},mounted(){this.fetchUsers()}},[["render",function(e,k,g,C,V,j){const S=s("vue-good-table");return n(),a("div",p,[k[1]||(k[1]=o("h2",null,"User Management",-1)),o("button",{onClick:k[0]||(k[0]=(...e)=>j.openCreateUserModal&&j.openCreateUserModal(...e))},"Create New User"),t(S,{columns:V.columns,rows:V.users,"pagination-options":{enabled:!0,mode:"pages",perPage:10},"search-options":{enabled:!0},"sort-options":{enabled:!0}},{"table-row":l((e=>["name"===e.column.field?r((n(),a("input",{key:0,"onUpdate:modelValue":a=>e.row.name=a},null,8,f)),[[d,e.row.name]]):"username"===e.column.field?r((n(),a("input",{key:1,"onUpdate:modelValue":a=>e.row.username=a},null,8,h)),[[d,e.row.username]]):"level"===e.column.field?r((n(),a("select",{key:2,"onUpdate:modelValue":a=>e.row.level=a},[(n(!0),a(i,null,u(V.levels,(e=>(n(),a("option",{key:e,value:e},c(e),9,y)))),128))],8,w)),[[m,e.row.level]]):"actions"===e.column.field?(n(),a(i,{key:3},[o("button",{onClick:a=>j.updateUser(e.row)},"Save",8,U),o("button",{onClick:a=>j.deleteUser(e.row)},"Delete",8,b)],64)):(n(),a("span",v,c(e.row[e.column.field]),1))])),_:1},8,["columns","rows"])])}],["__scopeId","data-v-1f54ecb3"]]);export{k as default};
