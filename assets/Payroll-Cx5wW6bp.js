import{_ as D,r as d,n as S,o as I,c as o,a as s,b as L,v as N,q as R,F as _,j as y,t as l,p as b,A as f,g as n,z as k}from"./index-s9AIh73n.js";const $={class:"container-global"},B={class:"card shadow-sm mb-4 no-print"},j={class:"card-body"},A={class:"row g-3"},F={class:"col-md-4"},M={class:"row"},z={class:"col-md-4"},T={class:"card shadow-sm"},V={class:"card-body p-0"},H={key:0,class:"text-center py-5"},U={key:1,class:"list-group list-group-flush"},q=["onClick"],G={class:"d-flex justify-content-between align-items-center"},K={class:"badge bg-secondary"},J={key:0,class:"list-group-item text-center text-muted py-3"},O={class:"col-md-8"},Q={key:0,class:"card shadow-sm"},W={class:"card-header bg-danger text-white"},X={class:"mb-0"},Y={class:"card-body"},Z={key:0,class:"text-center py-5"},ss={key:1},ts={class:"row mb-4"},es={class:"col-md-6"},ls={class:"info-row"},as={class:"info-value"},os={class:"info-row"},ns={class:"info-value"},is={class:"info-row"},rs={class:"info-value"},ds={class:"col-md-6"},cs={class:"info-row"},us={class:"info-value"},ps={class:"info-row"},ms={class:"info-value"},vs={class:"info-row"},_s={class:"info-value"},ys={class:"table-responsive"},bs={class:"table table-bordered"},fs={class:"table-active"},gs={class:"table-responsive"},hs={class:"table table-bordered"},ws={key:1,class:"card shadow-sm"},ks={__name:"Payroll",setup(xs){const p=d([]),i=d(null),g=d([]),h=d([]),m=d(!0),v=d(!1),u=d(""),w=S(()=>{if(!u.value)return p.value;const a=u.value.toLowerCase();return p.value.filter(t=>t.name.toLowerCase().includes(a)||t.username.toLowerCase().includes(a))}),x=async()=>{try{m.value=!0;const a=localStorage.getItem("token"),t=await b.get(`${f}/users`,{headers:{Authorization:`Bearer ${a}`}});p.value=t.data}catch(a){console.error("Error fetching employees:",a),alert("Gagal memuat data karyawan. Silakan login kembali.")}finally{m.value=!1}},P=()=>{},E=async a=>{i.value=a,v.value=!0;try{const t=await b.get(`${f}/payroll?username=${a.username}`);g.value=t.data.components||[];const e=await b.get(`${f}/payroll/history?username=${a.username}`);h.value=e.data||[]}catch(t){console.error("Error fetching payroll data:",t)}finally{v.value=!1}},r=a=>a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace("IDR","Rp"):"Rp 0",C=a=>({Paid:"success",Pending:"warning",Rejected:"danger",Processing:"info"})[a]||"secondary";return I(()=>{x()}),(a,t)=>(n(),o("div",$,[t[17]||(t[17]=s("div",{class:"d-flex justify-content-between align-items-center mb-4"},[s("h2",{class:"fw-bold"},"Employee Payroll")],-1)),s("div",B,[s("div",j,[s("div",A,[s("div",F,[t[1]||(t[1]=s("label",{class:"form-label"},"Employee Name",-1)),L(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",class:"form-control",placeholder:"Search by name...",onInput:P},null,544),[[N,u.value]])])])])]),s("div",M,[s("div",z,[s("div",T,[t[3]||(t[3]=s("div",{class:"card-header bg-danger text-white"},[s("h5",{class:"mb-0"},"Employee List")],-1)),s("div",V,[m.value?(n(),o("div",H,t[2]||(t[2]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)]))):(n(),o("ul",U,[(n(!0),o(_,null,y(w.value,e=>{var c;return n(),o("li",{key:e.username,class:k(["list-group-item list-group-item-action",{active:((c=i.value)==null?void 0:c.username)===e.username}]),onClick:Ps=>E(e)},[s("div",G,[s("span",null,l(e.name),1),s("span",K,l(e.username),1)])],10,q)}),128)),w.value.length===0?(n(),o("li",J," No employees found ")):R("",!0)]))])])]),s("div",O,[i.value?(n(),o("div",Q,[s("div",W,[s("h5",X,"Payroll Details - "+l(i.value.name),1)]),s("div",Y,[v.value?(n(),o("div",Z,t[4]||(t[4]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)]))):(n(),o("div",ss,[s("div",ts,[s("div",es,[s("div",ls,[t[5]||(t[5]=s("span",{class:"info-label"},"NIK",-1)),s("span",as,l(i.value.username),1)]),s("div",os,[t[6]||(t[6]=s("span",{class:"info-label"},"Name",-1)),s("span",ns,l(i.value.name),1)]),s("div",is,[t[7]||(t[7]=s("span",{class:"info-label"},"Department",-1)),s("span",rs,l(i.value.department||"-"),1)])]),s("div",ds,[s("div",cs,[t[8]||(t[8]=s("span",{class:"info-label"},"Position",-1)),s("span",us,l(i.value.jabatan||"-"),1)]),s("div",ps,[t[9]||(t[9]=s("span",{class:"info-label"},"Employment Status",-1)),s("span",ms,l(i.value.kepegawaian||"-"),1)]),s("div",vs,[t[10]||(t[10]=s("span",{class:"info-label"},"Basic Salary",-1)),s("span",_s,l(r(i.value.gaji_pokok)||"-"),1)])])]),s("div",ys,[s("table",bs,[t[13]||(t[13]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Component"),s("th",null,"Amount"),s("th",null,"Description")])],-1)),s("tbody",null,[(n(!0),o(_,null,y(g.value,(e,c)=>(n(),o("tr",{key:c},[s("td",null,l(e.name),1),s("td",null,l(r(e.amount)),1),s("td",null,l(e.description||"-"),1)]))),128)),s("tr",fs,[t[11]||(t[11]=s("td",null,[s("strong",null,"Total")],-1)),s("td",null,[s("strong",null,l(r(a.totalPayroll)),1)]),t[12]||(t[12]=s("td",null,null,-1))])])])]),t[15]||(t[15]=s("h5",{class:"mt-4 mb-3"},"Payroll History",-1)),s("div",gs,[s("table",hs,[t[14]||(t[14]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Period"),s("th",null,"Basic Salary"),s("th",null,"Allowances"),s("th",null,"Deductions"),s("th",null,"Net Pay"),s("th",null,"Status")])],-1)),s("tbody",null,[(n(!0),o(_,null,y(h.value,(e,c)=>(n(),o("tr",{key:c},[s("td",null,l(e.period),1),s("td",null,l(r(e.basic_salary)),1),s("td",null,l(r(e.allowances)),1),s("td",null,l(r(e.deductions)),1),s("td",null,l(r(e.net_pay)),1),s("td",null,[s("span",{class:k(`badge bg-${C(e.status)}`)},l(e.status),3)])]))),128))])])])]))])])):(n(),o("div",ws,t[16]||(t[16]=[s("div",{class:"card-body text-center py-5"},[s("i",{class:"fas fa-user-circle fa-4x text-muted mb-3"}),s("p",{class:"text-muted"},"Please select an employee to view payroll details")],-1)])))])])]))}},Cs=D(ks,[["__scopeId","data-v-0e230424"]]);export{Cs as default};
