import"./vue-multiselect-BP3t2qwR.js";import{_ as A,u as I,r as e,A as u,o as U,s as k,c as n,m as d,a as s,l as B,h as N,t as S,F as H,j as R,d as w,q as T,g as i,x as E}from"./index-6LNjClDC.js";/* empty css                            *//* empty css                                                 */import{C as x}from"./Charts-CXLe0-GO.js";const F={key:0,class:"container-local mb-2"},M={class:"d-flex justify-content-between align-items-center mb-2 mt-auto"},O={class:"text-end"},$={class:"nav nav-tabs"},V=["onClick"],P={key:0,class:"row g-4 mb-4"},j={key:0,class:"col-md-12"},L={class:"card h-100"},z={key:1,class:"col-md-12"},W={class:"card h-100"},q={__name:"AbsensiDashboard",setup(G){const r=I();e(null);const v=e(!0);e(null),e(null),e([]),e([]);const _=e(),m=e({title:"Daily Hour Worked",type:"line",api:{url:u+"/chart/absensi_avg_hw",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_worked"]},colors:["red"],labels:["Hour Worked"]}),h=e(),p=e({title:"Daily Hour In Out",type:"line",api:{url:u+"/chart/absensi_avg_hio",params:[14,new Date().toISOString().slice(0,10),"","",""]},columns:{label:["formatted_date"],datas:["avg_hour_in_decimal","avg_hour_out_decimal"],extras:["avg_hour_in","avg_hour_out"]},colors:["green","red"],labels:["Hour In","Hour Out"]});async function D(){try{const a=await T.get(`${u}/get/myname`,{params:[r.username]});console.log("UPDATE NAME : ",a.data[0]),m.value.api.params[2]=a.data[0],p.value.api.params[2]=a.data[0]}catch(a){console.error("Failed to load name:",a)}}const b=e();function f(){const a=new Date,t=a.getHours().toString().padStart(2,"0"),o=a.getMinutes().toString().padStart(2,"0"),c=a.getSeconds().toString().padStart(2,"0");b.value=`${t}:${o}:${c}`}U(async()=>{var a,t;f(),setInterval(f,1e3),await D(),await k(),await k(),await Promise.all([(a=_.value)==null?void 0:a.renderChart(),(t=h.value)==null?void 0:t.renderChart()]),v.value=!1});const l=e(""),C=[{label:"All",value:""},{label:"Daily Trend",value:"0"},{label:"Coming Soon",value:"1"}];return e({title:"",styleClass:"",size:[10,30,100]}),e({firstCol:{label:"USERNAME",field:"username",type:"type",width:100},priority:["status","name","department","jabatan","hour_in","hour_out"],unpriority:["lastUpdated"],hidden:["tanggal","rn","created_at"],toRemove:["id"],exclude:[],uneditable:[],checkbox:["spare_exists"],date:[],datetime:[],status:{field:"status",calculate:a=>{var g,y;const t=new Date().toISOString().slice(0,10),o=(g=a.hour_in)==null?void 0:g.slice(0,10),c=(y=a.hour_out)==null?void 0:y.slice(0,10);return o!==t&&c!==t?"Tidak Hadir":a.hour_out==null?"Masuk":"Pulang"}}}),e({data:`${r.apiBaseUrl}/absensi-latest`,dropdowns:{vehicle_type:{url:r.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:r.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:r.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),(a,t)=>v.value?d("",!0):(i(),n("div",F,[s("div",M,[t[0]||(t[0]=s("h1",{class:"h3 fw-bold mb-0"},[s("i",{class:"bi bi-people-fill me-2"}),N(" Absensi Dashboard ")],-1)),s("div",O,[s("div",null,S(b.value),1)])]),t[1]||(t[1]=B('<div class="row text-center mb-2 mt-4" data-v-70fa61b3><div class="col" data-v-70fa61b3><div class="card border-success" data-v-70fa61b3><div class="card-body" data-v-70fa61b3><h3 class="text-success" data-v-70fa61b3>0</h3><p class="fw-bold mb-0" data-v-70fa61b3>Coming Soon</p></div></div></div><div class="col" data-v-70fa61b3><div class="card border-danger" data-v-70fa61b3><div class="card-body" data-v-70fa61b3><h3 class="text-success" data-v-70fa61b3>0</h3><p class="fw-bold mb-0" data-v-70fa61b3>Coming Soon</p></div></div></div></div>',1)),s("ul",$,[(i(),n(H,null,R(C,o=>s("li",{class:"nav-item",key:o.value},[s("button",{class:E(["nav-link",{active:l.value===o.value}]),onClick:c=>l.value=o.value},S(o.label),11,V)])),64))]),l.value===""||["0","1","2","3"].includes(l.value)?(i(),n("div",P,[l.value===""||l.value==="0"?(i(),n("div",j,[s("div",L,[w(x,{ref_key:"chartRef1",ref:_,settings:m.value},null,8,["settings"])])])):d("",!0),l.value===""||l.value==="0"?(i(),n("div",z,[s("div",W,[w(x,{ref_key:"chartRef2",ref:h,settings:p.value},null,8,["settings"])])])):d("",!0)])):d("",!0)]))}},Z=A(q,[["__scopeId","data-v-70fa61b3"]]);export{Z as default};
