import{_ as a,c as l,a as n,i,j as e,b as s,k as t,F as o,l as c,h as d,t as p,r,o as u,g as m}from"./index-xqrjemxG.js";import{_ as v}from"./eid-CUa9Qr1a.js";const f={class:"app-container"},g={class:"main-content"},h={class:"attendance-card"},b={class:"form-group"},k=["value"],y={class:"action-group"},L=["disabled"],M={key:0,class:"confirmation-message"},w={class:"info-section"},U={class:"info-card"},x={class:"info-content"},I={class:"info-row"},P={class:"info-value"},j={class:"info-row"},S={class:"info-value"},$=["src"],A={class:"info-card"},B={class:"info-content"},G={class:"info-row"},H={class:"info-value"},z={class:"info-row"},C={class:"info-value"},F={class:"info-row"},R={class:"info-value"},T={class:"info-row"},D={class:"info-value"},J=["src"];const K=a({setup(){const a=r({ipv4:"Mengambil data...",ipv6:"Mengambil data..."}),l=r({lat:"Mengambil data...",lon:"Mengambil data..."}),n=r({city:"Mengambil data...",country:"Mengambil data...",lat:"",lon:""}),i=r(""),e=r(""),s=r(!1),t=r(""),o=r(["HO Balikpapan","HUB Sanga-sanga","HUB Melak","HUB Sangata","HUB Berau"]);return u((()=>{(async()=>{try{const l=await fetch("https://api.ipify.org?format=json"),n=await l.json();a.value.ipv4=n.ip;const i=await fetch("https://api64.ipify.org?format=json"),e=await i.json();a.value.ipv6=e.ip}catch(l){a.value.ipv4="Gagal memuat",a.value.ipv6="Gagal memuat"}})(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((a=>{l.value.lat=a.coords.latitude.toFixed(6),l.value.lon=a.coords.longitude.toFixed(6),i.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${l.value.lon},${l.value.lat}&size=450,300&z=12&l=map&pt=${l.value.lon},${l.value.lat},pm2rdm`}),(a=>{l.value.lat="Izin ditolak",l.value.lon="Izin ditolak"})):(l.value.lat="Tidak didukung",l.value.lon="Tidak didukung"),(async()=>{try{const a=await fetch("http://ip-api.com/json/"),l=await a.json();n.value={city:l.city||"Tidak diketahui",country:l.country||"Tidak diketahui",lat:l.lat?l.lat.toFixed(6):"",lon:l.lon?l.lon.toFixed(6):""},l.lon&&l.lat&&(e.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${l.lon},${l.lat}&size=450,300&z=12&l=map&pt=${l.lon},${l.lat},pm2rdm`)}catch(a){n.value.city="Gagal memuat",n.value.country="Gagal memuat"}})()})),{ipData:a,gpsLocation:l,ipLocation:n,gpsMapUrl:i,ipMapUrl:e,attendanceRecorded:s,selectedLocation:t,locations:o}},methods:{openCamera(){this.selectedLocation?document.getElementById("cameraInput").click():alert("Silakan pilih lokasi absen terlebih dahulu!")},handlePhoto(a){a.target.files[0]&&(this.attendanceRecorded=!0,setTimeout((()=>{this.attendanceRecorded=!1}),5e3))}}},[["render",function(a,r,u,K,_,E){return m(),l("div",f,[n("main",g,[r[15]||(r[15]=n("h1",{class:"app-title"},"Absensi Karyawan",-1)),r[16]||(r[16]=n("p",{class:"app-subtitle"},null,-1)),n("div",h,[n("div",b,[r[4]||(r[4]=n("label",{for:"location",class:"form-label"},"Lokasi Absensi",-1)),s(n("select",{"onUpdate:modelValue":r[0]||(r[0]=a=>K.selectedLocation=a),id:"location",class:"form-select"},[r[3]||(r[3]=n("option",{value:"",disabled:"",selected:""},"Pilih lokasi Anda",-1)),(m(!0),l(o,null,c(K.locations,((a,n)=>(m(),l("option",{key:n,value:a},p(a),9,k)))),128))],512),[[t,K.selectedLocation]])]),n("div",y,[n("input",{type:"file",accept:"image/*",capture:"environment",onChange:r[1]||(r[1]=(...a)=>E.handlePhoto&&E.handlePhoto(...a)),id:"cameraInput",class:"hidden-input"},null,32),n("button",{onClick:r[2]||(r[2]=(...a)=>E.openCamera&&E.openCamera(...a)),class:"primary-btn",disabled:!K.selectedLocation},r[5]||(r[5]=[n("i",{class:"fa-solid fa-camera"},null,-1),d(" Absen Sekarang ")]),8,L)]),K.attendanceRecorded?(m(),l("div",M,r[6]||(r[6]=[n("i",{class:"fa-solid fa-check-circle success-icon"},null,-1),n("span",null,"Absensi berhasil direkam!",-1)]))):e("",!0)]),r[17]||(r[17]=i('<div class="announcement-card"><div class="announcement-header"><i class="fa-solid fa-bullhorn announcement-icon"></i><h3>TRJA Memo</h3></div><div class="announcement-content"><img src="'+v+'" alt="Gambar Lebaran" class="announcement-image"><p class="announcement-text">Selamat Hari Raya Idul Fitri 1445 H</p></div></div>',1)),n("div",w,[n("div",U,[r[9]||(r[9]=n("div",{class:"info-header"},[n("i",{class:"fa-solid fa-map-marker-alt"}),n("h4",null,"Lokasi GPS Anda")],-1)),n("div",x,[n("div",I,[r[7]||(r[7]=n("span",{class:"info-label"},"Latitude:",-1)),n("span",P,p(K.gpsLocation.lat),1)]),n("div",j,[r[8]||(r[8]=n("span",{class:"info-label"},"Longitude:",-1)),n("span",S,p(K.gpsLocation.lon),1)]),K.gpsMapUrl?(m(),l("img",{key:0,src:K.gpsMapUrl,alt:"GPS Map",class:"map-image"},null,8,$)):e("",!0)])]),n("div",A,[r[14]||(r[14]=n("div",{class:"info-header"},[n("i",{class:"fa-solid fa-network-wired"}),n("h4",null,"Informasi Jaringan")],-1)),n("div",B,[n("div",G,[r[10]||(r[10]=n("span",{class:"info-label"},"IPv4:",-1)),n("span",H,p(K.ipData.ipv4),1)]),n("div",z,[r[11]||(r[11]=n("span",{class:"info-label"},"IPv6:",-1)),n("span",C,p(K.ipData.ipv6),1)]),n("div",F,[r[12]||(r[12]=n("span",{class:"info-label"},"Kota:",-1)),n("span",R,p(K.ipLocation.city),1)]),n("div",T,[r[13]||(r[13]=n("span",{class:"info-label"},"Negara:",-1)),n("span",D,p(K.ipLocation.country),1)]),K.ipMapUrl?(m(),l("img",{key:0,src:K.ipMapUrl,alt:"IP Map",class:"map-image"},null,8,J)):e("",!0)])])])])])}]]);export{K as default};
