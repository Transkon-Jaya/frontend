import{s as z}from"./vue-multiselect-B7CE90sk.js";import{_ as H,k as s,u as O,A as c,D as M,g as G,E as K,c as r,i as d,a as e,b as u,y as J,t as v,j as x,F as Q,e as W,w as X,G as Y,n as I,z as Z,o as i,x as ee}from"./index-7wM4hRU9.js";import{C as y}from"./Charts-DaPKirg8.js";import{R as te}from"./RouterLink-O5L8a1yf.js";import{_ as ae}from"./BigTable-Clijzz7B.js";/* empty css                                                                   */import"./xlsx-DL9pYftt.js";const se={key:0},le={class:"mb-2"},oe={class:"text-end"},ne={class:"row text-center mb-4"},re={class:"col"},ie={class:"card border-success"},de={class:"card-body"},ue={class:"text-success"},ce={class:"col"},ve={class:"card border-danger"},_e={class:"card-body"},me={class:"text-danger",style:{"text-align":"center"}},pe={style:{"margin-right":"10px"}},ye={style:{"margin-left":"10px"}},he={class:"col"},ge={class:"card border-warning"},be={class:"card-body"},fe={class:"text-warning",style:{"text-align":"center"}},we={style:{"margin-right":"10px"}},ke={style:{"margin-left":"10px"}},xe={class:"nav nav-tabs"},De=["onClick"],Se={key:1,class:"card mb-4"},Ce={class:"card-body"},Ue={key:2,class:"row g-4 mb-4"},Te={key:0,class:"col-md-12"},Be={class:"card h-100"},Ae={key:1,class:"col-md-12"},Fe={class:"card h-100"},Ie={key:2,class:"col-md-12"},Re={class:"card h-100"},Ve={key:3,class:"col-md-12"},Ee={class:"card h-100"},Le={key:4,class:"col-md-12"},$e={class:"card h-100"},Ne={__name:"DeDashboardCustomer",setup(Pe){const R=s(null),h=O(),g=s(""),o=s(""),b=s([]),D=s(!0),f=s({title:"Daily Trend",type:"bar",api:{url:c+"/chart/de_running_total",params:[14,o.value,""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),w=s({title:"Daily Trend",type:"line",api:{url:c+"/chart/de_running_total",params:[14,o.value,""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),S=s({title:"Unit Summary",type:"pie",api:{url:c+"/chart/de_total_rental",params:[o.value,""]},columns:{datas:["unit_rental","spare_exists_false","spare_exists_true"]},colors:["green","red","orange"],labels:["Unit Rental","PA Unit","PA Rental"]}),V=s({title:"Customer Summary",type:"bar",api:{url:c+"/chart/de_customer_summary"},columns:{label:["customer"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),E=s({title:"Location Summary",type:"bar",api:{url:c+"/chart/de_location_summary"},columns:{label:["alt_location"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),L=s({title:""}),$=s({firstCol:{label:"TK NO",field:"tk_no",type:"type"},merge:[{fields:["hour_in","hour_out"],to:"hour"},{fields:["jarak_in","jarak_out"],to:"jarak"}],priority:["customer","alt_location"],unpriority:["username","createdAt","lastUpdated"],hidden:["id","done"],toRemove:["vehicle_type","plate_no"],uneditable:["id","plan_hub"],checkbox:["spare_exists"],date:[],datetime:["down_since","estimated_return"]}),N=s({data:`${h.apiBaseUrl}/down_equipment`,dropdowns:{vehicle_type:{url:h.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:h.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:h.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),l=s(""),P=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],j=async()=>{try{const a=await I.get(c+"/dropdowns/customer");b.value=a.data.map(t=>({label:t,value:t}))}catch(a){console.error("Error fetching dropdown data:",a)}},C=s(),U=s(),q=async a=>{console.log(a),g.value=a,o.value=g.value.value,f.value.api.params[1]=o.value,w.value.api.params[1]=o.value,await C.value.renderChart(),await U.value.renderChart(),await k(),await Z()},p=s([0,0]),_=s([0,0]),m=s([0,0]),T=s("");function B(){const a=new Date,t=a.getHours().toString().padStart(2,"0"),n=a.getMinutes().toString().padStart(2,"0"),F=a.getSeconds().toString().padStart(2,"0");T.value=`${t}:${n}:${F}`}const k=async()=>{try{const a=await I.get(c+"/chart/de_total_rental",{params:{params:[o.value,""]}}),t=a.data[0].unit_rental+a.data[0].spare_exists_false+a.data[0].spare_exists_true;p.value[0]=a.data[0].unit_rental,_.value[0]=a.data[0].spare_exists_false+a.data[0].spare_exists_true,m.value[0]=a.data[0].spare_exists_true,t===0?(p.value[1]=0,_.value[1]=0,m.value[1]=0):(p.value[1]=(p.value[0]/t*100).toFixed(2),_.value[1]=(_.value[0]/t*100).toFixed(2),m.value[1]=(m.value[0]/t*100).toFixed(2))}catch(a){console.error("Fetch error:",a)}};M(o.value,async()=>{console.log("selectedItems : ",o.value),f.value.api.params[1]=o.value,w.value.api.params[1]=o.value,S.value.api.params[0]=o.value,await k()});let A;return G(async()=>{await j(),await k(),D.value=!1,console.log("dropdown : ",b.value),B(),A=setInterval(B,1e3)}),K(()=>{clearInterval(A)}),(a,t)=>(i(),r("div",{class:"content",style:Y({paddingTop:a.showHeader?"100px":"0px"})},[D.value?d("",!0):(i(),r("div",se,[t[2]||(t[2]=e("label",{for:"dropdown",class:"form-label"},"Select Customer",-1)),u(J(z),{modelValue:g.value,"onUpdate:modelValue":[t[0]||(t[0]=n=>g.value=n),t[1]||(t[1]=n=>q(n))],options:b.value||[],placeholder:"Select Customer",label:"label","track-by":"value",class:"multiselect no-border"},null,8,["modelValue","options"])])),e("div",le,[t[9]||(t[9]=e("h1",{class:"h4 fw-bold"},"Down Equipment Dashboard",-1)),e("div",oe,[t[3]||(t[3]=e("h5",{class:"fw-bold text-primary"},null,-1)),e("div",null,v(T.value),1)]),e("div",ne,[e("div",re,[e("div",ie,[e("div",de,[e("h3",ue,v(p.value[0]),1),t[4]||(t[4]=e("p",{class:"fw-bold mb-0"},"On Hire (UIC)",-1))])])]),e("div",ce,[e("div",ve,[e("div",_e,[e("h3",me,[e("span",pe,v(_.value[1])+"%",1),t[5]||(t[5]=x(" || ")),e("span",ye,v(_.value[0]),1)]),t[6]||(t[6]=e("p",{class:"fw-bold mb-0"},"PA Unit",-1))])])]),e("div",he,[e("div",ge,[e("div",be,[e("h3",fe,[e("span",we,v(m.value[1])+"%",1),t[7]||(t[7]=x(" || ")),e("span",ke,v(m.value[0]),1)]),t[8]||(t[8]=e("p",{class:"fw-bold mb-0"},"PA Rental",-1))])])])])]),e("ul",xe,[(i(),r(Q,null,W(P,n=>e("li",{class:"nav-item",key:n.value},[e("button",{class:ee(["nav-link",{active:l.value===n.value}]),onClick:F=>l.value=n.value},v(n.label),11,De)])),64))]),l.value===""||l.value==="site-summary"?(i(),r("div",Se,[e("div",Ce,[t[10]||(t[10]=e("h5",{class:"card-title text-danger"},"Site Summary",-1)),u(ae,{ref_key:"bigTableRef",ref:R,settings:L.value,urls:N.value,fields:$.value,canInsert:!1,canUpdate:!1},null,8,["settings","urls","fields"])])])):d("",!0),l.value===""||["0","1","2","3"].includes(l.value)?(i(),r("div",Ue,[l.value===""||l.value==="0"?(i(),r("div",Te,[e("div",Be,[u(y,{ref_key:"chart1",ref:C,settings:f.value},null,8,["settings"])])])):d("",!0),l.value===""||l.value==="0"?(i(),r("div",Ae,[e("div",Fe,[u(y,{ref_key:"chart11",ref:U,settings:w.value},null,8,["settings"])])])):d("",!0),l.value===""||l.value==="1"?(i(),r("div",Ie,[e("div",Re,[u(y,{settings:S.value},null,8,["settings"])])])):d("",!0),l.value===""||l.value==="2"?(i(),r("div",Ve,[e("div",Ee,[u(y,{settings:V.value},null,8,["settings"])])])):d("",!0),l.value===""||l.value==="3"?(i(),r("div",Le,[e("div",$e,[u(y,{settings:E.value},null,8,["settings"])])])):d("",!0)])):d("",!0),e("div",null,[u(te,{to:"/de/down-equipment",color:"danger",size:"md"},{default:X(()=>t[11]||(t[11]=[x("Back to Down Equipment")])),_:1})])],4))}},Ke=H(Ne,[["__scopeId","data-v-c913c691"]]);export{Ke as default};
