{"version":3,"file":"DownEquipment-DH0AEIOK.js","sources":["../../src/views/de/DownEquipment.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport BigTable from \"@/components/BigTable.vue\";\r\nimport MiniTable from \"@/components/MiniTable.vue\";\r\nimport RouterLink from \"@/components/RouterLink.vue\"\r\n\r\nimport { useUserStore } from \"@/stores/user.js\";\r\nconst userData = useUserStore();\r\n\r\n// Status Count & Waktu\r\nconst workingCount = ref(0);\r\nconst smDownCount = ref(0);\r\nconst umDownCount = ref(0);\r\nconst currentTime = ref('');\r\n\r\n// Update jam\r\nfunction updateClock() {\r\n  const now = new Date();\r\n  const hours = now.getHours().toString().padStart(2, \"0\");\r\n  const minutes = now.getMinutes().toString().padStart(2, \"0\");\r\n  const seconds = now.getSeconds().toString().padStart(2, \"0\");\r\n  currentTime.value = `${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\n// Settings Table\r\nconst settings = ref({\r\n  title: \"Down Equipment\",\r\n  size: [10,20,100] //Multiplier, Addition, Minimum\r\n});\r\n\r\nconst formData = ref({});\r\n\r\nconst fields = ref({\r\n  firstCol: {label: \"TK NO\", field: \"tk_no\", type: \"type\"},\r\n  priority: [\"customer\", \"alt_location\"],\r\n  unpriority: [\"username\", \"createdAt\", \"lastUpdated\"],\r\n  hidden: [],\r\n  toRemove: [\"id\"],\r\n  exclude: [],\r\n  uneditable: [],\r\n  checkbox: [\"spare_exists\"],\r\n  date: [],\r\n  datetime: []\r\n});\r\n\r\nconst urls = ref({\r\n  data: `${userData.apiBaseUrl}/de_site`,\r\n  dropdowns: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    },\r\n    tk_no: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/tk_no\",\r\n      valueField: \"tk_no\",\r\n      column: \"tk_no\"\r\n    },\r\n  },\r\n  get: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/get/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    }\r\n  }\r\n});\r\n\r\nconst fetchTotal = async () => {\r\ntry {\r\n  const response = await axios.get(userData.apiBaseUrl + \"/get/total_rental\");\r\n  workingCount.value = response.data[0];\r\n  smDownCount.value = response.data.length >= 3 ? response.data[1] + response.data[2] : 0;\r\n  umDownCount.value = response.data.length >= 3 ? response.data[2] : 0;\r\n  workingCount.value -= smDownCount.value;\r\n  workingCount.value -= umDownCount.value;\r\n} catch (error) {\r\n  console.error(\"Fetch error:\", error);\r\n}\r\n// console.log(\"CHECKBOX \", isCheckbox(\"spare_exists\"));\r\n};\r\n// Lifecycle\r\nonMounted(() => {\r\n  // Inisialisasi form kosong\r\n  fetchTotal();\r\n  \r\n  // Mulai jam berjalan\r\n  updateClock();\r\n  setInterval(updateClock, 1000);\r\n});\r\n\r\n// Debug log\r\nconsole.log(\"User Data\");\r\nconsole.log(userData.level);\r\nconsole.log(userData.permissions);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <!-- Header -->\r\n    <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n      <h4 class=\"fw-bold\">TRANSKON - Down Equipment</h4>\r\n      <div class=\"text-end\">\r\n        <h5 class=\"fw-bold text-primary\"></h5>\r\n        <div>{{ currentTime }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Work Group \r\n    <div class=\"mb-3\">\r\n      <label class=\"form-label fw-bold\">Work Group</label>\r\n      <select class=\"form-select w-auto\">\r\n        <option>all</option>\r\n        <option>Pama</option>\r\n        <option>THies</option>\r\n        <option>Customer</option>\r\n      </select>\r\n    </div> -->\r\n\r\n    <!-- Status Cards -->\r\n    <div class=\"row text-center mb-4\">\r\n      <div class=\"col\">\r\n        <div class=\"card border-success\">\r\n          <div class=\"card-body\">\r\n            <h3 class=\"text-success\">{{ workingCount }}</h3>\r\n            <p class=\"fw-bold mb-0\">On Hire (UIC)</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col\">\r\n        <div class=\"card border-danger\">\r\n          <div class=\"card-body\">\r\n            <h3 class=\"text-danger\">{{ smDownCount }}</h3>\r\n            <p class=\"fw-bold mb-0\">Total Unit Down</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col\">\r\n        <div class=\"card border-warning\">\r\n          <div class=\"card-body\">\r\n            <h3 class=\"text-warning\">{{ umDownCount }}</h3>\r\n            <p class=\"fw-bold mb-0\">PA Rental</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Equipment Table -->\r\n    <!-- <div class=\"table-responsive\">\r\n      <MiniTable \r\n          :settings=\"settings\"\r\n          :urls=\"urls\" \r\n          :fields=\"fields\" \r\n          :canInsert=\"false\"\r\n          :canUpload=\"false\"\r\n        />\r\n    </div> -->\r\n      <BigTable\r\n        :settings=\"settings\"\r\n        :urls=\"urls\"\r\n        :fields=\"fields\"\r\n        :canInsert=\"false\"\r\n        :canUpdate=\"false\"\r\n        ></BigTable>\r\n    <!-- <div>\r\n      <router-link to=\"/de/dashboard\" class=\"btn btn-danger mt-3\">Back to Dashboard</router-link>\r\n    </div> -->\r\n  \r\n  <div class=\"mb-4\">\r\n    <router-link to=\"/de/dashboard\" class=\"btn btn-danger mt-3\">Go to Dashboard</router-link>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n\r\n<style scoped>\r\n.border-success {\r\n  border: 2px solid #198754 !important; /* Bootstrap green */\r\n}\r\n.border-danger {\r\n  border: 2px solid #dc3545 !important; /* Bootstrap red */\r\n}\r\n.border-warning {\r\n  border: 2px solid #ffc107 !important; /* Bootstrap yellow */\r\n}\r\n.card h3 {\r\n  font-size: 28px;\r\n}\r\n</style>\r\n\r\n"],"names":["userData","useUserStore","workingCount","ref","smDownCount","umDownCount","currentTime","updateClock","now","Date","hours","getHours","toString","padStart","minutes","getMinutes","seconds","getSeconds","value","settings","title","size","fields","firstCol","label","field","type","priority","unpriority","hidden","toRemove","exclude","uneditable","checkbox","date","datetime","urls","data","apiBaseUrl","dropdowns","vehicle_type","url","valueField","column","tk_no","get","onMounted","async","response","axios","length","error","setInterval"],"mappings":"05BAQA,MAAMA,EAAWC,IAGXC,EAAeC,EAAI,GACnBC,EAAcD,EAAI,GAClBE,EAAcF,EAAI,GAClBG,EAAcH,EAAI,IAGxB,SAASI,IACD,MAAAC,MAAUC,KACVC,EAAQF,EAAIG,WAAWC,WAAWC,SAAS,EAAG,KAC9CC,EAAUN,EAAIO,aAAaH,WAAWC,SAAS,EAAG,KAClDG,EAAUR,EAAIS,aAAaL,WAAWC,SAAS,EAAG,KACxDP,EAAYY,MAAQ,GAAGR,KAASI,KAAWE,GAC7C,CAGA,MAAMG,EAAWhB,EAAI,CACnBiB,MAAO,iBACPC,KAAM,CAAC,GAAG,GAAG,OAGElB,EAAI,IAErB,MAAMmB,EAASnB,EAAI,CACjBoB,SAAU,CAACC,MAAO,QAASC,MAAO,QAASC,KAAM,QACjDC,SAAU,CAAC,WAAY,gBACvBC,WAAY,CAAC,WAAY,YAAa,eACtCC,OAAQ,GACRC,SAAU,CAAC,MACXC,QAAS,GACTC,WAAY,GACZC,SAAU,CAAC,gBACXC,KAAM,GACNC,SAAU,KAGNC,EAAOjC,EAAI,CACfkC,KAAM,GAAGrC,EAASsC,qBAClBC,UAAW,CACTC,aAAc,CACZC,IAAKzC,EAASsC,WAAa,0BAC3BI,WAAY,eACZC,OAAQ,gBAEVC,MAAO,CACLH,IAAKzC,EAASsC,WAAa,mBAC3BI,WAAY,QACZC,OAAQ,UAGZE,IAAK,CACHL,aAAc,CACZC,IAAKzC,EAASsC,WAAa,oBAC3BI,WAAY,eACZC,OAAQ,0BAmBdG,GAAU,KAdSC,WACf,IACF,MAAMC,QAAiBC,EAAMJ,IAAI7C,EAASsC,WAAa,qBAC1CpC,EAAAgB,MAAQ8B,EAASX,KAAK,GACnCjC,EAAYc,MAAQ8B,EAASX,KAAKa,QAAU,EAAIF,EAASX,KAAK,GAAKW,EAASX,KAAK,GAAK,EAC1EhC,EAAAa,MAAQ8B,EAASX,KAAKa,QAAU,EAAIF,EAASX,KAAK,GAAK,EACnEnC,EAAagB,OAASd,EAAYc,MAClChB,EAAagB,OAASb,EAAYa,KACpC,OAASiC,GAET,UAUEC,YAAY7C,EAAa,IAAI"}