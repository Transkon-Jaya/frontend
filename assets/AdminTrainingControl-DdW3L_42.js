import{_ as S,c as o,a as t,q as v,b as d,k as L,v as h,F as c,j as f,t as g,g as r,h as b,e as M,z as w}from"./index-B_uv-FNL.js";const T={name:"AdminTrainingControl",data(){return{selectedLevel:"newbie",trainingTitle:"",timeLimit:900,questionsText:"",previewMode:!1,previewQuestions:[],schedule:[{name:"Senin",active:!1,time:"09:00"},{name:"Selasa",active:!1,time:"09:00"},{name:"Rabu",active:!1,time:"09:00"},{name:"Kamis",active:!1,time:"09:00"},{name:"Jumat",active:!1,time:"09:00"},{name:"Sabtu",active:!1,time:"09:00"},{name:"Minggu",active:!1,time:"09:00"}]}},computed:{storageKeyQuestions(){return`admin_training_questions_${this.selectedLevel}`},storageKeySettings(){return`admin_training_settings_${this.selectedLevel}`}},methods:{formatLevel(s){return{newbie:"Newbie Mechanic",junior:"Junior Mechanic",senior:"Senior Mechanic"}[s]||s},loadLevelSettings(){const s=localStorage.getItem(this.storageKeySettings);if(s){const n=JSON.parse(s);this.trainingTitle=n.title,this.timeLimit=n.timeLimit,this.schedule=n.schedule||this.schedule}else this.resetToDefault();const e=localStorage.getItem(this.storageKeyQuestions);this.questionsText=e||this.getDefaultQuestions(this.selectedLevel).join(`
`)},saveSettings(){if(this.questionsText.split(`
`).map(n=>n.trim()).filter(n=>n).length!==25){alert("Harus tepat 25 soal.");return}const e={title:this.trainingTitle,timeLimit:this.timeLimit,schedule:this.schedule};localStorage.setItem(this.storageKeySettings,JSON.stringify(e)),localStorage.setItem(this.storageKeyQuestions,this.questionsText),this.syncToServer(),alert(`Pengaturan untuk ${this.formatLevel(this.selectedLevel)} berhasil disimpan!`)},syncToServer(){const s=localStorage.getItem("token");fetch("/api/training/admin-save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({level:this.selectedLevel,settings:{title:this.trainingTitle,timeLimit:this.timeLimit,schedule:this.schedule},questions:this.questionsText})})},loadDefault(){const s=this.getDefaultQuestions(this.selectedLevel);this.questionsText=s.join(`
`)},getDefaultQuestions(s){return{newbie:["Apa fungsi utama dari mesin mobil?|Menghasilkan gerak|Menghasilkan listrik|Menyimpan bahan bakar|Mengatur suhu|A","Oli mesin harus diganti setiap berapa bulan?|3 bulan|6 bulan|12 bulan|24 bulan|A"].fill("",25).map((n,m)=>n||`Soal contoh ${m+1}|A|B|C|D|A`),junior:["Apa fungsi timing belt?|Menggerakkan katup|Memutar roda|Menghasilkan listrik|Mengatur bahan bakar|A"].fill("",25).map((n,m)=>n||`Soal junior ${m+1}|A|B|C|D|A`),senior:["Apa arti kode OBD2 P0301?|Misfire silinder 1|Suhu mesin tinggi|Tekanan oli rendah|Sensor O2 error|A"].fill("",25).map((n,m)=>n||`Soal senior ${m+1}|A|B|C|D|A`)}[s]},previewQuestions(){const s=this.questionsText.split(`
`).filter(e=>e.trim());this.previewQuestions=s.map(e=>{const n=e.split("|");return{question:n[0],options:{A:n[1],B:n[2],C:n[3],D:n[4]},answer:n[5]}}),this.previewMode=!0},resetToDefault(){this.trainingTitle=`Pelatihan ${this.formatLevel(this.selectedLevel)}`,this.timeLimit=900,this.schedule.forEach(s=>{s.active=!1,s.time="09:00"})}},mounted(){this.loadLevelSettings()}},A={class:"admin-control-panel"},y={class:"container"},C={class:"form-group"},D={class:"form-group"},x={class:"form-group"},q={class:"form-group"},P={class:"schedule-grid"},j=["onUpdate:modelValue"],Q=["onUpdate:modelValue"],B={class:"form-group"},K={class:"button-group"},V={key:0,class:"preview-modal"},J={class:"preview-content"},N={key:0};function O(s,e,n,m,l,a){return r(),o("div",A,[t("div",y,[e[18]||(e[18]=t("h1",null,"🛠️ Panel Kontrol Pelatihan Mekanik",-1)),e[19]||(e[19]=t("p",null,"Atur soal, waktu, dan jadwal pelatihan untuk setiap level.",-1)),t("div",C,[e[10]||(e[10]=t("label",null,[t("strong",null,"Pilih Level")],-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=i=>l.selectedLevel=i),class:"form-select",onChange:e[1]||(e[1]=(...i)=>a.loadLevelSettings&&a.loadLevelSettings(...i))},e[9]||(e[9]=[t("option",{value:"newbie"},"Newbie Mechanic",-1),t("option",{value:"junior"},"Junior Mechanic",-1),t("option",{value:"senior"},"Senior Mechanic",-1)]),544),[[L,l.selectedLevel]])]),t("div",D,[e[11]||(e[11]=t("label",null,"Judul Pelatihan",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>l.trainingTitle=i),class:"form-input",placeholder:"Contoh: Dasar-Dasar Mesin"},null,512),[[h,l.trainingTitle]])]),t("div",x,[e[12]||(e[12]=t("label",null,"Waktu Pengerjaan (detik)",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>l.timeLimit=i),type:"number",min:"60",max:"3600",class:"form-input"},null,512),[[h,l.timeLimit,void 0,{number:!0}]]),e[13]||(e[13]=t("small",null,"Contoh: 900 detik = 15 menit",-1))]),t("div",q,[e[15]||(e[15]=t("label",null,"Jadwal Pelatihan",-1)),t("div",P,[(r(!0),o(c,null,f(l.schedule,(i,p)=>(r(),o("div",{key:p,class:"schedule-day"},[t("h4",null,g(i.name),1),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":u=>i.active=u},null,8,j),[[M,i.active]]),e[14]||(e[14]=b(" Aktif "))]),i.active?d((r(),o("input",{key:0,type:"time","onUpdate:modelValue":u=>i.time=u,class:"time-input"},null,8,Q)),[[h,i.time]]):v("",!0)]))),128))])]),t("div",B,[e[16]||(e[16]=t("label",null,[t("strong",null,"Soal & Kunci Jawaban (25 soal)")],-1)),e[17]||(e[17]=t("p",null,"Format: Pertanyaan|A|B|C|D|Kunci (A/B/C/D)",-1)),d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=i=>l.questionsText=i),class:"form-textarea",rows:"15",placeholder:`Contoh:\r
Mesin mobil berfungsi untuk?|Menghasilkan gerak|Menghasilkan listrik|Mengatur suhu|Menyimpan bahan bakar|A\r
Oli mesin harus diganti setiap?|3 bulan|6 bulan|1 tahun|2 tahun|A`},null,512),[[h,l.questionsText]])]),t("div",K,[t("button",{onClick:e[5]||(e[5]=(...i)=>a.loadDefault&&a.loadDefault(...i)),class:"btn btn-secondary"},"Muat Soal Default"),t("button",{onClick:e[6]||(e[6]=(...i)=>a.saveSettings&&a.saveSettings(...i)),class:"btn btn-primary"},"💾 Simpan Semua Pengaturan"),t("button",{onClick:e[7]||(e[7]=(...i)=>a.previewQuestions&&a.previewQuestions(...i)),class:"btn btn-info"},"👁️ Pratinjau Soal")]),l.previewMode?(r(),o("div",V,[t("div",J,[t("h3",null,"Pratinjau Soal - "+g(a.formatLevel(l.selectedLevel)),1),(r(!0),o(c,null,f(a.previewQuestions,(i,p)=>(r(),o("div",{key:p,class:"preview-question"},[t("p",null,[t("strong",null,g(p+1)+".",1),b(" "+g(i.question),1)]),t("ul",null,[(r(!0),o(c,null,f(i.options,(u,k)=>(r(),o("li",{class:w({correct:u===i.answer}),key:k},[b(g(k)+". "+g(u)+" ",1),u===i.answer?(r(),o("span",N,"(Kunci)")):v("",!0)],2))),128))])]))),128)),t("button",{onClick:e[8]||(e[8]=i=>l.previewMode=!1),class:"btn btn-secondary"},"Tutup")])])):v("",!0)])])}const I=S(T,[["render",O],["__scopeId","data-v-53bb910f"]]);export{I as default};
