import{_ as M,u as U,z as D,B as V,r as i,p as A,o as N,s as c,c as m,a as o,n as S,b as u,v as p,m as z,d as f,f as v,V as _,A as b,g as x,h as g,x as C}from"./index-D-BFvQlv.js";import{a as E}from"./logger-B1IqVKgO.js";const I={class:"row"},R={class:"col-xl-6 mx-auto"},T={class:"card"},P={class:"card-body p-4"},$={class:"col-md-12"},L={class:"col-md-12"},j={key:0,class:"mt-3"},G=["src"],H={class:"mt-2"},J={class:"col-md-12"},K={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},q={__name:"FormMemo",setup(O){const l=U();D();const h=b+"/perizinan",t=V({no_document:"",description:"",username:""}),n=new FormData,w=i(),d=i(null),r=i(null),y=s=>{const e=s.target.files[0];if(d.value=e,e){const a=new FileReader;a.onload=F=>{r.value=F.target.result},a.readAsDataURL(e)}else r.value=null};A(()=>t.password!==t.confirmPassword),N(async()=>{try{const s=await c.get(h,{headers:{Authorization:`Bearer ${l.token}`},params:{username:l.username}});w.value=s.data[0]}catch(s){console.error("Fetch error:",s)}});const k=()=>{t.no_document="",t.description=""},B=async()=>{try{if(t.no_document==""){alert("No Document Masih Kosong");return}if(!d.value){alert("Upload Memo");return}n.append("username",l.username),n.append("memo",d.value),n.append("description",t.description),n.append("no_document",t.no_document);const s=await c.post(`${b}/tools/memo`,n,{headers:{Authorization:`Bearer ${l.token}`}});await C(),alert("Inserted successfully!"),window.location.reload()}catch(s){E("Submit error:",s),alert("Error updating profile.")}};return(s,e)=>(x(),m("div",I,[o("div",R,[o("div",T,[e[8]||(e[8]=o("div",{class:"card-header px-4 py-3"},[o("h5",{class:"mb-0"},"TRJA Memo Upload")],-1)),o("div",P,[o("form",{onSubmit:S(B,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[o("div",$,[e[3]||(e[3]=o("label",{for:"no_dokument",class:"form-label"},"No Document",-1)),u(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.no_document=a),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,t.no_document]])]),o("div",L,[e[4]||(e[4]=o("label",{for:"photo",class:"form-label"},"Upload Memo",-1)),o("input",{type:"file",class:"form-control",id:"photo",onChange:y,accept:"image/*"},null,32),r.value?(x(),m("div",j,[o("img",{src:r.value,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px","max-height":"200px","object-fit":"contain"}},null,8,G),o("div",H,[o("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:e[1]||(e[1]=()=>{r.value=null,d.value=null,s.document.getElementById("photo").value=""})}," Hapus Gambar ")])])):z("",!0)]),o("div",J,[e[5]||(e[5]=o("label",{for:"text",class:"form-label"},"Description",-1)),u(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.description=a),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,t.description]])]),o("div",K,[f(_,{type:"submit",color:"danger",size:"md",block:!1},{default:v(()=>e[6]||(e[6]=[g(" Submit ")])),_:1}),f(_,{type:"reset",class:"btn btn-secondary",onClick:k},{default:v(()=>e[7]||(e[7]=[g(" Reset ")])),_:1})])],32)])])])]))}},X=M(q,[["__scopeId","data-v-4a22637b"]]);export{X as default};
