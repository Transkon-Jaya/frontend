import{u as a,r as e,c as l,o as s,j as o,a as t,d as r,i as n,k as d,g as i,v as p,l as m,s as u,V as c,b as v,p as f,x as b,y as w,I as h}from"./index-CMxTdo7C.js";const y={class:"row"},P={class:"col-xl-6 mx-auto"},g={class:"card"},x={class:"card-body p-4"},U={class:"col-md-12"},V={class:"col-md-12"},N={class:"col-md-12"},k={class:"col-md-12"},S={class:"col-md-12"},_={class:"col-md-12"},j={class:"col-md-12"},C={class:"col-md-12"},I={key:0,class:"text-danger"},D={class:"col-md-12"},E={key:0,class:"mt-3"},B=["src"],F={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},L="Loading...",R={__name:"ProfileView",setup(R){const q=a(),z=q.apiBaseUrl+"/profile",A=e({name:L,email:L,phone:L,department:L,position:L,username:L,password:"",confirmPassword:""}),G=new FormData,H=e(),J=e(null),K=a=>{J.value=a.target.files[0]},M=l((()=>A.value.password!==A.value.confirmPassword));s((async()=>{try{const a=await o.get(z,{params:{username:q.username}});H.value=a.data[0],O()}catch(a){}}));const O=()=>{A.value.name=H.value.name,A.value.email=H.value.email,A.value.phone=H.value.phone,A.value.department=H.value.department,A.value.position=H.value.jabatan,A.value.username=q.username,A.value.password="",A.value.confirmPassword=""},Q=()=>{O()},T=async()=>{if(!M.value)try{G.append("name",A.value.name),G.append("email",A.value.email),G.append("phone",A.value.phone),G.append("department",A.value.department),G.append("position",A.value.position),G.append("username",A.value.username),A.value.password&&G.append("password",A.value.password),J.value&&G.append("profilePicture",J.value);const a=await o.post(z,G);b("update profile : ",a.data),q.setProfile(a.data.foto),b("user data : ",q.photo),await w(),window.location.reload(),alert("Profile updated successfully!")}catch(a){h("Submit error:",a),alert("Error updating profile.")}};return(a,e)=>(v(),t("div",y,[r("div",P,[r("div",g,[e[19]||(e[19]=r("div",{class:"card-header px-4 py-3"},[r("h5",{class:"mb-0"},"User Settings")],-1)),r("div",x,[r("form",{onSubmit:n(T,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[r("div",U,[e[8]||(e[8]=r("label",{for:"Name",class:"form-label"},"Name",-1)),i(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>A.value.name=a),type:"text",class:"form-control",id:"firstName",disabled:""},null,512),[[p,A.value.name]])]),r("div",V,[e[9]||(e[9]=r("label",{for:"phone",class:"form-label"},"E-mail",-1)),i(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>A.value.email=a),type:"text",class:"form-control",id:"email"},null,512),[[p,A.value.email]])]),r("div",N,[e[10]||(e[10]=r("label",{for:"phone",class:"form-label"},"Phone",-1)),i(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>A.value.phone=a),type:"text",class:"form-control",id:"phone"},null,512),[[p,A.value.phone]])]),r("div",k,[e[11]||(e[11]=r("label",{for:"department",class:"form-label"},"Department",-1)),i(r("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>A.value.department=a),type:"text",class:"form-control",id:"department",disabled:""},null,512),[[p,A.value.department]])]),r("div",S,[e[12]||(e[12]=r("label",{for:"position",class:"form-label"},"Position",-1)),i(r("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>A.value.position=a),type:"text",class:"form-control",id:"position",disabled:""},null,512),[[p,A.value.position]])]),r("div",_,[e[13]||(e[13]=r("label",{for:"userName",class:"form-label"},"User Name",-1)),i(r("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>A.value.username=a),type:"userName",class:"form-control",id:"userName",disabled:""},null,512),[[p,A.value.username]])]),r("div",j,[e[14]||(e[14]=r("label",{for:"password",class:"form-label"},"Password",-1)),i(r("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>A.value.password=a),type:"password",class:"form-control",id:"password"},null,512),[[p,A.value.password]])]),r("div",C,[e[15]||(e[15]=r("label",{for:"confirmationPassword",class:"form-label"},"Confirm Password",-1)),i(r("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>A.value.confirmPassword=a),type:"password",class:"form-control",id:"confirmationPassword"},null,512),[[p,A.value.confirmPassword]])]),M.value?(v(),t("small",I," Passwords do not match! ")):d("",!0),r("div",D,[e[16]||(e[16]=r("label",{for:"photo",class:"form-label"},"Upload Photo",-1)),r("input",{type:"file",class:"form-control",id:"photo",onChange:K,accept:"image/*"},null,32),a.previewImage?(v(),t("div",E,[r("img",{src:a.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,B)])):d("",!0)]),r("div",F,[m(c,{type:"submit",class:"btn btn-danger",disabled:M.value},{default:u((()=>e[17]||(e[17]=[f("Submit ")]))),_:1},8,["disabled"]),m(c,{type:"reset",class:"btn btn-secondary",onClick:Q},{default:u((()=>e[18]||(e[18]=[f(" Reset ")]))),_:1})])],32)])])])]))}};export{R as default};
//# sourceMappingURL=ProfileView-Bb3D_NIS.js.map
