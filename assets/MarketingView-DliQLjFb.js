import{r as t,n as d,o as _,c as l,a as s,d as b,q as p,b as f,v as w,x,t as D,p as y,g as i}from"./index-BdfAxFpj.js";import{u,w as M}from"./xlsx-D1NZSDnX.js";import{V}from"./vue-good-table.esm-B4B81UTZ.js";/* empty css                            */const C={class:"actions"},N={key:0},B={key:1,class:"error"},P={__name:"MarketingView",setup(E){const o=t([]),c=t(!0),n=t(null),r=t(""),m=t(20);t(1),d(()=>o.value.length);const v=async()=>{try{const e=await y.get("https://www.transkon-rent.com/api/marketing",{headers:{Authorization:`Bearer ${userData.token}`}});o.value=e.data}catch(e){n.value="Failed to load data",console.error(e)}finally{c.value=!1}},k=d(()=>r.value?o.value.filter(e=>e.name_customer.toLowerCase().includes(r.value.toLowerCase())):o.value),g=()=>{const e=u.json_to_sheet(o.value),a=u.book_new();u.book_append_sheet(a,e,"Marketing Data"),M(a,"MarketingData.xlsx")};return _(v),(e,a)=>(i(),l("div",null,[a[1]||(a[1]=s("h2",null,"Marketing Data",-1)),s("div",C,[f(s("input",{"onUpdate:modelValue":a[0]||(a[0]=h=>r.value=h),placeholder:"Search Customer Name..."},null,512),[[w,r.value]]),s("button",{onClick:g},"Export to Excel")]),b(x(V),{columns:[{label:"ID",field:"id",sortable:!0},{label:"Customer Name",field:"name_customer",sortable:!0},{label:"Location",field:"location",sortable:!0}],rows:k.value,"pagination-options":{enabled:!0,mode:"pages",perPage:m.value},"search-options":{enabled:!0,placeholder:"Search table"},"sort-options":{enabled:!0}},null,8,["rows","pagination-options"]),c.value?(i(),l("p",N,"Loading...")):p("",!0),n.value?(i(),l("p",B,D(n.value),1)):p("",!0)]))}};export{P as default};
