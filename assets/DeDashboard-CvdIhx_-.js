import{_ as R,r as l,u as $,A as u,o as I,J as N,c as o,a as e,q as r,t as i,h as f,F as P,j,d as _,E as z,p as E,g as n,z as L}from"./index-0SadCTHd.js";import{C as p}from"./Charts-BxFDF_p5.js";/* empty css                                                                   */import{_ as V}from"./BigTable-DzwWi5W0.js";import"./chart-BSyum5xv.js";import"./vue-good-table.esm-BuFIRBJC.js";/* empty css                            */import"./vue-multiselect-BDwC6Kpw.js";import"./xlsx-D1NZSDnX.js";import"./logger-DsocdAuK.js";/* empty css                                                 */const H={class:"mb-2"},q={class:"text-end"},M={class:"row text-center mb-4"},O={class:"col"},J={class:"card border-success"},K={class:"card-body"},G={class:"text-success"},Q={class:"col"},W={class:"card border-danger"},X={class:"card-body"},Y={class:"text-danger",style:{"text-align":"center"}},Z={style:{"margin-right":"10px"}},ee={style:{"margin-left":"10px"}},te={class:"col"},se={class:"card border-warning"},ae={class:"card-body"},le={class:"text-warning",style:{"text-align":"center"}},oe={style:{"margin-right":"10px"}},ne={style:{"margin-left":"10px"}},re={class:"nav nav-tabs"},ie=["onClick"],de={key:0,class:"card mb-4"},ce={class:"card-body"},ue={key:1,class:"row g-4 mb-4"},_e={key:0,class:"col-md-12"},ve={class:"card h-100"},me={key:1,class:"col-md-12"},pe={class:"card h-100"},ye={key:2,class:"col-md-12"},he={class:"card h-100"},ge={key:3,class:"col-md-12"},be={class:"card h-100"},fe={key:4,class:"col-md-12"},xe={class:"card h-100"},ke={__name:"DeDashboard",setup(we){const x=l(null),v=$(),k=l({title:"Daily Trend",type:"bar",api:{url:u+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),w=l({title:"Daily Trend",type:"line",api:{url:u+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),D=l({title:"Unit Summary",type:"pie",api:{url:u+"/chart/de_total_rental",params:["",""]},columns:{datas:["unit_rental","spare_exists_false","spare_exists_true"]},colors:["green","red","orange"],labels:["Unit Rental","PA Unit","PA Rental"]}),S=l({title:"Customer Summary",type:"bar",api:{url:u+"/chart/de_customer_summary"},columns:{label:["customer"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),U=l({title:"Location Summary",type:"bar",api:{url:u+"/chart/de_location_summary"},columns:{label:["alt_location"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),s=l(""),T=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],C=l({title:""});l({});const B=l({firstCol:{label:"TK NO",field:"tk_no",type:"type"},merge:[{fields:["hour_in","hour_out"],to:"hour"},{fields:["jarak_in","jarak_out"],to:"jarak"}],priority:["customer","alt_location"],unpriority:["username","createdAt","lastUpdated"],hidden:["id","done"],toRemove:["vehicle_type","plate_no"],uneditable:["id","plan_hub"],checkbox:["spare_exists"],date:[],datetime:["down_since","estimated_return"]}),A=l({data:`${v.apiBaseUrl}/de_site`,dropdowns:{vehicle_type:{url:v.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:v.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:v.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),y=l([0,0]),d=l([0,0]),m=l([0,0]),h=l("");function g(){const a=new Date,t=a.getHours().toString().padStart(2,"0"),c=a.getMinutes().toString().padStart(2,"0"),b=a.getSeconds().toString().padStart(2,"0");h.value=`${t}:${c}:${b}`}const F=async()=>{try{const a=await E.get(u+"/chart/de_total_rental",{headers:{Authorization:`Bearer ${v.token}`},params:{params:["",""]}});console.log("response : ",a.data);const t=a.data[0].unit_rental+a.data[0].spare_exists_false+a.data[0].spare_exists_true;y.value[0]=a.data[0].unit_rental,d.value[0]=a.data[0].spare_exists_false+a.data[0].spare_exists_true,m.value[0]=a.data[0].spare_exists_false,y.value[1]=(y.value[0]/t*100).toFixed(2),d.value[1]=(d.value[0]/t*100).toFixed(2),m.value[1]=(m.value[0]/t*100).toFixed(2),console.log(d.value)}catch(a){console.error("Fetch error:",a)}};return I(async()=>{await F(),g(),setInterval(g,1e3)}),N(()=>{}),(a,t)=>(n(),o("div",{class:"content",style:z({paddingTop:a.showHeader?"100px":"0px"})},[e("div",H,[t[6]||(t[6]=e("h1",{class:"h4 fw-bold"},"Down Equipment Dashboard",-1)),e("div",q,[t[0]||(t[0]=e("h5",{class:"fw-bold text-primary"},null,-1)),e("div",null,i(h.value),1)]),e("div",M,[e("div",O,[e("div",J,[e("div",K,[e("h3",G,i(y.value[0]),1),t[1]||(t[1]=e("p",{class:"fw-bold mb-0"},"On Hire (UIC)",-1))])])]),e("div",Q,[e("div",W,[e("div",X,[e("h3",Y,[e("span",Z,i(d.value[1])+"%",1),t[2]||(t[2]=f(" || ")),e("span",ee,i(d.value[0]),1)]),t[3]||(t[3]=e("p",{class:"fw-bold mb-0"},"PA Unit",-1))])])]),e("div",te,[e("div",se,[e("div",ae,[e("h3",le,[e("span",oe,i(m.value[1])+"%",1),t[4]||(t[4]=f(" || ")),e("span",ne,i(m.value[0]),1)]),t[5]||(t[5]=e("p",{class:"fw-bold mb-0"},"PA Rental",-1))])])])])]),e("ul",re,[(n(),o(P,null,j(T,c=>e("li",{class:"nav-item",key:c.value},[e("button",{class:L(["nav-link",{active:s.value===c.value}]),onClick:b=>s.value=c.value},i(c.label),11,ie)])),64))]),s.value===""||s.value==="site-summary"?(n(),o("div",de,[e("div",ce,[t[7]||(t[7]=e("h5",{class:"card-title text-danger"},"Site Summary",-1)),_(V,{ref_key:"bigTableRef",ref:x,settings:C.value,urls:A.value,fields:B.value,canInsert:!1,canUpdate:!1},null,8,["settings","urls","fields"])])])):r("",!0),s.value===""||["0","1","2","3"].includes(s.value)?(n(),o("div",ue,[s.value===""||s.value==="0"?(n(),o("div",_e,[e("div",ve,[_(p,{settings:k.value},null,8,["settings"])])])):r("",!0),s.value===""||s.value==="0"?(n(),o("div",me,[e("div",pe,[_(p,{settings:w.value},null,8,["settings"])])])):r("",!0),s.value===""||s.value==="1"?(n(),o("div",ye,[e("div",he,[_(p,{settings:D.value},null,8,["settings"])])])):r("",!0),s.value===""||s.value==="2"?(n(),o("div",ge,[e("div",be,[_(p,{settings:S.value},null,8,["settings"])])])):r("",!0),s.value===""||s.value==="3"?(n(),o("div",fe,[e("div",xe,[_(p,{settings:U.value},null,8,["settings"])])])):r("",!0)])):r("",!0)],4))}},Ne=R(ke,[["__scopeId","data-v-f58efc8f"]]);export{Ne as default};
