import{_ as I,u as D,B as T,C as V,r as u,n as E,o as L,p as v,c as i,a as e,s as M,b as U,v as A,z as f,x as k,d as p,t as h,f as m,T as N,q as w,V as _,A as K,g as d,F as O,j as R,h as y,y as $}from"./index-D2aGOXAB.js";import{l as J,a as j}from"./logger-B1IqVKgO.js";const q={class:"row"},G={class:"col-xl-6 mx-auto"},H={class:"card"},Q={class:"card-body p-4"},W={class:"col-md-12"},X={class:"col-md-12"},Y=["onClick"],Z={class:"col-md-12"},ee={key:0,class:"mt-3"},ae=["src"],te={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},se={__name:"FormIzin",setup(oe){const o=D(),b=T(),g=K+"/perizinan",t=V({keterangan:"",izin:"",izinLabel:""}),r=new FormData,z=u(),c=u(null),x=a=>{c.value=a.target.files[0]};E(()=>t.password!==t.confirmPassword),L(async()=>{console.log("Photo : ",o.photo);try{const a=await v.get(g,{headers:{Authorization:`Bearer ${o.token}`},params:{username:o.username}});z.value=a.data[0]}catch(a){console.error("Fetch error:",a)}});const F=()=>{t.keterangan="",t.izin="",t.izinLabel=""},P=async()=>{try{if(t.keterangan==""){alert("Keterangan Masih Kosong");return}if(t.izin==""){alert("Pilih Jenis Perizinan");return}if(!c.value){alert("Upload Foto Bukti");return}r.append("username",o.username),r.append("picture",c.value),r.append("keterangan",t.keterangan),r.append("izin",t.izin);const a=await v.post(g,r,{headers:{Authorization:`Bearer ${o.token}`}});J("RESPONSE : ",a.data),await $(),alert("Inserted successfully!")}catch(a){j("Submit error:",a),alert("Error updating profile.")}},B=[{value:"datang",label:"Datang terlambat"},{value:"pulang",label:"Pulang cepat"},{value:"tidak-masuk",label:"Tidak masuk"}],l=u(!1);function C(){l.value=!l.value}function S(a){t.izin=a.value,t.izinLabel=a.label,l.value=!1}return(a,s)=>(d(),i("div",q,[e("div",G,[e("div",H,[s[6]||(s[6]=e("div",{class:"card-header px-4 py-3"},[e("h5",{class:"mb-0"},"Perizinan")],-1)),e("div",Q,[e("form",{onSubmit:M(P,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[e("div",W,[s[1]||(s[1]=e("label",{for:"keterangan",class:"form-label"},"Keterangan",-1)),U(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>t.keterangan=n),type:"text",class:"form-control",id:"keterangan"},null,512),[[A,t.keterangan]])]),e("div",X,[s[2]||(s[2]=e("label",{for:"izin",class:"form-label"},"Jenis Izin",-1)),e("div",{class:f(["dropdown",k(b).darkMode?"bg-dark text-white border-secondary":"bg-white text-dark border-secondary"])},[e("div",{class:"dropdown-selected",onClick:C},h(t.izinLabel||"Pilih salah satu"),1),p(N,{name:"slide-fade"},{default:m(()=>[l.value?(d(),i("div",{key:0,class:f(["dropdown-options border",k(b).darkMode?"bg-dark text-white border-secondary":"bg-white text-dark border-secondary"])},[(d(),i(O,null,R(B,n=>e("div",{key:n.value,class:"dropdown-option",onClick:re=>S(n)},h(n.label),9,Y)),64))],2)):w("",!0)]),_:1})],2)]),e("div",Z,[s[3]||(s[3]=e("label",{for:"photo",class:"form-label"},"Upload Foto Bukti",-1)),e("input",{type:"file",class:"form-control",id:"photo",onChange:x,accept:"image/*"},null,32),a.previewImage?(d(),i("div",ee,[e("img",{src:a.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,ae)])):w("",!0)]),e("div",te,[p(_,{type:"submit",color:"danger",size:"md",block:!1},{default:m(()=>s[4]||(s[4]=[y(" Submit ")])),_:1}),p(_,{type:"reset",class:"btn btn-secondary",onClick:F},{default:m(()=>s[5]||(s[5]=[y(" Reset ")])),_:1})])],32)])])])]))}},ie=I(se,[["__scopeId","data-v-b2a806b9"]]);export{ie as default};
