{"version":3,"file":"AdminForm-DGnegK6h.js","sources":["../../src/views/de/AdminForm.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport {API_BASE_URL} from \"@/config/config\";\r\nimport MiniTable from \"@/components/MiniTable.vue\";\r\nimport BigTable from \"@/components/BigTable.vue\";\r\nimport MiniForm from \"@/components/MiniForm.vue\";\r\n\r\nimport { useUserStore} from \"@/stores/user.js\";\r\nconst userData = useUserStore();\r\n\r\nconst settings = ref({\r\n   title: \"Down Equipment\",\r\n   size: [5,55,100],\r\n   canInsert: true,\r\n   canUpdate: true\r\n});\r\n\r\nconst urls = ref({\r\n  data: `${API_BASE_URL}/de_site`,\r\n  params: `?username=${encodeURIComponent(userData.username)}`,\r\n  dropdowns: {\r\n    vehicle_type: { url: API_BASE_URL + \"/dropdowns/vehicle_type\", valueField: \"vehicle_type\", column: \"vehicle_type\" },\r\n    tk_no: {  url: API_BASE_URL + \"/dropdowns/tk_no\", valueField: \"tk_no\", column: \"tk_no\" },\r\n    tk_no_spare: {  url: API_BASE_URL + \"/dropdowns/tk_no\", valueField: \"tk_no\", column: \"tk_no\" },\r\n    category: {url: API_BASE_URL + \"/dropdowns/op_svc_category\", valueField: \"category\", column: \"category\"},\r\n    engine_: {url: API_BASE_URL + \"/dropdowns/op_svc_category_engine\", valueField: \"engine_\", column: \"engine_\"},\r\n    drive_train: {url: API_BASE_URL + \"/dropdowns/op_svc_category_driveTrain\", valueField: \"drive_train\", column: \"drive_train\"},\r\n    chasis: {url: API_BASE_URL + \"/dropdowns/op_svc_category_chasis\", valueField: \"chasis\", column: \"chasis\"},\r\n    electrical_body: {url: API_BASE_URL + \"/dropdowns/op_svc_category_electricalBody\", valueField: \"electrical_body\", column: \"electrical_body\"},\r\n    ac_system: {url: API_BASE_URL + \"/dropdowns/op_svc_category_acSystem\", valueField: \"ac_system\", column: \"ac_system\"},\r\n    repair_electrical: {url: API_BASE_URL + \"/dropdowns/op_svc_category_repairElectrical\", valueField: \"repair_electrical\", column: \"repair_electrical\"},\r\n    defact: {url: API_BASE_URL + \"/dropdowns/op_svc_category_defact\", valueField: \"defact\", column: \"defact\"},\r\n    body: {url: API_BASE_URL + \"/dropdowns/op_svc_category_body\", valueField: \"body\", column: \"body\"},\r\n  },\r\n  get: {\r\n    vehicle_type: {url: API_BASE_URL + \"/get/vehicle_type\", valueField: \"vehicle_type\", column: \"vehicle_type\"}\r\n  }\r\n});\r\n\r\nconst fields = ref({\r\n  firstCol: {label: \"TK Number\", field: \"tk_no\", type: \"type\"},\r\n    columns: [\r\n        {column: \"tk_no\", label: \"TK NO\", filterText: \"Filter TK\", required: true,},\r\n        {column: \"vehicle_type\", label: \"Vehicle Type\", filterText: \"All Vehicle\",\r\n          autofill: {\r\n            triggeredBy: \"tk_no\",\r\n            url: \"get/vehicle_type\",\r\n            getValue: res => res[0]\r\n          }\r\n        },\r\n        {column: \"plate_no\", label: \"Plate Number\", filterText: \"All Plate No\",\r\n          autofill: {\r\n            triggeredBy: \"tk_no\",\r\n            url: \"get/plate_no\",\r\n            getValue: res => res[0]\r\n          }\r\n        },\r\n        {column: \"km\", label: \"Kilometer\", filterText: \"km\", required: true,},\r\n        {column: \"down_since\", label: \"Down Since\", filterText: \"Down Since\", required: true,},\r\n        {column: \"estimated_return\", label: \"Estimated Return\"},\r\n        {column: \"spare_exists\", label: \"Unit Spare\"},\r\n        {column: \"tk_no_spare\", label: \"TK NO Spare\", filterText: \"Filter TK\", required: true,\r\n          visibleIf: (formData) => formData.spare_exists === true\r\n        },\r\n        {column: \"category\", label: \"Category\", filterText: \"Category\"},\r\n        {column: \"schedule\", label: \"Schedule\", filterText: \"Schedule\", required: true,\r\n          visibleIf: (formData) => {\r\n              return false;\r\n            },\r\n          compute: (formData) => {\r\n            console.log(\"formdata \", formData.category);\r\n            console.log(\"some \", formData.category.some(item => item.value === \"Schedule\"))\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Schedule\");\r\n          }\r\n        },\r\n        {column: \"engine_\", label: \"Engine\", filterText: \"Engine\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Engine\");\r\n          }\r\n        },\r\n        {column: \"drive_train\", label: \"Drive Train\", filterText: \"Drive Train\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Drive Train\");\r\n          }\r\n        },\r\n        {column: \"chasis\", label: \"Chasis\", filterText: \"Chasis\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Chasis\");\r\n          }\r\n        },\r\n        {column: \"electrical_body\", label: \"Electrical Body\", filterText: \"Electrical Body\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Electrical Body\");\r\n          }\r\n        },\r\n        {column: \"ac_system\", label: \"AC System\", filterText: \"AC System\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"AC System\");\r\n          }\r\n        },\r\n        {column: \"repair_electrical\", label: \"Repair Electrical\", filterText: \"Repair Electrical\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Repair Electrical\");\r\n          }\r\n        },\r\n        {column: \"defact\", label: \"Defact\", filterText: \"Defact\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Defact\");\r\n          }\r\n        },\r\n        {column: \"body\", label: \"Body \", filterText: \"Body \", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Body\");\r\n          }\r\n        },\r\n        {column: \"comment\", label: \"Comment\", filterText: \"Comment\"},\r\n        {column: \"progress\", label: \"Progress\", \"filterText\" : \"Progress\", visibleIf: (formData) => {return false;}}, \r\n    ],\r\n    priority: [\"done\", \"vehicle_type\", \"plate_no\"],\r\n    hidden: [\"id\", \"schedule\"],\r\n    toRemove: [\"customer\", \"alt_location\", \"username\", \"createdAt\", \"lastUpdated\",\"vgtSelected\"],\r\n    exclude: [\"vehicle_type\", \"plate_no\", \"category\"],\r\n    merge: [\r\n    ],\r\n    uneditable: [\"vehicle_type\", \"plate_no\"],\r\n    dropdown: [\r\n        \"tk_no\", \"tk_no_spare\"\r\n    ],\r\n    multiselect: [\r\n      \"category\", \"engine_\", \"drive_train\", \"chasis\", \"electrical_body\", \"ac_system\", \"repair_electrical\", \"defact\", \"body\"\r\n    ],\r\n    checkbox: [\r\n      \"done\", \"spare_exists\", \"deleted\"\r\n    ],\r\n    date: [\r\n    ],\r\n    datetime: [\r\n      \"down_since\", \"estimated_return\"\r\n    ],\r\n    number: [\r\n      \"km\",\r\n    ],\r\n});\r\n\r\nconst formData = ref({});\r\nonMounted(() => {\r\n  fields.value.columns.forEach(col => {\r\n    formData.value[col.column] = col.default !== undefined ? col.default : '';\r\n  });\r\n  formData.value[\"username\"] = userData.username;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <MiniForm\r\n    v-if=\"settings.canInsert\"\r\n      v-model=\"formData\"\r\n      :fields=\"fields\"\r\n      :urls=\"urls\"\r\n    />\r\n    <div class=\"card\">\r\n      <BigTable\r\n        :settings=\"settings\"\r\n        :urls=\"urls\"\r\n        :fields=\"fields\"\r\n        :canInsert=\"false\"\r\n        :canUpdate=\"true\"\r\n    ></BigTable>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.card {\r\n  table-layout: fixed;\r\n  margin: 40px auto 30px auto;\r\n  width: 85%;\r\n  padding: 40px;\r\n}\r\n  .card h3 {\r\n    font-size: 28px;\r\n  }\r\n  </style>\r\n"],"names":["userData","useUserStore","settings","ref","urls","API_BASE_URL","fields","res","formData","item","onMounted","col"],"mappings":"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"}