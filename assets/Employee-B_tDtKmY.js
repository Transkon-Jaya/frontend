import{_ as Y,u as Z,r as b,o as ee,n as E,c as n,a as e,q as C,h as f,t as i,F as m,j as c,b as d,k as p,z as S,s as le,v as j,p as L,A as $,G as ae,g as o}from"./index-D-IKex2B.js";const te={class:"card border-0 shadow-sm"},se={class:"card-header"},ne={class:"d-flex justify-content-between align-items-center"},oe=["disabled"],ie={class:"card-body"},ue={key:0,class:"alert alert-danger alert-dismissible fade show"},re={key:1,class:"text-center py-5"},de={key:2,class:"table-responsive"},ve={class:"table table-hover table-striped table-bordered mb-0"},me={class:"table-dark"},ce=["onUpdate:modelValue","placeholder"],be={key:0},pe=["colspan"],fe={class:"text-center"},ge=["onClick"],ke={class:"text-center"},ye={class:"text-center"},_e={class:"text-center"},we={class:"text-center"},xe={class:"text-center"},he={class:"text-center"},Ce={class:"text-center"},Se={class:"btn-group btn-group-sm",role:"group"},Ue=["onClick"],Ve=["onClick"],Be={class:"d-flex flex-wrap justify-content-between align-items-center mt-3"},je={class:"d-flex align-items-center mb-2"},Le=["value"],$e={class:"text-muted"},De={"aria-label":"Page navigation"},Pe={class:"pagination pagination-sm mb-0"},Ee={class:"page-item disabled"},Ie={class:"page-link"},Ne={key:0,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},Ae={class:"modal-dialog modal-dialog-centered modal-lg"},Ke={class:"modal-content border-0 shadow"},Te={class:"modal-header bg-danger text-white"},qe={class:"modal-title"},Oe={class:"modal-body"},Fe={class:"row"},Me={class:"col-md-6 mb-3"},Re=["disabled"],ze={class:"col-md-6 mb-3"},Ge={class:"col-md-6 mb-3"},He={class:"col-md-6 mb-3"},Je=["value"],Qe={class:"col-md-6 mb-3"},We=["value"],Xe={class:"col-md-6 mb-3"},Ye=["value"],Ze={class:"col-md-6 mb-3"},el=["value"],ll={class:"col-md-6 mb-3"},al=["value"],tl={class:"col-md-6 mb-3"},sl=["value"],nl={class:"col-md-6 mb-3"},ol=["value"],il={class:"col-md-6 mb-3"},ul=["value"],rl={class:"col-md-6 mb-3"},dl=["value"],vl={class:"col-md-6 mb-3"},ml=["value"],cl={class:"col-md-6 mb-3"},bl=["value"],pl={class:"col-md-6 mb-3"},fl=["value"],gl={class:"modal-footer border-top-0"},kl={key:1,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},yl={class:"modal-dialog modal-dialog-centered"},_l={class:"modal-content border-0 shadow"},wl={class:"modal-body"},xl={__name:"Employee",setup(hl){const q=Z(),O=ae(),v=b([]),t=b({departments:[],jabatan:[],placements:[],genders:["L","P"],locations:[],hub_placement:[],status:[],divisi:[],section:[],kepegawaian:[],klasifikasi:[],salary_code:[]}),U=b(!0),w=b(null),F=b(0),V=b(!1),g=b(!1),s=b({}),M=b(-1),h=b(!1),x=b(null),y=b({username:"",name:"",department:"",jabatan:"",placement:"",gender:"",lokasi:""}),_=b(10),k=b(1),R=[10,20,50,{value:-1,text:"All"}],I=[{text:"Id  ",value:"username",align:"center",sortable:!0,filterable:!0},{text:"Nama",value:"name",align:"center",sortable:!0,filterable:!0},{text:"Departemen",value:"department",align:"center",sortable:!0,filterable:!0},{text:"Position",value:"jabatan",align:"center",sortable:!0,filterable:!0},{text:"Penempatan",value:"placement",align:"center",sortable:!0,filterable:!0},{text:"Gender",value:"gender",align:"center",sortable:!0,filterable:!0},{text:"Lokasi",value:"lokasi",align:"center",sortable:!0,filterable:!0},{text:"Actions",value:"actions",align:"center",sortable:!1,filterable:!1}],D=async()=>{var r,l;try{U.value=!0;const a=await L.get(`${$}/users`,{headers:{Authorization:`Bearer ${q.token}`}});v.value=a.data,F.value=v.value.length,t.value.departments=[...new Set(v.value.map(u=>u.department).filter(Boolean))],t.value.jabatan=[...new Set(v.value.map(u=>u.jabatan).filter(Boolean))],t.value.placements=[...new Set(v.value.map(u=>u.placement).filter(Boolean))],t.value.locations=[...new Set(v.value.map(u=>u.lokasi).filter(Boolean))],t.value.site=[...new Set(v.value.map(u=>u.site).filter(Boolean))],t.value.hub_placement=[...new Set(v.value.map(u=>u.hub_placement).filter(Boolean))],t.value.status=[...new Set(v.value.map(u=>u.status).filter(Boolean))],t.value.divisi=[...new Set(v.value.map(u=>u.divisi).filter(Boolean))],t.value.section=[...new Set(v.value.map(u=>u.section).filter(Boolean))],t.value.kepegawaian=[...new Set(v.value.map(u=>u.kepegawaian).filter(Boolean))],t.value.klasifikasi=[...new Set(v.value.map(u=>u.klasifikasi).filter(Boolean))],t.value.salary_code=[...new Set(v.value.map(u=>u.salary_code).filter(Boolean))],U.value=!1}catch(a){w.value=((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message,U.value=!1}};ee(async()=>{await D()});const B=E(()=>v.value.filter(r=>Object.keys(y.value).every(l=>y.value[l]?String(r[l]).toLowerCase().includes(y.value[l].toLowerCase()):!0))),P=E(()=>{if(_.value===-1)return B.value;const r=(k.value-1)*_.value,l=r+_.value;return B.value.slice(r,l)}),N=E(()=>_.value===-1?1:Math.ceil(B.value.length/_.value)),z=()=>{s.value={username:"",name:"",dob:"",placement:t.value.placements[0]||"",gender:t.value.genders[0]||"L",lokasi:t.value.locations[0]||"",hub_placement:t.value.hub_placement[0]||"",status:t.value.status[0]||"",department:t.value.jabatan[0]||"",department:t.value.departments[0]||"",divisi:t.value.divisi[0]||"",section:t.value.section[0]||"",kepegawaian:t.value.kepegawaian[0]||"",klasifikasi:t.value.klasifikasi[0]||"",salary_code:t.value.salary_code[0]||"",klasifikasi:t.value.klasifikasi[0]||"",site:t.value.site[0]||""},g.value=!0},G=r=>{M.value=v.value.findIndex(l=>l.username===r.username),s.value=JSON.parse(JSON.stringify(r)),V.value=!0},H=async()=>{var r,l;try{g.value?(await L.post(`${$}/users`,s.value,{headers:{"Content-Type":"application/json"}}),g.value=!1):(await L.put(`${$}/users`,s.value,{headers:{"Content-Type":"application/json"}}),V.value=!1),s.value={},await D()}catch(a){w.value=((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||a.message,console.error("CRUD Error:",a)}},J=r=>{x.value=r,h.value=!0},Q=async()=>{var r,l;try{await L.delete(`${$}/users?username=${x.value.username}`),h.value=!1,x.value=null,await D()}catch(a){w.value=((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message,h.value=!1}},A=()=>{h.value=!1,x.value=null},K=()=>{V.value=!1,g.value=!1,s.value={}},W=r=>{O.push({name:"hr-absensi-detail",params:{username:r}})},X=()=>{Object.keys(y.value).forEach(r=>{y.value[r]=""}),k.value=1};return(r,l)=>(o(),n("div",te,[e("div",se,[e("div",ne,[l[23]||(l[23]=e("h3",{class:"mb-0"},"List Karyawan",-1)),e("div",null,[e("button",{onClick:X,class:"btn btn-sm btn-light me-2",disabled:!Object.values(y.value).some(Boolean)},l[21]||(l[21]=[e("i",{class:"fas fa-filter-circle-xmark me-1"},null,-1),f(" Reset Filters ")]),8,oe),e("button",{onClick:z,class:"btn btn-sm btn-danger"},l[22]||(l[22]=[e("i",{class:"fas fa-plus me-1"},null,-1),f(" Add New ")]))])])]),e("div",ie,[w.value?(o(),n("div",ue,[f(i(w.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=a=>w.value=null)})])):C("",!0),U.value?(o(),n("div",re,l[24]||(l[24]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-2"},"Loading data...",-1)]))):(o(),n("div",de,[e("table",ve,[e("thead",me,[e("tr",null,[(o(),n(m,null,c(I,a=>e("th",{key:a.value,class:S(a.align?`text-${a.align}`:"")},[e("div",null,i(a.text),1),a.filterable?d((o(),n("input",{key:0,"onUpdate:modelValue":u=>y.value[a.value]=u,type:"text",class:"form-control form-control-sm mt-1",placeholder:`Filter ${a.text}`,onInput:l[1]||(l[1]=u=>k.value=1)},null,40,ce)),[[j,y.value[a.value]]]):C("",!0)],2)),64))])]),e("tbody",null,[P.value.length===0?(o(),n("tr",be,[e("td",{colspan:I.length,class:"text-center py-4"},"No data available",8,pe)])):C("",!0),(o(!0),n(m,null,c(P.value,(a,u)=>(o(),n("tr",{key:u,class:"align-middle"},[e("td",fe,[e("a",{href:"javascript:void(0)",onClick:T=>W(a.username),class:"text-primary fw-semibold"},i(a.username),9,ge)]),e("td",ke,i(a.name),1),e("td",ye,i(a.department),1),e("td",_e,i(a.jabatan),1),e("td",we,i(a.placement),1),e("td",xe,[e("span",{class:S(["badge",a.gender==="Laki-laki"?"bg-info":"bg-danger"])},i(a.gender),3)]),e("td",he,i(a.lokasi),1),e("td",Ce,[e("div",Se,[e("button",{onClick:T=>G(a),class:"btn btn-warning",title:"Edit"},l[25]||(l[25]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ue),e("button",{onClick:T=>J(a),class:"btn btn-danger",title:"Delete",id:"confirm-text"},l[26]||(l[26]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Ve)])])]))),128))])])])),e("div",Be,[e("div",je,[d(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>_.value=a),class:"form-select form-select-sm me-2",style:{width:"90px"},onChange:l[3]||(l[3]=a=>k.value=1)},[(o(),n(m,null,c(R,a=>e("option",{key:a.value||a,value:a.value||a},i(a.text||a),9,Le)),64))],544),[[p,_.value]]),e("small",$e," Showing "+i(P.value.length)+" of "+i(B.value.length)+" entries ",1)]),e("nav",De,[e("ul",Pe,[e("li",{class:S(["page-item",{disabled:k.value===1}])},[e("button",{class:"page-link",onClick:l[4]||(l[4]=a=>k.value--)},l[27]||(l[27]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))],2),e("li",Ee,[e("span",Ie," Page "+i(k.value)+" of "+i(N.value),1)]),e("li",{class:S(["page-item",{disabled:k.value===N.value}])},[e("button",{class:"page-link",onClick:l[5]||(l[5]=a=>k.value++)},l[28]||(l[28]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])]),V.value||g.value?(o(),n("div",Ne,[e("div",Ae,[e("div",Ke,[e("div",Te,[e("h5",qe,i(g.value?"Tambah Karyawan Baru":"Edit Karyawan"),1),e("button",{type:"button",class:"btn-close btn-close-white",onClick:K})]),e("div",Oe,[e("form",{onSubmit:le(H,["prevent"])},[e("div",Fe,[e("div",Me,[l[29]||(l[29]=e("label",{class:"form-label"},[f("NIK "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.username=a),type:"text",class:"form-control",disabled:!g.value,required:""},null,8,Re),[[j,s.value.username]])]),e("div",ze,[l[30]||(l[30]=e("label",{class:"form-label"},[f("Nama "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[7]||(l[7]=a=>s.value.name=a),type:"text",class:"form-control",required:""},null,512),[[j,s.value.name]])]),e("div",Ge,[l[31]||(l[31]=e("label",{class:"form-label"},"Tanggal Lahir",-1)),d(e("input",{"onUpdate:modelValue":l[8]||(l[8]=a=>s.value.dob=a),type:"date",class:"form-control"},null,512),[[j,s.value.dob]])]),e("div",He,[l[32]||(l[32]=e("label",{class:"form-label"},"Gender",-1)),d(e("select",{"onUpdate:modelValue":l[9]||(l[9]=a=>s.value.gender=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.genders,a=>(o(),n("option",{key:a,value:a},i(a==="L"?"Laki-laki":"Perempuan"),9,Je))),128))],512),[[p,s.value.gender]])]),e("div",Qe,[l[33]||(l[33]=e("label",{class:"form-label"},"Departemen",-1)),d(e("select",{"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.department=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.departments,a=>(o(),n("option",{key:a,value:a},i(a),9,We))),128))],512),[[p,s.value.department]])]),e("div",Xe,[l[34]||(l[34]=e("label",{class:"form-label"},"Jabatan",-1)),d(e("select",{"onUpdate:modelValue":l[11]||(l[11]=a=>s.value.jabatan=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.jabatan,a=>(o(),n("option",{key:a,value:a},i(a),9,Ye))),128))],512),[[p,s.value.jabatan]])]),e("div",Ze,[l[35]||(l[35]=e("label",{class:"form-label"},"Penempatan",-1)),d(e("select",{"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.placement=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.placements,a=>(o(),n("option",{key:a,value:a},i(a),9,el))),128))],512),[[p,s.value.placement]])]),e("div",ll,[l[37]||(l[37]=e("label",{class:"form-label"},"Lokasi",-1)),d(e("select",{"onUpdate:modelValue":l[13]||(l[13]=a=>s.value.lokasi=a),class:"form-select"},[l[36]||(l[36]=e("option",{value:""},"Pilih Lokasi",-1)),(o(!0),n(m,null,c(t.value.locations,a=>(o(),n("option",{key:a,value:a},i(a),9,al))),128))],512),[[p,s.value.lokasi]])]),e("div",tl,[l[38]||(l[38]=e("label",{class:"form-label"},"Hub",-1)),d(e("select",{"onUpdate:modelValue":l[14]||(l[14]=a=>s.value.hub_placement=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.hub_placement,a=>(o(),n("option",{key:a,value:a},i(a),9,sl))),128))],512),[[p,s.value.hub_placement]])]),e("div",nl,[l[39]||(l[39]=e("label",{class:"form-label"},"Status",-1)),d(e("select",{"onUpdate:modelValue":l[15]||(l[15]=a=>s.value.status=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.status,a=>(o(),n("option",{key:a,value:a},i(a),9,ol))),128))],512),[[p,s.value.status]])]),e("div",il,[l[40]||(l[40]=e("label",{class:"form-label"},"Divisi",-1)),d(e("select",{"onUpdate:modelValue":l[16]||(l[16]=a=>s.value.divisi=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.divisi,a=>(o(),n("option",{key:a,value:a},i(a),9,ul))),128))],512),[[p,s.value.divisi]])]),e("div",rl,[l[41]||(l[41]=e("label",{class:"form-label"},"Section",-1)),d(e("select",{"onUpdate:modelValue":l[17]||(l[17]=a=>s.value.section=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.section,a=>(o(),n("option",{key:a,value:a},i(a),9,dl))),128))],512),[[p,s.value.section]])]),e("div",vl,[l[42]||(l[42]=e("label",{class:"form-label"},"Kepegawaian",-1)),d(e("select",{"onUpdate:modelValue":l[18]||(l[18]=a=>s.value.kepegawaian=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.kepegawaian,a=>(o(),n("option",{key:a,value:a},i(a),9,ml))),128))],512),[[p,s.value.kepegawaian]])]),e("div",cl,[l[43]||(l[43]=e("label",{class:"form-label"},"Klasifikasi",-1)),d(e("select",{"onUpdate:modelValue":l[19]||(l[19]=a=>s.value.klasifikasi=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.klasifikasi,a=>(o(),n("option",{key:a,value:a},i(a),9,bl))),128))],512),[[p,s.value.klasifikasi]])]),e("div",pl,[l[44]||(l[44]=e("label",{class:"form-label"},"Salary Code",-1)),d(e("select",{"onUpdate:modelValue":l[20]||(l[20]=a=>s.value.salary_code=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.salary_code,a=>(o(),n("option",{key:a,value:a},i(a),9,fl))),128))],512),[[p,s.value.salary_code]])])]),e("div",gl,[e("button",{type:"button",class:"btn btn-secondary",onClick:K},l[45]||(l[45]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Cancel ")])),e("button",{type:"submit",class:S(["btn",(g.value,"btn-danger")])},[l[46]||(l[46]=e("i",{class:"fas fa-save me-1"},null,-1)),f(" "+i(g.value?"Simpan":"Update"),1)],2)])],32)])])])])):C("",!0),h.value?(o(),n("div",kl,[e("div",yl,[e("div",_l,[e("div",{class:"modal-header bg-danger text-white"},[l[47]||(l[47]=e("h5",{class:"modal-title"},"Konfirmasi Hapus",-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:A})]),e("div",wl,[l[50]||(l[50]=e("p",null,"Apakah Anda yakin ingin menghapus karyawan ini?",-1)),e("p",null,[l[48]||(l[48]=e("strong",null,"NIK:",-1)),f(" "+i(x.value.username),1)]),e("p",null,[l[49]||(l[49]=e("strong",null,"Nama:",-1)),f(" "+i(x.value.name),1)]),l[51]||(l[51]=e("p",{class:"text-danger"},"Data yang dihapus tidak dapat dikembalikan!",-1))]),e("div",{class:"modal-footer border-top-0"},[e("button",{type:"button",class:"btn btn-secondary",onClick:A},l[52]||(l[52]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Batal ")])),e("button",{type:"button",class:"btn btn-danger",onClick:Q},l[53]||(l[53]=[e("i",{class:"fas fa-trash-alt me-1"},null,-1),f(" Hapus ")]))])])])])):C("",!0)]))}},Sl=Y(xl,[["__scopeId","data-v-34ac1f45"]]);export{Sl as default};
