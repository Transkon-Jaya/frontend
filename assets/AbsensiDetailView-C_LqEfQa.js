import{_ as x,L as F,r as u,o as M,c as l,a as s,q as b,d as I,h as A,f as V,i as C,t as a,F as H,j as T,p as h,A as y,P as J,g as i}from"./index-BKODaQah.js";const O={class:"container-global"},Y={class:"header-section"},z={class:"button-group"},R={key:0,class:"loading-state"},U={key:1,class:"alert alert-danger"},j={key:2},q={class:"employee-profile-section"},G={class:"employee-photo-container"},K=["src"],Q={key:1,class:"fas fa-user-circle placeholder-icon"},W={class:"employee-info-container"},X={class:"employee-info-column"},Z={class:"info-row"},ss={class:"info-value"},es={class:"info-row"},ts={class:"info-value"},as={class:"info-row"},os={class:"info-value"},ns={class:"info-row"},ls={class:"info-value"},is={class:"info-row"},rs={class:"info-value"},ds={class:"info-row"},us={class:"info-value"},cs={class:"info-row"},ps={class:"info-value"},vs={class:"info-row"},fs={class:"info-value"},_s={class:"employee-info-column"},ms={class:"info-row"},gs={class:"info-value"},bs={class:"info-row"},hs={class:"info-value"},ys={class:"info-row"},ws={class:"info-value"},ks={class:"info-row"},Ds={class:"info-value"},As={class:"info-row"},$s={class:"info-value"},Es={class:"info-row"},Ss={class:"info-value"},Bs={class:"info-row"},Ls={class:"info-value"},Ns={class:"attendance-section"},Ps={key:0,class:"loading-state"},xs={class:"table-responsive"},Fs={class:"table table-bordered attendance-table"},Ms={key:0},Is={__name:"AbsensiDetailView",setup(Vs){const w=F(),k=w.params.username,v=localStorage.getItem("token"),t=u(null),f=u(null),_=u(!0),p=u(null),m=u([]),g=u(!0),$=async o=>{try{const e=await h.get(`${y}/get/profile-picture`,{params:{params:[o]},headers:{Authorization:`Bearer ${v}`}});f.value=J+"/profile/"+e.data}catch(e){console.error("Error fetching employee photo:",e)}},E=async()=>{var o;try{_.value=!0;const e=await h.get(`${y}/users?username=${k}`,{headers:{Authorization:`Bearer ${v}`}});t.value=e.data,t.value&&((o=t.value[0])!=null&&o.username)&&await $(t.value[0].username),S()}catch(e){p.value=e.message||"Failed to load employee data"}finally{_.value=!1}},S=async()=>{try{g.value=!0;const o=await h.get(`${y}/table-user?username=${w.params.username}&limit=7`,{headers:{Authorization:`Bearer ${v}`}});m.value=o.data}catch(o){p.value=o.message||"Failed to load attendance data"}finally{g.value=!1}};M(async()=>{console.log("Username from route:",k),await E(),console.log("data : ",t.value)});function B(o){const e=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],n=new Date(o),r=n.getDate(),d=e[n.getMonth()],c=n.getFullYear();return String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0"),String(n.getSeconds()).padStart(2,"0"),`${r} ${d} ${c}`}function D(o){return o&&o.split(" ")[1]||"-"}const L=o=>{if(!o)return null;try{const e=new Date(o),n=new Date;if(isNaN(e.getTime()))return"Invalid date";let r=n.getFullYear()-e.getFullYear(),d=n.getMonth()-e.getMonth(),c=n.getDate()-e.getDate();if(c<0){d--;const P=new Date(n.getFullYear(),n.getMonth(),0);c+=P.getDate()}return d<0&&(r--,d+=12),`${r} Tahun ${d} Bulan ${c} Hari`}catch(e){return console.error("Error calculating age:",e),"Error"}},N=()=>{window.print()};return(o,e)=>{const n=C("router-link");return i(),l("div",O,[s("div",Y,[e[2]||(e[2]=s("h2",{class:"fw-bold"},"Employee Attendance Detail",-1)),s("div",z,[s("button",{onClick:N,class:"btn btn-danger me-2"},e[0]||(e[0]=[s("i",{class:"fas fa-print me-1"},null,-1),A(" Print ")])),I(n,{to:"/hr/employee",class:"btn btn-danger"},{default:V(()=>e[1]||(e[1]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),A(" Back ")])),_:1})])]),_.value?(i(),l("div",R,e[3]||(e[3]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading employee data...",-1)]))):p.value?(i(),l("div",U,a(p.value),1)):t.value?(i(),l("div",j,[s("div",q,[s("div",G,[f.value?(i(),l("img",{key:0,src:f.value,alt:"Employee Photo",class:"employee-photo"},null,8,K)):(i(),l("i",Q))]),s("div",W,[s("div",X,[s("div",Z,[e[4]||(e[4]=s("span",{class:"info-label"},"NIK",-1)),s("span",ss,a(t.value[0].username),1)]),s("div",es,[e[5]||(e[5]=s("span",{class:"info-label"},"Name",-1)),s("span",ts,a(t.value[0].name),1)]),s("div",as,[e[6]||(e[6]=s("span",{class:"info-label"},"Dob",-1)),s("span",os,a(t.value[0].dob||"-"),1)]),s("div",ns,[e[7]||(e[7]=s("span",{class:"info-label"},"Age",-1)),s("span",ls,a(L(t.value[0].dob)||"-"),1)]),s("div",is,[e[8]||(e[8]=s("span",{class:"info-label"},"Gender",-1)),s("span",rs,a(t.value[0].gender),1)]),s("div",ds,[e[9]||(e[9]=s("span",{class:"info-label"},"Status",-1)),s("span",us,a(t.value[0].status||"-"),1)]),s("div",cs,[e[10]||(e[10]=s("span",{class:"info-label"},"Email",-1)),s("span",ps,a(t.value[0].email||"-"),1)]),s("div",vs,[e[11]||(e[11]=s("span",{class:"info-label"},"Phone",-1)),s("span",fs,a(t.value[0].phone||"-"),1)])]),s("div",_s,[s("div",ms,[e[12]||(e[12]=s("span",{class:"info-label"},"Dept",-1)),s("span",gs,a(t.value[0].department||"-"),1)]),s("div",bs,[e[13]||(e[13]=s("span",{class:"info-label"},"Jabatan",-1)),s("span",hs,a(t.value[0].jabatan||"-"),1)]),s("div",ys,[e[14]||(e[14]=s("span",{class:"info-label"},"Emp status",-1)),s("span",ws,a(t.value[0].kepegawaian||"-"),1)]),s("div",ks,[e[15]||(e[15]=s("span",{class:"info-label"},"Class",-1)),s("span",Ds,a(t.value[0].klasifikasi||"-"),1)]),s("div",As,[e[16]||(e[16]=s("span",{class:"info-label"},"Placement",-1)),s("span",$s,a(t.value[0].placement||"-"),1)]),s("div",Es,[e[17]||(e[17]=s("span",{class:"info-label"},"Hub",-1)),s("span",Ss,a(t.value[0].hub_placement||"-"),1)]),s("div",Bs,[e[18]||(e[18]=s("span",{class:"info-label"},"Location",-1)),s("span",Ls,a(t.value[0].lokasi||"-"),1)])])])]),s("div",Ns,[e[22]||(e[22]=s("h4",{class:"section-title"},"Attendance History",-1)),g.value?(i(),l("div",Ps,e[19]||(e[19]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):b("",!0),s("div",xs,[s("table",Fs,[e[21]||(e[21]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Date"),s("th",null,"In"),s("th",null,"Out")])],-1)),s("tbody",null,[m.value.length===0?(i(),l("tr",Ms,e[20]||(e[20]=[s("td",{colspan:"3",class:"text-center py-4"},"No attendance records found",-1)]))):b("",!0),(i(!0),l(H,null,T(m.value,(r,d)=>(i(),l("tr",{key:d},[s("td",null,a(B(r.tanggal)),1),s("td",null,a(D(r.hour_in||"-")),1),s("td",null,a(D(r.hour_out||"-")),1)]))),128))])])])])])):b("",!0)])}}},Hs=x(Is,[["__scopeId","data-v-13f5a6bf"]]);export{Hs as default};
