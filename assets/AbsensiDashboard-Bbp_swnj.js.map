{"version":3,"file":"AbsensiDashboard-Bbp_swnj.js","sources":["../../src/views/hr/AbsensiDashboard.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport BigTable from \"@/components/BigTable.vue\";\r\nimport MiniTable from \"@/components/MiniTable.vue\";\r\nimport RouterLink from \"@/components/RouterLink.vue\"\r\n\r\nimport { useUserStore } from \"@/stores/user.js\";\r\nconst userData = useUserStore();\r\n\r\n//Big Table Settings\r\nconst settings = ref({\r\n  title: \"\",\r\n  styleClass: \"\",\r\n  size: [10,30,100] //Multiplier, Addition, Minimum\r\n});\r\n\r\nconst fields = ref({\r\n    firstCol: {label: \"USERNAME\", field: \"username\", type: \"type\", width: 100},\r\n    priority: [\"status\", \"name\", \"department\", \"jabatan\", \"hour_in\", \"hour_out\"],\r\n    unpriority: [\"lastUpdated\"],\r\n    hidden: [\"tanggal\", 'rn', 'created_at'],\r\n    toRemove: [\"id\"],\r\n    exclude: [],\r\n    uneditable: [],\r\n    checkbox: [\"spare_exists\"],\r\n    date: [],\r\n    datetime: [],\r\n    status:{\r\n        field: \"status\",\r\n        calculate: (row) => {\r\n            const today = new Date();\r\n            const todayString = today.toISOString().slice(0, 10); // Format: 'YYYY-MM-DD'\r\n\r\n            const hourInDate = row.hour_in ? row.hour_in.slice(0, 10) : null;\r\n            const hourOutDate = row.hour_out ? row.hour_out.slice(0, 10) : null;\r\n\r\n            // Check if either hour_in or hour_out is today\r\n            const isToday = (hourInDate === todayString) || (hourOutDate === todayString);\r\n\r\n            if (!isToday) {\r\n                return \"Tidak Hadir\";\r\n            }\r\n\r\n            // If today, check status\r\n            if (row.hour_out == null) {\r\n                return \"Masuk\"; // Entered\r\n            } else {\r\n                return \"Pulang\"; // Left\r\n            }\r\n        }\r\n    },\r\n});\r\n\r\nconst urls = ref({\r\n  data: `${userData.apiBaseUrl}/absensi-latest`,\r\n  dropdowns: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    },\r\n    tk_no: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/tk_no\",\r\n      valueField: \"tk_no\",\r\n      column: \"tk_no\"\r\n    },\r\n  },\r\n  get: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/get/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    }\r\n  }\r\n});\r\n//--\r\n\r\n\r\nconst currentTime = ref();\r\nfunction updateClock() {\r\n  const now = new Date();\r\n  const hours = now.getHours().toString().padStart(2, \"0\");\r\n  const minutes = now.getMinutes().toString().padStart(2, \"0\");\r\n  const seconds = now.getSeconds().toString().padStart(2, \"0\");\r\n  currentTime.value = `${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\nonMounted(() => {\r\n  \r\n  // Mulai jam berjalan\r\n  updateClock();\r\n  setInterval(updateClock, 1000);\r\n});\r\n\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <h4 class=\"fw-bold\">Absensi</h4>\r\n            <div class=\"text-end\">\r\n                <h5 class=\"fw-bold text-primary\"></h5>\r\n                <div>{{ currentTime }}</div>\r\n            </div>\r\n        </div>\r\n        <BigTable\r\n        :settings=\"settings\"\r\n        :urls=\"urls\"\r\n        :fields=\"fields\"\r\n        :canInsert=\"false\"\r\n        :canUpdate=\"true\"\r\n        ></BigTable>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>"],"names":["userData","useUserStore","settings","ref","title","styleClass","size","fields","firstCol","label","field","type","width","priority","unpriority","hidden","toRemove","exclude","uneditable","checkbox","date","datetime","status","calculate","row","todayString","Date","toISOString","slice","hourInDate","hour_in","hourOutDate","hour_out","urls","data","apiBaseUrl","dropdowns","vehicle_type","url","valueField","column","tk_no","get","currentTime","updateClock","now","hours","getHours","toString","padStart","minutes","getMinutes","seconds","getSeconds","value","onMounted","setInterval"],"mappings":"0eAQA,MAAMA,EAAWC,IAGXC,EAAWC,EAAI,CACnBC,MAAO,GACPC,WAAY,GACZC,KAAM,CAAC,GAAG,GAAG,OAGTC,EAASJ,EAAI,CACfK,SAAU,CAACC,MAAO,WAAYC,MAAO,WAAYC,KAAM,OAAQC,MAAO,KACtEC,SAAU,CAAC,SAAU,OAAQ,aAAc,UAAW,UAAW,YACjEC,WAAY,CAAC,eACbC,OAAQ,CAAC,UAAW,KAAM,cAC1BC,SAAU,CAAC,MACXC,QAAS,GACTC,WAAY,GACZC,SAAU,CAAC,gBACXC,KAAM,GACNC,SAAU,GACVC,OAAO,CACHZ,MAAO,SACPa,UAAYC,IACF,MACAC,OADYC,MACQC,cAAcC,MAAM,EAAG,IAE3CC,EAAaL,EAAIM,QAAUN,EAAIM,QAAQF,MAAM,EAAG,IAAM,KACtDG,EAAcP,EAAIQ,SAAWR,EAAIQ,SAASJ,MAAM,EAAG,IAAM,KAK/D,OAFiBC,IAAeJ,GAAiBM,IAAgBN,EAO7C,MAAhBD,EAAIQ,SACG,QAEA,SAPA,aAQV,KAKPC,EAAO9B,EAAI,CACf+B,KAAM,GAAGlC,EAASmC,4BAClBC,UAAW,CACTC,aAAc,CACZC,IAAKtC,EAASmC,WAAa,0BAC3BI,WAAY,eACZC,OAAQ,gBAEVC,MAAO,CACLH,IAAKtC,EAASmC,WAAa,mBAC3BI,WAAY,QACZC,OAAQ,UAGZE,IAAK,CACHL,aAAc,CACZC,IAAKtC,EAASmC,WAAa,oBAC3BI,WAAY,eACZC,OAAQ,mBAORG,EAAcxC,IACpB,SAASyC,IACD,MAAAC,MAAUnB,KACVoB,EAAQD,EAAIE,WAAWC,WAAWC,SAAS,EAAG,KAC9CC,EAAUL,EAAIM,aAAaH,WAAWC,SAAS,EAAG,KAClDG,EAAUP,EAAIQ,aAAaL,WAAWC,SAAS,EAAG,KACxDN,EAAYW,MAAQ,GAAGR,KAASI,KAAWE,GAC7C,QAEAG,GAAU,SAIRC,YAAYZ,EAAa,IAAI"}