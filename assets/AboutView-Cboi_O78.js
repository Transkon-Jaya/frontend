import{_ as y,c as d,a as o,l as L,m as f,b as P,k as I,F as M,j as w,h as S,t as r,r as l,o as x,g as p}from"./index-6LNjClDC.js";import{_ as U}from"./eid-CUa9Qr1a.js";const B={setup(){const i=l({ipv4:"Mengambil data...",ipv6:"Mengambil data..."}),a=l({lat:"Mengambil data...",lon:"Mengambil data..."}),u=l({city:"Mengambil data...",country:"Mengambil data...",lat:"",lon:""}),t=l(""),m=l(""),c=l(!1),n=l(""),v=l(["HO Balikpapan","HUB Sanga-sanga","HUB Melak","HUB Sangata","HUB Berau"]),g=12,h=async()=>{try{const s=await(await fetch("https://api.ipify.org?format=json")).json();i.value.ipv4=s.ip;const _=await(await fetch("https://api64.ipify.org?format=json")).json();i.value.ipv6=_.ip}catch(e){console.error("Error fetching IP:",e),i.value.ipv4="Gagal memuat",i.value.ipv6="Gagal memuat"}},b=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{a.value.lat=e.coords.latitude.toFixed(6),a.value.lon=e.coords.longitude.toFixed(6),t.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${a.value.lon},${a.value.lat}&size=450,300&z=${g}&l=map&pt=${a.value.lon},${a.value.lat},pm2rdm`},e=>{console.error("GPS Geolocation Error:",e),a.value.lat="Izin ditolak",a.value.lon="Izin ditolak"}):(a.value.lat="Tidak didukung",a.value.lon="Tidak didukung")},k=async()=>{try{const s=await(await fetch("http://ip-api.com/json/")).json();u.value={city:s.city||"Tidak diketahui",country:s.country||"Tidak diketahui",lat:s.lat?s.lat.toFixed(6):"",lon:s.lon?s.lon.toFixed(6):""},s.lon&&s.lat&&(m.value=`https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${s.lon},${s.lat}&size=450,300&z=${g}&l=map&pt=${s.lon},${s.lat},pm2rdm`)}catch(e){console.error("Error fetching IP geolocation:",e),u.value.city="Gagal memuat",u.value.country="Gagal memuat"}};return x(()=>{h(),b(),k()}),{ipData:i,gpsLocation:a,ipLocation:u,gpsMapUrl:t,ipMapUrl:m,attendanceRecorded:c,selectedLocation:n,locations:v}},methods:{openCamera(){if(!this.selectedLocation){alert("Silakan pilih lokasi absen terlebih dahulu!");return}document.getElementById("cameraInput").click()},handlePhoto(i){i.target.files[0]&&(this.attendanceRecorded=!0,setTimeout(()=>{this.attendanceRecorded=!1},5e3))}}},G={class:"app-container"},A={class:"main-content"},j={class:"attendance-card"},C={class:"form-group"},E=["value"],F={class:"action-group"},H=["disabled"],T={key:0,class:"confirmation-message"},V={class:"info-section"},z={class:"info-card"},R={class:"info-content"},D={class:"info-row"},N={class:"info-value"},O={class:"info-row"},J={class:"info-value"},K=["src"],Z={class:"info-card"},q={class:"info-content"},Q={class:"info-row"},W={class:"info-value"},X={class:"info-row"},Y={class:"info-value"},$={class:"info-row"},aa={class:"info-value"},oa={class:"info-row"},ta={class:"info-value"},sa=["src"];function na(i,a,u,t,m,c){return p(),d("div",G,[o("main",A,[a[15]||(a[15]=o("h1",{class:"app-title"},"Absensi Karyawan",-1)),a[16]||(a[16]=o("p",{class:"app-subtitle"},null,-1)),o("div",j,[o("div",C,[a[4]||(a[4]=o("label",{for:"location",class:"form-label"},"Lokasi Absensi",-1)),P(o("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.selectedLocation=n),id:"location",class:"form-select"},[a[3]||(a[3]=o("option",{value:"",disabled:"",selected:""},"Pilih lokasi Anda",-1)),(p(!0),d(M,null,w(t.locations,(n,v)=>(p(),d("option",{key:v,value:n},r(n),9,E))),128))],512),[[I,t.selectedLocation]])]),o("div",F,[o("input",{type:"file",accept:"image/*",capture:"environment",onChange:a[1]||(a[1]=(...n)=>c.handlePhoto&&c.handlePhoto(...n)),id:"cameraInput",class:"hidden-input"},null,32),o("button",{onClick:a[2]||(a[2]=(...n)=>c.openCamera&&c.openCamera(...n)),class:"primary-btn",disabled:!t.selectedLocation},a[5]||(a[5]=[o("i",{class:"fa-solid fa-camera"},null,-1),S(" Absen Sekarang ")]),8,H)]),t.attendanceRecorded?(p(),d("div",T,a[6]||(a[6]=[o("i",{class:"fa-solid fa-check-circle success-icon"},null,-1),o("span",null,"Absensi berhasil direkam!",-1)]))):f("",!0)]),a[17]||(a[17]=L('<div class="announcement-card"><div class="announcement-header"><i class="fa-solid fa-bullhorn announcement-icon"></i><h3>TRJA Memo</h3></div><div class="announcement-content"><img src="'+U+'" alt="Gambar Lebaran" class="announcement-image"><p class="announcement-text">Selamat Hari Raya Idul Fitri 1445 H</p></div></div>',1)),o("div",V,[o("div",z,[a[9]||(a[9]=o("div",{class:"info-header"},[o("i",{class:"fa-solid fa-map-marker-alt"}),o("h4",null,"Lokasi GPS Anda")],-1)),o("div",R,[o("div",D,[a[7]||(a[7]=o("span",{class:"info-label"},"Latitude:",-1)),o("span",N,r(t.gpsLocation.lat),1)]),o("div",O,[a[8]||(a[8]=o("span",{class:"info-label"},"Longitude:",-1)),o("span",J,r(t.gpsLocation.lon),1)]),t.gpsMapUrl?(p(),d("img",{key:0,src:t.gpsMapUrl,alt:"GPS Map",class:"map-image"},null,8,K)):f("",!0)])]),o("div",Z,[a[14]||(a[14]=o("div",{class:"info-header"},[o("i",{class:"fa-solid fa-network-wired"}),o("h4",null,"Informasi Jaringan")],-1)),o("div",q,[o("div",Q,[a[10]||(a[10]=o("span",{class:"info-label"},"IPv4:",-1)),o("span",W,r(t.ipData.ipv4),1)]),o("div",X,[a[11]||(a[11]=o("span",{class:"info-label"},"IPv6:",-1)),o("span",Y,r(t.ipData.ipv6),1)]),o("div",$,[a[12]||(a[12]=o("span",{class:"info-label"},"Kota:",-1)),o("span",aa,r(t.ipLocation.city),1)]),o("div",oa,[a[13]||(a[13]=o("span",{class:"info-label"},"Negara:",-1)),o("span",ta,r(t.ipLocation.country),1)]),t.ipMapUrl?(p(),d("img",{key:0,src:t.ipMapUrl,alt:"IP Map",class:"map-image"},null,8,sa)):f("",!0)])])])])])}const ra=y(B,[["render",na]]);export{ra as default};
