{"version":3,"file":"MarketingView-vsINAO2A.js","sources":["../../src/views/MarketingView.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { utils, writeFile } from \"xlsx\";\r\nimport { VueGoodTable } from \"vue-good-table-next\";\r\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\r\n\r\nconst marketingData = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\nconst searchQuery = ref(\"\");\r\n\r\n// **Pagination & Table Config**\r\nconst perPage = ref(20);\r\nconst currentPage = ref(1);\r\nconst totalRows = computed(() => marketingData.value.length);\r\n\r\n// **Fetch API Data**\r\nconst fetchMarketingData = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      \"https://www.transkon-rent.com/api/marketing\"\r\n    );\r\n    marketingData.value = response.data;\r\n  } catch (err) {\r\n    error.value = \"Failed to load data\";\r\n    console.error(err);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// **Filtered Data for Search**\r\nconst filteredData = computed(() => {\r\n  if (!searchQuery.value) return marketingData.value;\r\n  return marketingData.value.filter((item) =>\r\n    item.name_customer.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n  );\r\n});\r\n\r\n// **Export Data to Excel**\r\nconst exportToExcel = () => {\r\n  const worksheet = utils.json_to_sheet(marketingData.value);\r\n  const workbook = utils.book_new();\r\n  utils.book_append_sheet(workbook, worksheet, \"Marketing Data\");\r\n  writeFile(workbook, \"MarketingData.xlsx\");\r\n};\r\n\r\nonMounted(fetchMarketingData);\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <h2>Marketing Data</h2>\r\n\r\n    <div class=\"actions\">\r\n      <input v-model=\"searchQuery\" placeholder=\"Search Customer Name...\" />\r\n      <button @click=\"exportToExcel\">Export to Excel</button>\r\n    </div>\r\n\r\n    <vue-good-table\r\n      :columns=\"[\r\n        { label: 'ID', field: 'id', sortable: true },\r\n        { label: 'Customer Name', field: 'name_customer', sortable: true },\r\n        { label: 'Location', field: 'location', sortable: true },\r\n      ]\"\r\n      :rows=\"filteredData\"\r\n      :pagination-options=\"{ enabled: true, mode: 'pages', perPage: perPage }\"\r\n      :search-options=\"{ enabled: true, placeholder: 'Search table' }\"\r\n      :sort-options=\"{ enabled: true }\"\r\n    />\r\n\r\n    <p v-if=\"loading\">Loading...</p>\r\n    <p v-if=\"error\" class=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 10px;\r\n}\r\ninput {\r\n  padding: 6px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\nbutton {\r\n  padding: 6px 12px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"names":["marketingData","ref","loading","error","searchQuery","perPage","computed","fetchMarketingData","response","axios","err","filteredData","item","exportToExcel","worksheet","utils","workbook","writeFile","onMounted"],"mappings":"2QAOA,MAAMA,EAAgBC,EAAI,CAAA,CAAE,EACtBC,EAAUD,EAAI,EAAI,EAClBE,EAAQF,EAAI,IAAI,EAChBG,EAAcH,EAAI,EAAE,EAGpBI,EAAUJ,EAAI,EAAE,EACFA,EAAI,CAAC,EACPK,EAAS,IAAMN,EAAc,MAAM,MAAM,EAG3D,MAAMO,EAAqB,SAAY,CACrC,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAC3B,6CACN,EACIT,EAAc,MAAQQ,EAAS,IAChC,OAAQE,EAAK,CACZP,EAAM,MAAQ,sBACd,QAAQ,MAAMO,CAAG,CACrB,QAAY,CACRR,EAAQ,MAAQ,EACjB,CACH,EAGMS,EAAeL,EAAS,IACvBF,EAAY,MACVJ,EAAc,MAAM,OAAQY,GACjCA,EAAK,cAAc,YAAa,EAAC,SAASR,EAAY,MAAM,aAAa,CAC7E,EAHiCJ,EAAc,KAI9C,EAGKa,EAAgB,IAAM,CAC1B,MAAMC,EAAYC,EAAM,cAAcf,EAAc,KAAK,EACnDgB,EAAWD,EAAM,WACvBA,EAAM,kBAAkBC,EAAUF,EAAW,gBAAgB,EAC7DG,EAAUD,EAAU,oBAAoB,CAC1C,EAEA,OAAAE,EAAUX,CAAkB"}