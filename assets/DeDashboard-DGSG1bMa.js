import{_ as a,r as e,u as l,o as t,m as s,a as r,d as n,k as i,t as d,p as o,F as u,e as c,l as v,q as p,j as m,A as _,b as y,n as b}from"./index-CMxTdo7C.js";import{C as g}from"./Charts-D09gs1VE.js";import{_ as h}from"./BigTable-DnnXWGC5.js";import"./xlsx-t3Mx5y0a.js";const x={class:"mb-2"},f={class:"text-end"},k={class:"row text-center mb-4"},w={class:"col"},D={class:"card border-success"},U={class:"card-body"},S={class:"text-success"},T={class:"col"},j={class:"card border-danger"},C={class:"card-body"},A={class:"text-danger",style:{"text-align":"center"}},B={style:{"margin-right":"10px"}},F={style:{"margin-left":"10px"}},R={class:"col"},I={class:"card border-warning"},P={class:"card-body"},$={class:"text-warning",style:{"text-align":"center"}},H={style:{"margin-right":"10px"}},q={style:{"margin-left":"10px"}},L={class:"nav nav-tabs"},O=["onClick"],E={key:0,class:"card mb-4"},K={class:"card-body"},M={key:1,class:"row g-4 mb-4"},N={key:0,class:"col-md-12"},z={class:"card h-100"},G={key:1,class:"col-md-12"},J={class:"card h-100"},Q={key:2,class:"col-md-12"},V={class:"card h-100"},W={key:3,class:"col-md-12"},X={class:"card h-100"},Y={key:4,class:"col-md-12"},Z={class:"card h-100"},aa=a({__name:"DeDashboard",setup(a){const aa=e(null),ea=l(),la=e({title:"Daily Trend",type:"bar",api:{url:_+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),ta=e({title:"Daily Trend",type:"line",api:{url:_+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),sa=e({title:"Unit Summary",type:"pie",api:{url:_+"/chart/de_total_rental",params:["",""]},columns:{datas:["unit_rental","spare_exists_false","spare_exists_true"]},colors:["green","red","orange"],labels:["Unit Rental","PA Unit","PA Rental"]}),ra=e({title:"Customer Summary",type:"bar",api:{url:_+"/chart/de_customer_summary"},columns:{label:["customer"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),na=e({title:"Location Summary",type:"bar",api:{url:_+"/chart/de_location_summary"},columns:{label:["alt_location"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),ia=e(""),da=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],oa=e({title:""});e({});const ua=e({firstCol:{label:"TK NO",field:"tk_no",type:"type"},merge:[{fields:["hour_in","hour_out"],to:"hour"},{fields:["jarak_in","jarak_out"],to:"jarak"}],priority:["customer","alt_location"],unpriority:["username","createdAt","lastUpdated"],hidden:["id","done"],toRemove:["vehicle_type","plate_no"],uneditable:["id","plan_hub"],checkbox:["spare_exists"],date:[],datetime:["down_since","estimated_return"]}),ca=e({data:`${ea.apiBaseUrl}/de_site`,dropdowns:{vehicle_type:{url:ea.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:ea.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:ea.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),va=e([0,0]),pa=e([0,0]),ma=e([0,0]),_a=e("");function ya(){const a=new Date,e=a.getHours().toString().padStart(2,"0"),l=a.getMinutes().toString().padStart(2,"0"),t=a.getSeconds().toString().padStart(2,"0");_a.value=`${e}:${l}:${t}`}return t((async()=>{await(async()=>{try{const a=await m.get(_+"/chart/de_total_rental",{params:{params:["",""]}}),e=a.data[0].unit_rental+a.data[0].spare_exists_false+a.data[0].spare_exists_true;va.value[0]=a.data[0].unit_rental,pa.value[0]=a.data[0].spare_exists_false+a.data[0].spare_exists_true,ma.value[0]=a.data[0].spare_exists_false,va.value[1]=(va.value[0]/e*100).toFixed(2),pa.value[1]=(pa.value[0]/e*100).toFixed(2),ma.value[1]=(ma.value[0]/e*100).toFixed(2)}catch(a){}})(),ya(),setInterval(ya,1e3)})),s((()=>{})),(a,e)=>(y(),r("div",{class:"content",style:p({paddingTop:a.showHeader?"100px":"0px"})},[n("div",x,[e[6]||(e[6]=n("h1",{class:"h4 fw-bold"},"Down Equipment Dashboard",-1)),n("div",f,[e[0]||(e[0]=n("h5",{class:"fw-bold text-primary"},null,-1)),n("div",null,d(_a.value),1)]),n("div",k,[n("div",w,[n("div",D,[n("div",U,[n("h3",S,d(va.value[0]),1),e[1]||(e[1]=n("p",{class:"fw-bold mb-0"},"On Hire (UIC)",-1))])])]),n("div",T,[n("div",j,[n("div",C,[n("h3",A,[n("span",B,d(pa.value[1])+"%",1),e[2]||(e[2]=o(" || ")),n("span",F,d(pa.value[0]),1)]),e[3]||(e[3]=n("p",{class:"fw-bold mb-0"},"PA Unit",-1))])])]),n("div",R,[n("div",I,[n("div",P,[n("h3",$,[n("span",H,d(ma.value[1])+"%",1),e[4]||(e[4]=o(" || ")),n("span",q,d(ma.value[0]),1)]),e[5]||(e[5]=n("p",{class:"fw-bold mb-0"},"PA Rental",-1))])])])])]),n("ul",L,[(y(),r(u,null,c(da,(a=>n("li",{class:"nav-item",key:a.value},[n("button",{class:b(["nav-link",{active:ia.value===a.value}]),onClick:e=>ia.value=a.value},d(a.label),11,O)]))),64))]),""===ia.value||"site-summary"===ia.value?(y(),r("div",E,[n("div",K,[e[7]||(e[7]=n("h5",{class:"card-title text-danger"},"Site Summary",-1)),v(h,{ref_key:"bigTableRef",ref:aa,settings:oa.value,urls:ca.value,fields:ua.value,canInsert:!1,canUpdate:!1},null,8,["settings","urls","fields"])])])):i("",!0),""===ia.value||["0","1","2","3"].includes(ia.value)?(y(),r("div",M,[""===ia.value||"0"===ia.value?(y(),r("div",N,[n("div",z,[v(g,{settings:la.value},null,8,["settings"])])])):i("",!0),""===ia.value||"0"===ia.value?(y(),r("div",G,[n("div",J,[v(g,{settings:ta.value},null,8,["settings"])])])):i("",!0),""===ia.value||"1"===ia.value?(y(),r("div",Q,[n("div",V,[v(g,{settings:sa.value},null,8,["settings"])])])):i("",!0),""===ia.value||"2"===ia.value?(y(),r("div",W,[n("div",X,[v(g,{settings:ra.value},null,8,["settings"])])])):i("",!0),""===ia.value||"3"===ia.value?(y(),r("div",Y,[n("div",Z,[v(g,{settings:na.value},null,8,["settings"])])])):i("",!0)])):i("",!0)],4))}},[["__scopeId","data-v-0136ff4c"]]);export{aa as default};
//# sourceMappingURL=DeDashboard-DGSG1bMa.js.map
