import{_ as a,r as e,u as l,A as t,o as s,G as r,c as i,a as n,m as d,t as o,h as u,F as c,j as v,d as _,H as p,q as m,g as y,y as g}from"./index-ymcskxsK.js";import{C as b}from"./Charts-BlBBVNtq.js";/* empty css                                                                   */import{_ as h}from"./BigTable-DnB_oljX.js";import"./xlsx-nBpVFcdQ.js";import"./vue-multiselect-K0gAGM40.js";const x={class:"mb-2"},f={class:"text-end"},k={class:"row text-center mb-4"},w={class:"col"},D={class:"card border-success"},U={class:"card-body"},S={class:"text-success"},T={class:"col"},j={class:"card border-danger"},C={class:"card-body"},A={class:"text-danger",style:{"text-align":"center"}},B={style:{"margin-right":"10px"}},F={style:{"margin-left":"10px"}},R={class:"col"},H={class:"card border-warning"},I={class:"card-body"},P={class:"text-warning",style:{"text-align":"center"}},$={style:{"margin-right":"10px"}},L={style:{"margin-left":"10px"}},q={class:"nav nav-tabs"},E=["onClick"],G={key:0,class:"card mb-4"},O={class:"card-body"},z={key:1,class:"row g-4 mb-4"},K={key:0,class:"col-md-12"},M={class:"card h-100"},N={key:1,class:"col-md-12"},J={class:"card h-100"},Q={key:2,class:"col-md-12"},V={class:"card h-100"},W={key:3,class:"col-md-12"},X={class:"card h-100"},Y={key:4,class:"col-md-12"},Z={class:"card h-100"},aa=a({__name:"DeDashboard",setup(a){const aa=e(null),ea=l(),la=e({title:"Daily Trend",type:"bar",api:{url:t+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),ta=e({title:"Daily Trend",type:"line",api:{url:t+"/chart/de_running_total",params:[14,"",""]},columns:{label:["date"],datas:["running_total","daily_down","daily_done"]},colors:["red","orange","green"],labels:["Total Down","Units Down / Day","Units Done / Day"]}),sa=e({title:"Unit Summary",type:"pie",api:{url:t+"/chart/de_total_rental",params:["",""]},columns:{datas:["unit_rental","spare_exists_false","spare_exists_true"]},colors:["green","red","orange"],labels:["Unit Rental","PA Unit","PA Rental"]}),ra=e({title:"Customer Summary",type:"bar",api:{url:t+"/chart/de_customer_summary"},columns:{label:["customer"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),ia=e({title:"Location Summary",type:"bar",api:{url:t+"/chart/de_location_summary"},columns:{label:["alt_location"],datas:["total_unit","total_break"]},colors:["green","red"],labels:["Total Unit","Total Break"]}),na=e(""),da=[{label:"All",value:""},{label:"Site Summary",value:"site-summary"},{label:"Daily Trend",value:"0"},{label:"Unit Summary",value:"1"},{label:"Customer Summary",value:"2"},{label:"Location Summary",value:"3"}],oa=e({title:""});e({});const ua=e({firstCol:{label:"TK NO",field:"tk_no",type:"type"},merge:[{fields:["hour_in","hour_out"],to:"hour"},{fields:["jarak_in","jarak_out"],to:"jarak"}],priority:["customer","alt_location"],unpriority:["username","createdAt","lastUpdated"],hidden:["id","done"],toRemove:["vehicle_type","plate_no"],uneditable:["id","plan_hub"],checkbox:["spare_exists"],date:[],datetime:["down_since","estimated_return"]}),ca=e({data:`${ea.apiBaseUrl}/de_site`,dropdowns:{vehicle_type:{url:ea.apiBaseUrl+"/dropdowns/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"},tk_no:{url:ea.apiBaseUrl+"/dropdowns/tk_no",valueField:"tk_no",column:"tk_no"}},get:{vehicle_type:{url:ea.apiBaseUrl+"/get/vehicle_type",valueField:"vehicle_type",column:"vehicle_type"}}}),va=e([0,0]),_a=e([0,0]),pa=e([0,0]),ma=e("");function ya(){const a=new Date,e=a.getHours().toString().padStart(2,"0"),l=a.getMinutes().toString().padStart(2,"0"),t=a.getSeconds().toString().padStart(2,"0");ma.value=`${e}:${l}:${t}`}return s((async()=>{await(async()=>{try{const a=await m.get(t+"/chart/de_total_rental",{params:{params:["",""]}}),e=a.data[0].unit_rental+a.data[0].spare_exists_false+a.data[0].spare_exists_true;va.value[0]=a.data[0].unit_rental,_a.value[0]=a.data[0].spare_exists_false+a.data[0].spare_exists_true,pa.value[0]=a.data[0].spare_exists_false,va.value[1]=(va.value[0]/e*100).toFixed(2),_a.value[1]=(_a.value[0]/e*100).toFixed(2),pa.value[1]=(pa.value[0]/e*100).toFixed(2)}catch(a){}})(),ya(),setInterval(ya,1e3)})),r((()=>{})),(a,e)=>(y(),i("div",{class:"content",style:p({paddingTop:a.showHeader?"100px":"0px"})},[n("div",x,[e[6]||(e[6]=n("h1",{class:"h4 fw-bold"},"Down Equipment Dashboard",-1)),n("div",f,[e[0]||(e[0]=n("h5",{class:"fw-bold text-primary"},null,-1)),n("div",null,o(ma.value),1)]),n("div",k,[n("div",w,[n("div",D,[n("div",U,[n("h3",S,o(va.value[0]),1),e[1]||(e[1]=n("p",{class:"fw-bold mb-0"},"On Hire (UIC)",-1))])])]),n("div",T,[n("div",j,[n("div",C,[n("h3",A,[n("span",B,o(_a.value[1])+"%",1),e[2]||(e[2]=u(" || ")),n("span",F,o(_a.value[0]),1)]),e[3]||(e[3]=n("p",{class:"fw-bold mb-0"},"PA Unit",-1))])])]),n("div",R,[n("div",H,[n("div",I,[n("h3",P,[n("span",$,o(pa.value[1])+"%",1),e[4]||(e[4]=u(" || ")),n("span",L,o(pa.value[0]),1)]),e[5]||(e[5]=n("p",{class:"fw-bold mb-0"},"PA Rental",-1))])])])])]),n("ul",q,[(y(),i(c,null,v(da,(a=>n("li",{class:"nav-item",key:a.value},[n("button",{class:g(["nav-link",{active:na.value===a.value}]),onClick:e=>na.value=a.value},o(a.label),11,E)]))),64))]),""===na.value||"site-summary"===na.value?(y(),i("div",G,[n("div",O,[e[7]||(e[7]=n("h5",{class:"card-title text-danger"},"Site Summary",-1)),_(h,{ref_key:"bigTableRef",ref:aa,settings:oa.value,urls:ca.value,fields:ua.value,canInsert:!1,canUpdate:!1},null,8,["settings","urls","fields"])])])):d("",!0),""===na.value||["0","1","2","3"].includes(na.value)?(y(),i("div",z,[""===na.value||"0"===na.value?(y(),i("div",K,[n("div",M,[_(b,{settings:la.value},null,8,["settings"])])])):d("",!0),""===na.value||"0"===na.value?(y(),i("div",N,[n("div",J,[_(b,{settings:ta.value},null,8,["settings"])])])):d("",!0),""===na.value||"1"===na.value?(y(),i("div",Q,[n("div",V,[_(b,{settings:sa.value},null,8,["settings"])])])):d("",!0),""===na.value||"2"===na.value?(y(),i("div",W,[n("div",X,[_(b,{settings:ra.value},null,8,["settings"])])])):d("",!0),""===na.value||"3"===na.value?(y(),i("div",Y,[n("div",Z,[_(b,{settings:ia.value},null,8,["settings"])])])):d("",!0)])):d("",!0)],4))}},[["__scopeId","data-v-0136ff4c"]]);export{aa as default};
