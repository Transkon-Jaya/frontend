import{u as k,w as T}from"./xlsx-D1NZSDnX.js";import{_ as D,c as u,a as e,t as i,b as w,z as b,k as _,F as h,j as g,q as N,d as v,f as p,i as S,g as d,h as L}from"./index-D-aC2Z3f.js";const M={name:"MobileTimesheet",data(){return{currentDate:new Date(2025,4,1),filter:"all",selectedGroup:"",currentPage:1,itemsPerPage:5,visibleDays:["M","T","W","T","F","S","S"],units:[{id:1,tkNo:"TK 5083",plateNo:"DA 8043 WA",group:"PT ABC",noLambung:"LV74",model:"Triton HDX facelift",status:this.generateRandomStatus(30),hours:744,breakdowns:0},{id:2,tkNo:"TK 5082",plateNo:"DA 8047 WA",group:"MSO",noLambung:"LV73",model:"Triton HDX facelift",status:this.generateRandomStatus(30),hours:744,breakdowns:0},{id:3,tkNo:"TK 5078",plateNo:"DA 8049 WA",group:"QUIKS",noLambung:"LV72",model:"Triton GLS facelift",status:this.generateRandomStatus(30),hours:720,breakdowns:2},{id:4,tkNo:"TK 6036",plateNo:"KT 8983 ZE",group:"SAM",noLambung:"LV71",model:"Triton GLS facelift",status:this.generateRandomStatus(30),hours:720,breakdowns:1},{id:5,tkNo:"TK 6050",plateNo:"KT 8990 ZE",group:"PT ABC",noLambung:"LV70",model:"Triton GLS Premium",status:this.generateRandomStatus(30),hours:744,breakdowns:0},{id:6,tkNo:"TK 6051",plateNo:"KT 8991 ZE",group:"QVMSO",noLambung:"LV69",model:"Triton HDX",status:this.generateRandomStatus(30),hours:692,breakdowns:3},{id:7,tkNo:"TK 6052",plateNo:"KT 8992 ZE",group:"PT BAA/WAI",noLambung:"LV68",model:"Triton GLS",status:this.generateRandomStatus(30),hours:720,breakdowns:1},{id:8,tkNo:"TK 6053",plateNo:"KT 8993 ZE",group:"PT ABC",noLambung:"LV67",model:"Triton HDX facelift",status:this.generateRandomStatus(30),hours:744,breakdowns:0},{id:9,tkNo:"TK 6054",plateNo:"KT 8994 ZE",group:"MSO",noLambung:"LV66",model:"Triton GLS facelift",status:this.generateRandomStatus(30),hours:720,breakdowns:2},{id:10,tkNo:"TK 6055",plateNo:"KT 8995 ZE",group:"QUIKS",noLambung:"LV65",model:"Triton HDX",status:this.generateRandomStatus(30),hours:720,breakdowns:1}]}},computed:{currentMonth(){const s={year:"numeric",month:"long"};return this.currentDate.toLocaleDateString("en-US",s)},daysInMonth(){const s=this.currentDate.getFullYear(),t=this.currentDate.getMonth();return new Date(s,t+1,0).getDate()},groups(){return[...new Set(this.units.map(s=>s.group))]},filteredUnits(){let s=this.units;this.filter==="group"&&this.selectedGroup&&(s=s.filter(r=>r.group===this.selectedGroup));const t=(this.currentPage-1)*this.itemsPerPage,l=t+this.itemsPerPage;return s.slice(t,l)},totalPages(){return Math.ceil(this.units.length/this.itemsPerPage)},visiblePages(){const s=[];let l=Math.max(1,this.currentPage-Math.floor(1.5)),r=Math.min(this.totalPages,l+3-1);r-l+1<3&&(l=Math.max(1,r-3+1));for(let o=l;o<=r;o++)s.push(o);return s},averageHours(){return this.filteredUnits.length===0?0:this.filteredUnits.reduce((t,l)=>t+l.hours,0)/this.filteredUnits.length},totalBreakdowns(){return this.filteredUnits.reduce((s,t)=>s+t.breakdowns,0)}},methods:{generateRandomStatus(s){return Array.from({length:s},()=>Math.random()>.02?"active":"inactive")},getDayStatusClass(s,t){if(t>s.status.length)return"day-inactive";const l=s.status[t-1];return{"day-active":l==="active","day-inactive":l==="inactive","day-weekend":[0,6].includes(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),t).getDay())}},getDayStatusTitle(s,t){if(t>s.status.length)return"No data";const l=s.status[t-1]==="active"?"Active":"Inactive";return`${new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),t).toLocaleDateString("en-US",{weekday:"short"})}, ${t} ${this.currentMonth}: ${l}`},changeMonth(s){const t=new Date(this.currentDate);t.setMonth(t.getMonth()+s),this.currentDate=t,this.currentPage=1},exportToExcel(){const s=["No","TK","Plat No","Group","No. Lambung","Merek/Model",...Array.from({length:this.daysInMonth},(a,c)=>c+1),"H","BD"],t=this.filteredUnits.map((a,c)=>[c+1,a.tkNo,a.plateNo,a.group,a.noLambung,a.model,...a.status.map(f=>f==="active"?"✓":"✗"),a.hours,a.breakdowns]),l=k.book_new(),r=k.aoa_to_sheet([s,...t]);r["!cols"]||(r["!cols"]=[]),s.forEach((a,c)=>{r["!cols"][c]={width:c<6?15:8}}),k.book_append_sheet(l,r,"Timesheet");const o=`Timesheet_${this.currentDate.getFullYear()}_${this.currentDate.getMonth()+1}.xlsx`;T(l,o)}}},P={class:"mobile-month-selector"},y={class:"current-month"},V={class:"mobile-filter-controls me-2"},K={class:"filter-tabs"},A=["disabled"],x={class:"mobile-unit-list"},C={class:"unit-header"},U={class:"unit-number"},G={class:"unit-info"},B={class:"unit-tk"},R={class:"unit-plate"},E={class:"unit-hours"},F={class:"unit-details"},H={class:"detail-row"},I={class:"detail-row"},Z={class:"detail-row"},W={class:"detail-row"},X={class:"bd-count"},Y={class:"unit-calendar"},O={class:"calendar-header"},Q={class:"calendar-grid"},z=["title"],j={key:0,class:"empty-state"},q={class:"mobile-summary"},J={class:"summary-item"},$={class:"value"},tt={class:"summary-item"},et={class:"value"},st={class:"summary-item"},nt={class:"value"},at={class:"mobile-pagination"},ot=["disabled"],lt={class:"page-numbers"},it=["onClick"],rt=["disabled"],ut={class:"mobile-bottom-nav"};function dt(s,t,l,r,o,a){const c=S("router-link");return d(),u(h,null,[t[28]||(t[28]=e("div",{class:"mobile-header"},[e("div",{class:"header-title"},"Timesheet"),e("div",{class:"header-icon"},[e("i",{class:"fas fa-calendar-alt"})])],-1)),e("div",P,[e("button",{class:"month-nav",onClick:t[0]||(t[0]=n=>a.changeMonth(-1))},t[7]||(t[7]=[e("i",{class:"fas fa-chevron-left"},null,-1)])),e("div",y,i(a.currentMonth),1),e("button",{class:"month-nav",onClick:t[1]||(t[1]=n=>a.changeMonth(1))},t[8]||(t[8]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))]),e("div",V,[e("div",K,[e("button",{class:b(["filter-tab",{active:o.filter==="all"}]),onClick:t[2]||(t[2]=n=>o.filter="all"),"aria-label":"All"},t[9]||(t[9]=[e("i",{class:"bi bi-collection"},null,-1)]),2),e("button",{class:b(["filter-tab",{active:o.filter==="group"}]),onClick:t[3]||(t[3]=n=>o.filter="group"),"aria-label":"Group"},t[10]||(t[10]=[e("i",{class:"bi bi-people-fill"},null,-1)]),2)]),w(e("select",{class:"group-select","onUpdate:modelValue":t[4]||(t[4]=n=>o.selectedGroup=n),disabled:o.filter!=="group"},[t[11]||(t[11]=e("option",{value:""},"Select Group",-1)),(d(!0),u(h,null,g(a.groups,n=>(d(),u("option",{key:n},i(n),1))),128))],8,A),[[_,o.selectedGroup]])]),e("div",x,[(d(!0),u(h,null,g(a.filteredUnits,(n,f)=>(d(),u("div",{class:"unit-card",key:n.id},[e("div",C,[e("div",U,i(f+1),1),e("div",G,[e("div",B,i(n.tkNo),1),e("div",R,i(n.plateNo),1)]),e("div",E,[t[12]||(t[12]=e("i",{class:"fas fa-clock"},null,-1)),L(" "+i(n.hours)+"h ",1)])]),e("div",F,[e("div",H,[t[13]||(t[13]=e("span",null,"Group:",-1)),e("span",null,i(n.group),1)]),e("div",I,[t[14]||(t[14]=e("span",null,"No Lambung:",-1)),e("span",null,i(n.noLambung),1)]),e("div",Z,[t[15]||(t[15]=e("span",null,"Model:",-1)),e("span",null,i(n.model),1)]),e("div",W,[t[16]||(t[16]=e("span",null,"Breakdowns:",-1)),e("span",X,i(n.breakdowns),1)])]),e("div",Y,[e("div",O,[(d(!0),u(h,null,g(o.visibleDays,m=>(d(),u("span",{key:m},i(m),1))),128))]),e("div",Q,[(d(!0),u(h,null,g(a.daysInMonth,m=>(d(),u("div",{key:m,class:b(["calendar-day",a.getDayStatusClass(n,m)]),title:a.getDayStatusTitle(n,m)},i(m),11,z))),128))])]),t[17]||(t[17]=e("button",{class:"view-details-btn"},"View Details",-1))]))),128)),a.filteredUnits.length===0?(d(),u("div",j,t[18]||(t[18]=[e("i",{class:"fas fa-calendar-times"},null,-1),e("p",null,"No units found",-1)]))):N("",!0)]),e("div",q,[e("div",J,[t[19]||(t[19]=e("span",null,"Total Units:",-1)),e("span",$,i(a.filteredUnits.length),1)]),e("div",tt,[t[20]||(t[20]=e("span",null,"Avg. Hours:",-1)),e("span",et,i(a.averageHours.toFixed(1)),1)]),e("div",st,[t[21]||(t[21]=e("span",null,"Total BD:",-1)),e("span",nt,i(a.totalBreakdowns),1)])]),e("div",at,[e("button",{class:"page-btn",disabled:o.currentPage===1,onClick:t[5]||(t[5]=n=>o.currentPage--)},t[22]||(t[22]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,ot),e("div",lt,[(d(!0),u(h,null,g(a.visiblePages,n=>(d(),u("span",{key:n,class:b({active:n===o.currentPage}),onClick:f=>o.currentPage=n},i(n),11,it))),128))]),e("button",{class:"page-btn",disabled:o.currentPage===a.totalPages,onClick:t[6]||(t[6]=n=>o.currentPage++)},t[23]||(t[23]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,rt)]),e("div",ut,[v(c,{to:"/fleet/fleet-main-dashboard",class:"mobile-nav-item"},{default:p(()=>t[24]||(t[24]=[e("i",{class:"fas fa-tachometer-alt"},null,-1),e("span",null,"Dashboard",-1)])),_:1}),v(c,{to:"/fleet/timesheet",class:"mobile-nav-item active"},{default:p(()=>t[25]||(t[25]=[e("i",{class:"fas fa-calendar-alt"},null,-1),e("span",null,"Timesheet",-1)])),_:1}),v(c,{to:"/fleet/invoice",class:"mobile-nav-item"},{default:p(()=>t[26]||(t[26]=[e("i",{class:"fas fa-file-invoice"},null,-1),e("span",null,"Invoice",-1)])),_:1}),v(c,{to:"/fleet/notification",class:"mobile-nav-item"},{default:p(()=>t[27]||(t[27]=[e("i",{class:"fas fa-bell"},null,-1),e("span",null,"Alerts",-1)])),_:1})])],64)}const ht=D(M,[["render",dt],["__scopeId","data-v-b7c63473"]]);export{ht as default};
