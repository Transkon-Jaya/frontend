import{_ as Y,u as Z,r as p,o as ee,n as E,c as n,a as e,q as h,h as f,t as u,F as m,j as c,b as d,k as b,z as V,s as le,v as $,p as L,A as P,I as ae,g as o}from"./index-DXsdJseN.js";const te={class:"card border-0 shadow-sm"},se={class:"card-header"},ne={class:"d-flex justify-content-between align-items-center"},oe=["disabled"],ie={class:"card-body"},ue={key:0,class:"alert alert-danger alert-dismissible fade show"},re={key:1,class:"text-center py-5"},de={key:2,class:"table-responsive"},ve={class:"table table-hover table-striped table-bordered mb-0"},me={class:"table-dark"},ce=["onUpdate:modelValue","placeholder"],pe={key:0},be=["colspan"],fe={class:"text-center"},ge=["onClick"],ke={class:"text-center"},ye={class:"text-center"},_e={class:"text-center"},we={class:"text-center"},xe={class:"text-center"},Se={class:"text-center"},he={class:"text-center"},Ce={class:"btn-group btn-group-sm",role:"group"},Ue=["onClick"],Be=["onClick"],Ve={class:"d-flex flex-wrap justify-content-between align-items-center mt-3"},$e={class:"d-flex align-items-center mb-2"},Le=["value"],Pe={class:"text-muted"},je={"aria-label":"Page navigation"},De={class:"pagination pagination-sm mb-0"},Ee={class:"page-item disabled"},Ie={class:"page-link"},Ne={key:0,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},Ae={class:"modal-dialog modal-dialog-centered modal-lg"},qe={class:"modal-content border-0 shadow"},Ke={class:"modal-header bg-danger text-white"},Oe={class:"modal-title"},Te={class:"modal-body"},Fe={class:"row g-3"},Me={class:"col-md-6"},Re=["disabled"],ze={class:"col-md-6"},He={class:"col-md-6"},Je={class:"col-md-6"},Ge={class:"col-md-6"},Qe=["value"],We={class:"col-md-6"},Xe=["value"],Ye={class:"col-md-6"},Ze=["value"],el={class:"col-md-6"},ll=["value"],al={class:"col-md-6"},tl=["value"],sl={class:"col-md-6"},nl=["value"],ol={class:"col-md-6"},il=["value"],ul={class:"col-md-6"},rl=["value"],dl={class:"col-md-6"},vl=["value"],ml={class:"col-md-6"},cl=["value"],pl={class:"col-md-6"},bl=["value"],fl={class:"col-md-6"},gl=["value"],kl={class:"modal-footer border-top-0 mt-3"},yl={type:"submit",class:"btn btn-danger"},_l={key:1,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},wl={class:"modal-dialog modal-dialog-centered"},xl={class:"modal-content border-0 shadow"},Sl={class:"modal-body"},hl={__name:"Employee",setup(Cl){const I=Z(),T=ae(),v=p([]),t=p({departments:[],jabatan:[],placements:[],genders:["L","P"],locations:[],hub_placement:[],status:[],divisi:[],section:[],kepegawaian:[],klasifikasi:[],salary_code:[],id_company:[],site:[]}),C=p(!0),k=p(null),F=p(0),U=p(!1),y=p(!1),s=p({}),M=p(-1),S=p(!1),x=p(null),_=p({username:"",name:"",department:"",jabatan:"",placement:"",gender:"",lokasi:""}),w=p(10),g=p(1),R=[10,20,50,{value:-1,text:"All"}],N=[{text:"Id  ",value:"username",align:"center",sortable:!0,filterable:!0},{text:"Nama",value:"name",align:"center",sortable:!0,filterable:!0},{text:"Departemen",value:"department",align:"center",sortable:!0,filterable:!0},{text:"Position",value:"jabatan",align:"center",sortable:!0,filterable:!0},{text:"Penempatan",value:"placement",align:"center",sortable:!0,filterable:!0},{text:"Gender",value:"gender",align:"center",sortable:!0,filterable:!0},{text:"Lokasi",value:"lokasi",align:"center",sortable:!0,filterable:!0},{text:"Actions",value:"actions",align:"center",sortable:!1,filterable:!1}],j=async()=>{var r,l;try{C.value=!0;const a=await L.get(`${P}/users`,{headers:{Authorization:`Bearer ${I.token}`}});v.value=a.data,F.value=v.value.length,t.value.departments=[...new Set(v.value.map(i=>i.department).filter(Boolean))],t.value.jabatan=[...new Set(v.value.map(i=>i.jabatan).filter(Boolean))],t.value.placements=[...new Set(v.value.map(i=>i.placement).filter(Boolean))],t.value.locations=[...new Set(v.value.map(i=>i.lokasi).filter(Boolean))],t.value.site=[...new Set(v.value.map(i=>i.site).filter(Boolean))],t.value.hub_placement=[...new Set(v.value.map(i=>i.hub_placement).filter(Boolean))],t.value.status=[...new Set(v.value.map(i=>i.status).filter(Boolean))],t.value.divisi=[...new Set(v.value.map(i=>i.divisi).filter(Boolean))],t.value.section=[...new Set(v.value.map(i=>i.section).filter(Boolean))],t.value.kepegawaian=[...new Set(v.value.map(i=>i.kepegawaian).filter(Boolean))],t.value.klasifikasi=[...new Set(v.value.map(i=>i.klasifikasi).filter(Boolean))],t.value.salary_code=[...new Set(v.value.map(i=>i.salary_code).filter(Boolean))],t.value.id_company=[...new Set(v.value.map(i=>i.id_company).filter(Boolean))],C.value=!1}catch(a){k.value=((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message,C.value=!1}};ee(async()=>{await j()});const B=E(()=>v.value.filter(r=>Object.keys(_.value).every(l=>_.value[l]?String(r[l]).toLowerCase().includes(_.value[l].toLowerCase()):!0))),D=E(()=>{if(w.value===-1)return B.value;const r=(g.value-1)*w.value,l=r+w.value;return B.value.slice(r,l)}),A=E(()=>w.value===-1?1:Math.ceil(B.value.length/w.value)),z=()=>{s.value={username:"",name:"",dob:"",placement:t.value.placements[0]||"",gender:t.value.genders[0]||"L",lokasi:t.value.locations[0]||"",hub_placement:t.value.hub_placement[0]||"",status:t.value.status[0]||"",department:t.value.departments[0]||"",divisi:t.value.divisi[0]||"",section:t.value.section[0]||"",kepegawaian:t.value.kepegawaian[0]||"",klasifikasi:t.value.klasifikasi[0]||"",salary_code:t.value.salary_code[0]||"",id_company:t.value.id_company[0]||"",site:t.value.site[0]||""},y.value=!0},H=r=>{M.value=v.value.findIndex(l=>l.username===r.username),s.value=JSON.parse(JSON.stringify(r)),U.value=!0},J=async()=>{var r,l;try{const a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.token}`}};y.value?(await L.post(`${P}/users`,s.value,a),y.value=!1):(await L.put(`${P}/users`,s.value,a),U.value=!1),s.value={},await j()}catch(a){a.response?k.value=`Error ${a.response.status}: ${((r=a.response.data)==null?void 0:r.error)||((l=a.response.data)==null?void 0:l.message)||a.message}`:a.request?k.value="No response received from server.":k.value=`Request Error: ${a.message}`,console.error("CRUD Error:",a)}},G=r=>{x.value=r,S.value=!0},Q=async()=>{var r,l;try{await L.delete(`${P}/users?username=${x.value.username}`),S.value=!1,x.value=null,await j()}catch(a){k.value=((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message,S.value=!1}},q=()=>{S.value=!1,x.value=null},K=()=>{U.value=!1,y.value=!1,s.value={}},W=r=>{T.push({name:"hr-absensi-detail",params:{username:r}})},X=()=>{Object.keys(_.value).forEach(r=>{_.value[r]=""}),g.value=1};return(r,l)=>(o(),n("div",te,[e("div",se,[e("div",ne,[l[24]||(l[24]=e("h3",{class:"mb-0"},"List Karyawan",-1)),e("div",null,[e("button",{onClick:X,class:"btn btn-sm btn-light me-2",disabled:!Object.values(_.value).some(Boolean)},l[22]||(l[22]=[e("i",{class:"fas fa-filter-circle-xmark me-1"},null,-1),f(" Reset Filters ")]),8,oe),e("button",{onClick:z,class:"btn btn-sm btn-danger"},l[23]||(l[23]=[e("i",{class:"fas fa-plus me-1"},null,-1),f(" Add New ")]))])])]),e("div",ie,[k.value?(o(),n("div",ue,[f(u(k.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=a=>k.value=null)})])):h("",!0),C.value?(o(),n("div",re,l[25]||(l[25]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-2"},"Loading data...",-1)]))):(o(),n("div",de,[e("table",ve,[e("thead",me,[e("tr",null,[(o(),n(m,null,c(N,a=>e("th",{key:a.value,class:V(["text-center",{"filter-cell":a.filterable}])},[e("div",null,u(a.text),1),a.filterable?d((o(),n("input",{key:0,"onUpdate:modelValue":i=>_.value[a.value]=i,type:"text",class:"form-control form-control-sm mt-1 text-center",placeholder:`Filter ${a.text}`,onInput:l[1]||(l[1]=i=>g.value=1)},null,40,ce)),[[$,_.value[a.value]]]):h("",!0)],2)),64))])]),e("tbody",null,[D.value.length===0?(o(),n("tr",pe,[e("td",{colspan:N.length,class:"text-center py-4"},"No data available",8,be)])):h("",!0),(o(!0),n(m,null,c(D.value,(a,i)=>(o(),n("tr",{key:i,class:"align-middle"},[e("td",fe,[e("a",{href:"javascript:void(0)",onClick:O=>W(a.username),class:"text-primary fw-semibold"},u(a.username),9,ge)]),e("td",ke,u(a.name),1),e("td",ye,u(a.department),1),e("td",_e,u(a.jabatan),1),e("td",we,u(a.placement),1),e("td",xe,[e("span",{class:V(["badge",a.gender==="L"?"bg-info":"bg-danger"])},u(a.gender==="L"?"Laki-laki":"Perempuan"),3)]),e("td",Se,u(a.lokasi),1),e("td",he,[e("div",Ce,[e("button",{onClick:O=>H(a),class:"btn btn-warning",title:"Edit"},l[26]||(l[26]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ue),e("button",{onClick:O=>G(a),class:"btn btn-danger",title:"Delete"},l[27]||(l[27]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Be)])])]))),128))])])])),e("div",Ve,[e("div",$e,[d(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>w.value=a),class:"form-select form-select-sm me-2",style:{width:"90px"},onChange:l[3]||(l[3]=a=>g.value=1)},[(o(),n(m,null,c(R,a=>e("option",{key:a.value||a,value:a.value||a},u(a.text||a),9,Le)),64))],544),[[b,w.value]]),e("small",Pe," Showing "+u(D.value.length)+" of "+u(B.value.length)+" entries ",1)]),e("nav",je,[e("ul",De,[e("li",{class:V(["page-item",{disabled:g.value===1}])},[e("button",{class:"page-link",onClick:l[4]||(l[4]=a=>g.value--)},l[28]||(l[28]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))],2),e("li",Ee,[e("span",Ie,"Page "+u(g.value)+" of "+u(A.value),1)]),e("li",{class:V(["page-item",{disabled:g.value===A.value}])},[e("button",{class:"page-link",onClick:l[5]||(l[5]=a=>g.value++)},l[29]||(l[29]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])]),U.value||y.value?(o(),n("div",Ne,[e("div",Ae,[e("div",qe,[e("div",Ke,[e("h5",Oe,u(y.value?"Tambah Karyawan Baru":"Edit Karyawan"),1),e("button",{type:"button",class:"btn-close btn-close-white",onClick:K})]),e("div",Te,[e("form",{onSubmit:le(J,["prevent"])},[e("div",Fe,[e("div",Me,[l[30]||(l[30]=e("label",{class:"form-label"},[f("NIK "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.username=a),type:"text",class:"form-control",disabled:!y.value,required:""},null,8,Re),[[$,s.value.username]])]),e("div",ze,[l[31]||(l[31]=e("label",{class:"form-label"},[f("Nama "),e("span",{class:"text-danger"},"*")],-1)),d(e("input",{"onUpdate:modelValue":l[7]||(l[7]=a=>s.value.name=a),type:"text",class:"form-control",required:""},null,512),[[$,s.value.name]])]),e("div",He,[l[32]||(l[32]=e("label",{class:"form-label"},"Tanggal Lahir",-1)),d(e("input",{"onUpdate:modelValue":l[8]||(l[8]=a=>s.value.dob=a),type:"date",class:"form-control"},null,512),[[$,s.value.dob]])]),e("div",Je,[l[34]||(l[34]=e("label",{class:"form-label"},"Gender",-1)),d(e("select",{"onUpdate:modelValue":l[9]||(l[9]=a=>s.value.gender=a),class:"form-select",required:""},l[33]||(l[33]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)]),512),[[b,s.value.gender]])]),e("div",Ge,[l[35]||(l[35]=e("label",{class:"form-label"},"Departemen",-1)),d(e("select",{"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.department=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.departments,a=>(o(),n("option",{value:a},u(a),9,Qe))),256))],512),[[b,s.value.department]])]),e("div",We,[l[36]||(l[36]=e("label",{class:"form-label"},"Jabatan",-1)),d(e("select",{"onUpdate:modelValue":l[11]||(l[11]=a=>s.value.jabatan=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.jabatan,a=>(o(),n("option",{value:a},u(a),9,Xe))),256))],512),[[b,s.value.jabatan]])]),e("div",Ye,[l[37]||(l[37]=e("label",{class:"form-label"},"Penempatan",-1)),d(e("select",{"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.placement=a),class:"form-select",required:""},[(o(!0),n(m,null,c(t.value.placements,a=>(o(),n("option",{value:a},u(a),9,Ze))),256))],512),[[b,s.value.placement]])]),e("div",el,[l[39]||(l[39]=e("label",{class:"form-label"},"Lokasi",-1)),d(e("select",{"onUpdate:modelValue":l[13]||(l[13]=a=>s.value.lokasi=a),class:"form-select"},[l[38]||(l[38]=e("option",{value:""},"Pilih Lokasi",-1)),(o(!0),n(m,null,c(t.value.locations,a=>(o(),n("option",{value:a},u(a),9,ll))),256))],512),[[b,s.value.lokasi]])]),e("div",al,[l[40]||(l[40]=e("label",{class:"form-label"},"Hub",-1)),d(e("select",{"onUpdate:modelValue":l[14]||(l[14]=a=>s.value.hub_placement=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.hub_placement,a=>(o(),n("option",{value:a},u(a),9,tl))),256))],512),[[b,s.value.hub_placement]])]),e("div",sl,[l[41]||(l[41]=e("label",{class:"form-label"},"Status",-1)),d(e("select",{"onUpdate:modelValue":l[15]||(l[15]=a=>s.value.status=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.status,a=>(o(),n("option",{value:a},u(a),9,nl))),256))],512),[[b,s.value.status]])]),e("div",ol,[l[42]||(l[42]=e("label",{class:"form-label"},"Divisi",-1)),d(e("select",{"onUpdate:modelValue":l[16]||(l[16]=a=>s.value.divisi=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.divisi,a=>(o(),n("option",{value:a},u(a),9,il))),256))],512),[[b,s.value.divisi]])]),e("div",ul,[l[43]||(l[43]=e("label",{class:"form-label"},"Section",-1)),d(e("select",{"onUpdate:modelValue":l[17]||(l[17]=a=>s.value.section=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.section,a=>(o(),n("option",{value:a},u(a),9,rl))),256))],512),[[b,s.value.section]])]),e("div",dl,[l[44]||(l[44]=e("label",{class:"form-label"},"Kepegawaian",-1)),d(e("select",{"onUpdate:modelValue":l[18]||(l[18]=a=>s.value.kepegawaian=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.kepegawaian,a=>(o(),n("option",{value:a},u(a),9,vl))),256))],512),[[b,s.value.kepegawaian]])]),e("div",ml,[l[45]||(l[45]=e("label",{class:"form-label"},"Klasifikasi",-1)),d(e("select",{"onUpdate:modelValue":l[19]||(l[19]=a=>s.value.klasifikasi=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.klasifikasi,a=>(o(),n("option",{value:a},u(a),9,cl))),256))],512),[[b,s.value.klasifikasi]])]),e("div",pl,[l[46]||(l[46]=e("label",{class:"form-label"},"Salary Code",-1)),d(e("select",{"onUpdate:modelValue":l[20]||(l[20]=a=>s.value.salary_code=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.salary_code,a=>(o(),n("option",{value:a},u(a),9,bl))),256))],512),[[b,s.value.salary_code]])]),e("div",fl,[l[47]||(l[47]=e("label",{class:"form-label"},"ID Perusahaan",-1)),d(e("select",{"onUpdate:modelValue":l[21]||(l[21]=a=>s.value.id_company=a),class:"form-select"},[(o(!0),n(m,null,c(t.value.id_company,a=>(o(),n("option",{value:a},u(a),9,gl))),256))],512),[[b,s.value.id_company]])])]),e("div",kl,[e("button",{type:"button",class:"btn btn-secondary",onClick:K},l[48]||(l[48]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Cancel ")])),e("button",yl,[l[49]||(l[49]=e("i",{class:"fas fa-save me-1"},null,-1)),f(" "+u(y.value?"Simpan":"Update"),1)])])],32)])])])])):h("",!0),S.value?(o(),n("div",_l,[e("div",wl,[e("div",xl,[e("div",{class:"modal-header bg-danger text-white"},[l[50]||(l[50]=e("h5",{class:"modal-title"},"Konfirmasi Hapus",-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:q})]),e("div",Sl,[l[53]||(l[53]=e("p",null,"Apakah Anda yakin ingin menghapus karyawan ini?",-1)),e("p",null,[l[51]||(l[51]=e("strong",null,"NIK:",-1)),f(" "+u(x.value.username),1)]),e("p",null,[l[52]||(l[52]=e("strong",null,"Nama:",-1)),f(" "+u(x.value.name),1)]),l[54]||(l[54]=e("p",{class:"text-danger"},"Data yang dihapus tidak dapat dikembalikan!",-1))]),e("div",{class:"modal-footer border-top-0"},[e("button",{type:"button",class:"btn btn-secondary",onClick:q},l[55]||(l[55]=[e("i",{class:"fas fa-times me-1"},null,-1),f(" Batal ")])),e("button",{type:"button",class:"btn btn-danger",onClick:Q},l[56]||(l[56]=[e("i",{class:"fas fa-trash-alt me-1"},null,-1),f(" Hapus ")]))])])])])):h("",!0)]))}},Bl=Y(hl,[["__scopeId","data-v-4a64f640"]]);export{Bl as default};
