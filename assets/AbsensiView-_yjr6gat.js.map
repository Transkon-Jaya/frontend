{"version":3,"file":"AbsensiView-_yjr6gat.js","sources":["../../src/components/ImageModal.vue","../../src/views/absensi/AbsensiView.vue"],"sourcesContent":["<template>\r\n    <div\r\n      v-if=\"showModal\"\r\n      class=\"modal fade show\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-labelledby=\"imageModalLabel\"\r\n      style=\"display: block;\"\r\n      aria-hidden=\"false\"\r\n      @click.self=\"closeModal\"\r\n    >\r\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\" @click.stop>\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"imageModalLabel\">{{ imageTitle }}</h5>\r\n            <button type=\"button\" class=\"close\" @click=\"closeModal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <img :src=\"imageSrc\" alt=\"Image Preview\" class=\"img-fluid\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    props: {\r\n      imageSrc: {\r\n        type: String,\r\n        required: true\r\n      },\r\n      imageTitle: {\r\n        type: String,\r\n        default: 'Image Preview'\r\n      },\r\n      showModal: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    methods: {\r\n      closeModal() {\r\n        this.$emit('close');\r\n      },\r\n      handleKeydown(e) {\r\n        if (e.key === 'Escape') {\r\n          this.closeModal();\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      window.addEventListener('keydown', this.handleKeydown);\r\n    },\r\n    beforeUnmount() {\r\n      window.removeEventListener('keydown', this.handleKeydown);\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .modal {\r\n    display: block;\r\n    z-index: 1050;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n  .modal-dialog {\r\n    max-width: 90%;\r\n    width: auto;\r\n  }\r\n  \r\n  .modal-body {\r\n    padding: 0;\r\n    text-align: center;\r\n  }\r\n  \r\n  img {\r\n    max-width: 100%;\r\n    max-height: 70vh;\r\n  }\r\n  </style>\r\n  ","<script setup>\r\nimport { onMounted, ref, computed } from \"vue\";\r\nimport ImageModal from '@/components/ImageModal.vue';\r\nimport axios from \"axios\";\r\nimport { useUserStore } from \"@/stores/user\";\r\nimport { log } from \"@/utils/logger\";\r\n\r\nconst userData = useUserStore();\r\n\r\nconst fileInput = ref(null);\r\nconst default_str = [\"Mengambil Data...\", \"Izin Ditolak\", \"Gagal Memuat\"];\r\nconst ipData = ref({ ipv4: default_str[0], ipv6: default_str[0] });\r\nconst gpsLocation = ref({ lat: default_str[0], lon: default_str[0] });\r\nconst ipLocation = ref({ city: default_str[0], country: default_str[0], lat: \"\", lon: \"\" });\r\nconst gpsMapUrl = ref(\"\");\r\nconst ipMapUrl = ref(\"\");\r\nconst attendanceRecorded = ref(false);\r\nconst selectedLocation = ref(\"\");\r\nconst locations = ref([]);\r\nconst absensiStatusArray = ref([]);\r\nconst isLoadingAbsensiStatus = ref(true);\r\nconst showModal = ref(false);\r\nconst imageSrc = ref('');\r\nconst ZOOM_LEVEL = 12;\r\n\r\nconst dataLoaded = computed(() => {\r\n  return ![\r\n    gpsLocation.value.lat,\r\n    gpsLocation.value.lon,\r\n    ipData.value.ipv4\r\n  ].some(val => default_str.includes(val));\r\n});\r\n\r\nconst tooFar = computed(() => {\r\n  return (selectedLocation.value?.distance ?? 99999) > 1000;\r\n});\r\n\r\nconst absensiStatus = computed(() => {\r\n  const latest = absensiStatusArray.value[0];\r\n  if (!latest) return \"IN\";\r\n  const hourIn = latest.hour_in ? new Date(latest.hour_in) : null;\r\n  const now = new Date();\r\n  const timeDiffHours = hourIn ? (now - hourIn) / (1000 * 60 * 60) : null;\r\n  if (latest.hour_out && timeDiffHours >= 16 || timeDiffHours >= 16) {\r\n    return \"IN\";\r\n  }\r\n  if (!latest.hour_out || latest.hour_out === \"00:00:00\") {\r\n    return \"OUT\";\r\n  }\r\n  return \"DONE\";\r\n});\r\n\r\nconst fetchAbsensiStatus = async () => {\r\n  const responseStatus = await fetch(`${userData.apiBaseUrl}/absensi-status?username=${userData.username}`);\r\n  absensiStatusArray.value = await responseStatus.json();\r\n  if (absensiStatusArray.value.length > 0) {\r\n    absensiStatusArray.value[0].foto_in = `${userData.baseUrl}/uploads/absensi/${absensiStatusArray.value[0].foto_in}`;\r\n    absensiStatusArray.value[0].foto_out = `${userData.baseUrl}/uploads/absensi/${absensiStatusArray.value[0].foto_out}`;\r\n  }\r\n  isLoadingAbsensiStatus.value = false;\r\n};\r\n\r\nconst fetchGPSLocation = () => {\r\n  return new Promise((resolve) => {\r\n    if (\"geolocation\" in navigator) {\r\n      try {\r\n        navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            gpsLocation.value.lat = position.coords.latitude.toFixed(6);\r\n            gpsLocation.value.lon = position.coords.longitude.toFixed(6);\r\n            gpsMapUrl.value = `https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${gpsLocation.value.lon},${gpsLocation.value.lat}&size=450,300&z=${ZOOM_LEVEL}&l=map&pt=${gpsLocation.value.lon},${gpsLocation.value.lat},pm2rdm`;\r\n            resolve(true);\r\n          },\r\n          (error) => {\r\n            console.warn(\"❌ Geolocation permission denied or error:\", error.message);\r\n            gpsLocation.value.lat = default_str[1];\r\n            gpsLocation.value.lon = default_str[1];\r\n            resolve(false);\r\n          },\r\n          {\r\n            enableHighAccuracy: true,\r\n            timeout: 5000,\r\n            maximumAge: 0,\r\n          }\r\n        );\r\n      } catch (err) {\r\n        console.error(\"❌ Unexpected GPS error:\", err);\r\n        gpsLocation.value.lat = default_str[2];\r\n        gpsLocation.value.lon = default_str[2];\r\n        resolve(false);\r\n      }\r\n    } else {\r\n      gpsLocation.value.lat = default_str[2];\r\n      gpsLocation.value.lon = default_str[2];\r\n      resolve(false);\r\n    }\r\n  });\r\n};\r\n\r\nfunction getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\r\n  const R = 6371;\r\n  const dLat = (lat2 - lat1) * Math.PI / 180;\r\n  const dLon = (lon2 - lon1) * Math.PI / 180;\r\n  const a =\r\n    Math.sin(dLat / 2) ** 2 +\r\n    Math.cos(lat1 * Math.PI / 180) *\r\n    Math.cos(lat2 * Math.PI / 180) *\r\n    Math.sin(dLon / 2) ** 2;\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  const distance = R * c * 1000; // meter\r\n  return isNaN(distance) ? 0 : distance.toFixed(2);\r\n}\r\n\r\nconst fetchLokasi = async () => {\r\n  const responseLokasi = await axios.get(`${userData.apiBaseUrl}/hr-lokasi`);\r\n  locations.value = responseLokasi.data.map((item) => {\r\n    const lat = item.latitude ?? null;\r\n    const lon = item.longitude ?? null;\r\n    const distance = (lat !== null && lon !== null && gpsLocation.value.lat && gpsLocation.value.lon)\r\n      ? getDistanceFromLatLonInKm(gpsLocation.value.lat, gpsLocation.value.lon, lat, lon)\r\n      : Infinity;\r\n    return { nama: item.nama ?? \"\", lat, lon, distance };\r\n  });\r\n\r\n  locations.value.sort((a, b) => a.distance - b.distance);\r\n  if (locations.value.length > 0) {\r\n    selectedLocation.value = locations.value[0];\r\n  }\r\n};\r\n\r\nconst fetchIp = async () => {\r\n  try {\r\n    const responseIPv4 = await axios.get(\"https://www.transkon-rent.com/api/ip\");\r\n    ipData.value.ipv4 = responseIPv4.data.ip;\r\n    // console.log(responseIPv4.data);\r\n  } catch (error) {\r\n    console.error(\"Error fetching IP:\", error);\r\n    ipData.value.ipv4 = default_str[2];\r\n  }\r\n};\r\n\r\nconst fetchIPLocation = async () => {\r\n  try {\r\n    const response = await fetch(\"http://ip-api.com/json/\");\r\n    const data = await response.json();\r\n    ipLocation.value = {\r\n      city: data.city || \"Tidak diketahui\",\r\n      country: data.country || \"Tidak diketahui\",\r\n      lat: data.lat ? data.lat.toFixed(6) : \"\",\r\n      lon: data.lon ? data.lon.toFixed(6) : \"\",\r\n    };\r\n    if (data.lon && data.lat) {\r\n      ipMapUrl.value = `https://static-maps.yandex.ru/1.x/?lang=en-US&ll=${data.lon},${data.lat}&size=450,300&z=${ZOOM_LEVEL}&l=map&pt=${data.lon},${data.lat},pm2rdm`;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching IP geolocation:\", error);\r\n    ipLocation.value.city = \"Gagal memuat\";\r\n    ipLocation.value.country = \"Gagal memuat\";\r\n  }\r\n};\r\n\r\nconst openModal = (src) => {\r\n  imageSrc.value = src;\r\n  showModal.value = true;\r\n};\r\n\r\nconst closeModal = () => {\r\n  showModal.value = false;\r\n};\r\n\r\nconst openCamera = () => {\r\n  if (!selectedLocation.value) {\r\n    alert(\"Silakan pilih lokasi absen terlebih dahulu!\");\r\n    return;\r\n  }\r\n  document.getElementById(\"cameraInput\").click();\r\n};\r\n\r\nconst getDeviceInfo = () => {\r\n  const dimension = `${window.innerWidth}x${window.innerHeight}`;\r\n  const userAgent = navigator.userAgent;\r\n\r\n  const match = userAgent.match(/\\(([^)]+)\\)/);\r\n  let device = match ? match[1] : `?${userAgent}`;\r\n\r\n  // Cut if too long (safe for VARCHAR(255))\r\n  if (device.length > 250) {\r\n    device = device.substring(0, 250);\r\n  }\r\n\r\n  return {\r\n    dimension,\r\n    device\r\n  };\r\n};\r\n\r\n\r\nconst handlePhoto = async (event) => {\r\n  const file = event.target.files[0];\r\n  if (!file) return;\r\n  try {\r\n    const {dimension, device} = getDeviceInfo();\r\n    const formData = new FormData();\r\n    formData.append(\"foto\", file);\r\n    formData.append(\"id\", absensiStatus.value == \"IN\" ? null : absensiStatusArray.value[0].id);\r\n    formData.append(\"status\", absensiStatus.value);\r\n    formData.append(\"username\", userData.username);\r\n    formData.append(\"lokasi\", selectedLocation.value.nama);\r\n    formData.append(\"jarak\", selectedLocation.value.distance);\r\n    formData.append(\"long\", gpsLocation.value.lon);\r\n    formData.append(\"lang\", gpsLocation.value.lat);\r\n    formData.append(\"ip\", ipData.value.ipv4);\r\n    // log(\"Device Info : \", {dim: dimension, device: device});\r\n    formData.append(\"dim\", dimension);\r\n    formData.append(\"device\", device);\r\n\r\n    const response = await axios.post(\"https://www.transkon-rent.com/api/absensi\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      }\r\n    });\r\n\r\n    const result = response.data;\r\n    if (result.status === \"success\") {\r\n      attendanceRecorded.value = true;\r\n      window.location.reload();\r\n    } else {\r\n      console.error(\"Attendance failed:\", result.message);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Upload error:\", err);\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  try {\r\n    console.log(\"1. Meminta izin GPS...\");\r\n    const gpsSuccess = await fetchGPSLocation();\r\n    if (!gpsSuccess) {\r\n      console.warn(\"⚠️ Lokasi gagal dimuat. Melanjutkan tanpa GPS...\");\r\n    }\r\n    await Promise.all([\r\n      fetchLokasi(),\r\n      fetchIp(),\r\n      fetchAbsensiStatus()\r\n    ]);\r\n    console.log(\"✅ Semua data berhasil dimuat.\");\r\n  } catch (err) {\r\n    console.error(\"💥 Unhandled error in onMounted:\", err);\r\n  }\r\n});\r\nfunction formatDate(dateString) {\r\n  const months = [\r\n    \"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\",\r\n    \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"\r\n  ];\r\n\r\n  const date = new Date(dateString);\r\n  const day = date.getDate();\r\n  const month = months[date.getMonth()];\r\n  const year = date.getFullYear();\r\n  \r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n  const seconds = String(date.getSeconds()).padStart(2, '0');\r\n\r\n  return `${day} ${month} ${year} ${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"app-container\">\r\n    <!-- Main Content -->\r\n    <main class=\"main-content\">\r\n      <h1 class=\"app-title\">Absensi Karyawan</h1>\r\n      <p class=\"app-subtitle\"></p>\r\n      <!-- Attendance Form -->\r\n      <div class=\"container-global attendance-card\">\r\n        <div class=\"form-group\">\r\n          <!-- <label for=\"location\" class=\"form-label\">Lokasi Absensi</label>\r\n          <select v-model=\"selectedLocation\" id=\"location\" class=\"form-select\">\r\n            <option value=\"\" disabled selected>Loading...</option>\r\n            <option v-for=\"(location, index) in locations\" :key=\"index\" :value=\"location\">\r\n              {{ location.nama }}\r\n            </option>\r\n          </select> -->\r\n          <p v-if=\"locations.length > 0\" id=\"location\" class=\"form-control-plaintext\">\r\n            {{ locations[0].nama }}\r\n            <!-- {{ userData.baseUrl + absensiStatusArray[0].foto_in }} -->\r\n          </p>\r\n          <p v-else class=\"form-control-plaintext text-muted\">Loading location...</p>\r\n        </div>\r\n        <div class=\"mb-4\" v-if=\"absensiStatus === 'OUT' || absensiStatus === 'DONE'\">\r\n          <div>{{ formatDate(absensiStatusArray[0].hour_in) }}</div>\r\n          <VButton @click=\"openModal(absensiStatusArray[0].foto_in)\" class=\"btn btn-danger\">Photo In</VButton>\r\n          <ImageModal\r\n            :imageSrc=\"imageSrc\"\r\n            :showModal=\"showModal\"\r\n            @close=\"closeModal\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"mb-4\" v-if=\"absensiStatus === 'DONE'\">\r\n          <div>{{ formatDate(absensiStatusArray[0]?.hour_out) }}</div>\r\n          <VButton @click=\"openModal(absensiStatusArray[0].foto_out)\" class=\"btn btn-danger\">Photo Out</VButton>\r\n          <ImageModal\r\n            :imageSrc=\"imageSrc\"\r\n            :showModal=\"showModal\"\r\n            @close=\"closeModal\"\r\n          />\r\n        </div>\r\n        <!-- Attendance Button -->\r\n        <div class=\"action-group\">\r\n          <input type=\"file\" accept=\"image/*\" capture=\"environment\" @change=\"handlePhoto\" id=\"cameraInput\" style=\"display: none;\" />\r\n            <Button \r\n              @click=\"openCamera\"\r\n              class=\"primary-btn\" \r\n              :disabled=\"!selectedLocation || absensiStatus === 'DONE' || isLoadingAbsensiStatus || !dataLoaded || tooFar\"\r\n            >\r\n              <i class=\"fa-solid fa-camera\"></i>\r\n              <span v-if=\"isLoadingAbsensiStatus\">Loading...</span>\r\n              <span v-else-if=\"!dataLoaded\">Gagal Memuat</span>\r\n              <span v-else-if=\"tooFar\">Anda Diluar Zona Absensi</span>\r\n              <span v-else>{{ absensiStatus === 'DONE' ? 'Sudah Absen' : absensiStatus === 'OUT' ? 'Absen OUT' : 'Absen IN' }}</span>          \r\n            </Button>\r\n        </div>\r\n\r\n        <!-- Attendance Confirmation -->\r\n        <div v-if=\"attendanceRecorded\" class=\"confirmation-message\">\r\n          <i class=\"fa-solid fa-check-circle success-icon\"></i>\r\n          <span>Absensi berhasil direkam!</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Announcement Section -->\r\n      <div class=\"container-global announcement-card\">\r\n        <div class=\"announcement-header\">\r\n          <i class=\"fa-solid fa-bullhorn announcement-icon\"></i>\r\n          <h3>TRJA Memo</h3>\r\n        </div>\r\n        <div class=\"announcement-content\">\r\n          <img src=\"/src/assets/images/avatars/eid.jpg\" \r\n               alt=\"Gambar Lebaran\" \r\n               class=\"announcement-image\" />\r\n          <p class=\"announcement-text\">Selamat Hari Raya Idul Fitri 1445 H</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Location Information -->\r\n      <div class=\"container-global info-section-edit\">\r\n        <!-- GPS Info -->\r\n        <div class=\"info-card\">\r\n          <div class=\"info-header\">\r\n            <i class=\"fa-solid fa-map-marker-alt\"></i>\r\n            <h4>Lokasi GPS Anda</h4>\r\n          </div>\r\n          <div class=\"info-content\">\r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Latitude:</span>\r\n              <span class=\"info-value\">{{ gpsLocation.lat }}</span>\r\n            </div>\r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Longitude:</span>\r\n              <span class=\"info-value\">{{ gpsLocation.lon }}</span>\r\n            </div>\r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Jarak:</span>\r\n              <span v-if=\"locations.length > 0\" class=\"info-value\">\r\n                {{ locations[0].distance + \" Meter\" }}\r\n              </span>\r\n              <span v-else class=\"info-value text-muted\">\r\n                Menghitung Jarak..\r\n              </span>\r\n            </div>\r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">IPv4:</span>\r\n              <span class=\"info-value\">{{ ipData.ipv4 }}</span>\r\n            </div>\r\n            <!-- <div class=\"info-row\">\r\n              <span class=\"info-label\">IPv6:</span>\r\n              <span class=\"info-value\">{{ ipData.ipv6 }}</span>\r\n            </div> -->\r\n            <img :src=\"gpsMapUrl\" alt=\"GPS Map\" v-if=\"gpsMapUrl\" class=\"map-image\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n\r\n<style>\r\n/* Import Font Awesome CSS */\r\n@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');\r\n\r\n\r\n\r\nbody {\r\n            margin: 0;\r\n            padding: 0;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            min-height: 100vh;\r\n            font-family: Arial, sans-serif;\r\n        }\r\n        \r\n        .main-content {\r\n            text-align: center;\r\n        }\r\n        \r\n        .app-title {\r\n            font-size: 2.5rem;\r\n            margin-bottom: 0.5rem;\r\n\r\n        }\r\n        \r\n        .app-subtitle {\r\n            font-size: 1.5rem;\r\n            margin-top: 0;\r\n        }\r\n/* Base Styles */\r\n:root {\r\n  --primary-color: #3498db;\r\n  --secondary-color: #2980b9;\r\n  --success-color: #2ecc71;\r\n  --danger-color: #e74c3c;\r\n  --warning-color: #f39c12;\r\n  --light-color: #ecf0f1;\r\n  --dark-color: #2c3e50;\r\n  --text-color: #333;\r\n  --text-light: #7f8c8d;\r\n  --border-radius: 8px;\r\n  --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  --transition: all 0.3s ease;\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nbody {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  line-height: 1.6;\r\n  color: var(--text-color);\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.hidden-input {\r\n  display: none;\r\n}\r\n\r\n/* Layout */\r\n.app-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  max-width: 100%;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding: 1rem;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n}\r\n\r\n/* Header */\r\n.app-header {\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  padding: 1.5rem 1rem;\r\n  text-align: center;\r\n  box-shadow: var(--box-shadow);\r\n}\r\n\r\n.app-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.app-subtitle {\r\n  font-size: 0.9rem;\r\n  opacity: 0.9;\r\n}\r\n\r\n/* Cards */\r\n.attendance-card,\r\n.announcement-card,\r\n.info-card {\r\n  background: white;\r\n  border-radius: var(--border-radius);\r\n  box-shadow: var(--box-shadow);\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* Form Elements */\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  text-align: left;\r\n}\r\n\r\n.form-select {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: var(--border-radius);\r\n  font-size: 1rem;\r\n  transition: var(--transition);\r\n  background-color: white;\r\n}\r\n\r\n.form-select:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\r\n}\r\n\r\n/* Buttons */\r\n.primary-btn {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: var(--border-radius);\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: var(--transition);\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  min-width: 120px; \r\n  height: 40px; \r\n  font-size: 14px; \r\n}\r\n\r\n.primary-btn:hover {\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.primary-btn:disabled {\r\n  background-color: #bdc3c7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Confirmation Message */\r\n.confirmation-message {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  color: var(--success-color);\r\n  font-weight: 500;\r\n  margin-top: 1rem;\r\n  padding: 0.75rem;\r\n  background-color: rgba(46, 204, 113, 0.1);\r\n  border-radius: var(--border-radius);\r\n}\r\n\r\n.success-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/* Announcement Section */\r\n.announcement-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.announcement-header h3 {\r\n  font-size: 1.2rem;\r\n  color: var(--dark-color);\r\n}\r\n\r\n.announcement-icon {\r\n  color: var(--warning-color);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.announcement-image {\r\n  width: 100%;      /* Responsif, mengisi lebar container */\r\n  max-width: 800px; /* Batas maksimal lebar */\r\n  height: auto;     /* Menjaga rasio aspek */\r\n  border-radius: 8px; /* Sudut melengkung */\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.announcement-text {\r\n  text-align: center;\r\n  font-weight: 500;\r\n  color: var(--text-color);\r\n}\r\n\r\n/* Info Sections */\r\n.info-section {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.info-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.info-header h4 {\r\n  font-size: 1.1rem;\r\n  color: var(--dark-color);\r\n}\r\n\r\n.info-header i {\r\n  color: var(--primary-color);\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.info-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.info-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.info-label {\r\n  font-weight: 500;\r\n  color: var(--text-light);\r\n}\r\n\r\n.info-value {\r\n  font-weight: 500;\r\n  color: var(--dark-color);\r\n  text-align: right;\r\n}\r\n\r\n.map-image {\r\n  width: 100%;\r\n  border-radius: var(--border-radius);\r\n  margin-top: 1rem;\r\n  border: 1px solid #eee;\r\n}\r\n\r\n/* Footer */\r\n.app-footer {\r\n  background-color: var(--dark-color);\r\n  color: white;\r\n  text-align: center;\r\n  padding: 1.5rem 1rem;\r\n  margin-top: 2rem;\r\n  \r\n}\r\n\r\n.app-footer p {\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.footer-copyright {\r\n  font-size: 0.8rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n/* Responsive Adjustments */\r\n@media (min-width: 768px) {\r\n  .app-title {\r\n    font-size: 2rem;\r\n  }\r\n  \r\n  .app-subtitle {\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  .info-section {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n  \r\n  .primary-btn {\r\n    width: auto;\r\n    padding: 0.75rem 2rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .attendance-card,\r\n  .announcement-card,\r\n  .info-card {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .app-header {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .app-title {\r\n    font-size: 1.3rem;\r\n  }\r\n}\r\n</style>"],"names":["_sfc_main","e","_hoisted_2","_hoisted_4","_hoisted_5","$props","_createElementBlock","_cache","_withModifiers","$options","args","_createElementVNode","_hoisted_1","_hoisted_3","_toDisplayString","_createCommentVNode","ZOOM_LEVEL","userData","useUserStore","ref","default_str","ipData","gpsLocation","gpsMapUrl","attendanceRecorded","selectedLocation","locations","absensiStatusArray","isLoadingAbsensiStatus","showModal","imageSrc","dataLoaded","computed","val","tooFar","_a","absensiStatus","latest","hourIn","timeDiffHours","fetchAbsensiStatus","responseStatus","fetchGPSLocation","resolve","position","error","err","getDistanceFromLatLonInKm","lat1","lon1","lat2","lon2","dLat","dLon","a","distance","fetchLokasi","responseLokasi","axios","item","lat","lon","b","fetchIp","responseIPv4","openModal","src","closeModal","openCamera","getDeviceInfo","dimension","userAgent","match","device","handlePhoto","event","file","formData","result","onMounted","formatDate","dateString","months","date","day","month","year","hours","minutes","seconds"],"mappings":"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"}