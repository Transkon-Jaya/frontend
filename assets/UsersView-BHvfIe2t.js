import{_ as e,c as a,a as t,d as o,f as l,i as s,g as n,b as r,v as i,F as d,j as u,t as c,k as m}from"./index-ymcskxsK.js";const p={class:"admin-users"},f=["onUpdate:modelValue"],h=["onUpdate:modelValue"],w=["onUpdate:modelValue"],y=["value"],U=["onClick"],b=["onClick"],v={key:4};const k=e({data:()=>({users:[],levels:Array.from({length:11},((e,a)=>a)),columns:[{label:"Name",field:"name",editable:!0},{label:"Username",field:"username",editable:!0},{label:"Level",field:"level",editable:!0},{label:"Actions",field:"actions"}]}),methods:{async fetchUsers(){try{const e=await fetch("https://www.transkon-rent.com/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwt-token")}`},body:JSON.stringify({level:localStorage.getItem("user_level")})});this.users=await e.json()}catch(e){}},async updateUser(e){try{await fetch(`/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(a){}},async deleteUser(e){if(confirm(`Are you sure you want to delete ${e.username}?`))try{await fetch(`/api/users/${e.id}`,{method:"DELETE"}),this.fetchUsers()}catch(a){}},openCreateUserModal(){alert("Open user creation modal")}},mounted(){this.fetchUsers()}},[["render",function(e,k,g,C,j,V){const S=s("vue-good-table");return n(),a("div",p,[k[1]||(k[1]=t("h2",null,"User Management",-1)),t("button",{onClick:k[0]||(k[0]=(...e)=>V.openCreateUserModal&&V.openCreateUserModal(...e))},"Create New User"),o(S,{columns:j.columns,rows:j.users,"pagination-options":{enabled:!0,mode:"pages",perPage:10},"search-options":{enabled:!0},"sort-options":{enabled:!0}},{"table-row":l((e=>["name"===e.column.field?r((n(),a("input",{key:0,"onUpdate:modelValue":a=>e.row.name=a},null,8,f)),[[i,e.row.name]]):"username"===e.column.field?r((n(),a("input",{key:1,"onUpdate:modelValue":a=>e.row.username=a},null,8,h)),[[i,e.row.username]]):"level"===e.column.field?r((n(),a("select",{key:2,"onUpdate:modelValue":a=>e.row.level=a},[(n(!0),a(d,null,u(j.levels,(e=>(n(),a("option",{key:e,value:e},c(e),9,y)))),128))],8,w)),[[m,e.row.level]]):"actions"===e.column.field?(n(),a(d,{key:3},[t("button",{onClick:a=>V.updateUser(e.row)},"Save",8,U),t("button",{onClick:a=>V.deleteUser(e.row)},"Delete",8,b)],64)):(n(),a("span",v,c(e.row[e.column.field]),1))])),_:1},8,["columns","rows"])])}],["__scopeId","data-v-1f54ecb3"]]);export{k as default};
