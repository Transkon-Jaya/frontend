import{M as E}from"./bootstrap.esm-B0YAJBZY.js";import{_ as A,r as d,l as C,o as D,c as i,g as r,a as e,t as l,F as I,j as L,m as j}from"./index-DM0HGBBV.js";const T={class:"container my-4"},B={key:0,class:"text-center my-5"},F={key:1,class:"alert alert-danger"},G={key:2,class:"row"},K={class:"card h-100"},$=["src","onClick"],N={class:"card-body"},V={class:"card-title"},H={class:"card-text text-muted small"},P={class:"modal-dialog modal-dialog-centered modal-lg"},R={class:"modal-content bg-dark text-white"},S={class:"modal-header border-0"},U={class:"modal-title",id:"imageModalLabel"},q={class:"modal-body text-center"},z=["src"],J={class:"modal-footer justify-content-between border-0"},O=["disabled"],Q=["disabled"],W={__name:"Gallery",setup(w){const s=d([]),t=d(0),u=d(null),_=d(!0),m=d(null);let o=null;const g=a=>{if(!a)return"";const n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(a).toLocaleDateString("id-ID",n)},v=a=>a?`https://www.transkon-rent.com/uploads/absensi/${a}`:"",h=C(()=>s.value[t.value]||{}),k=async()=>{try{_.value=!0;const a=await fetch("https://www.transkon-rent.com/api/absensi-latest");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();if(Array.isArray(n))s.value=n.filter(c=>c.foto_in);else throw new Error("Format data tidak valid")}catch(a){console.error("Error fetching data:",a),m.value=a.message,s.value=[{foto_in:"Tj1023_IN_1746431330.jpg",nama_karyawan:"Contoh Karyawan 1",tanggal:"2023-11-15T08:00:00"},{foto_in:"Tj1023_IN_1746507175.jpg",nama_karyawan:"Contoh Karyawan 2",tanggal:"2023-11-15T08:05:00"}]}finally{_.value=!1}},x=a=>{t.value=a,o==null||o.show()},b=()=>{o==null||o.hide()},y=()=>{t.value<s.value.length-1&&t.value++},p=()=>{t.value>0&&t.value--},M=a=>{if(!(!o||!document.getElementById("imageModal").classList.contains("show")))switch(a.key){case"ArrowRight":y();break;case"ArrowLeft":p();break;case"Escape":b();break}};return D(()=>{u.value&&(o=new E(u.value)),k(),document.addEventListener("keydown",M)}),(a,n)=>(r(),i("div",T,[_.value?(r(),i("div",B,n[0]||(n[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-2"},"Memuat data absensi...",-1)]))):m.value?(r(),i("div",F," Gagal memuat data: "+l(m.value),1)):(r(),i("div",G,[(r(!0),i(I,null,L(s.value,(c,f)=>(r(),i("div",{class:"col-md-3 mb-4",key:f},[e("div",K,[e("img",{src:v(c.foto_in),class:"card-img-top gallery-img",onClick:Y=>x(f),alt:"Foto Absensi"},null,8,$),e("div",N,[e("h6",V,l(c.name),1),e("p",H,l(g(c.hour_in)),1)])])]))),128))])),e("div",{class:"modal fade",id:"imageModal",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:u},[e("div",P,[e("div",R,[e("div",S,[e("h5",U,l(h.value.name||"Karyawan")+" - "+l(g(h.value.tanggal)),1),e("button",{type:"button",class:"btn-close btn-close-white",onClick:b,"aria-label":"Close","data-bs-dismiss":"modal"})]),e("div",q,[e("img",{src:v(h.value.foto_in),class:"img-fluid rounded portrait-img",alt:"Foto Absensi",ref:"modalImage"},null,8,z)]),e("div",J,[e("button",{type:"button",class:"btn btn-outline-light",onClick:p,disabled:t.value===0}," « ",8,O),e("span",null," Gambar "+l(t.value+1)+" dari "+l(s.value.length),1),e("button",{type:"button",class:"btn btn-outline-light",onClick:y,disabled:t.value===s.value.length-1}," » ",8,Q)])])])],512)]))}},X=A(W,[["__scopeId","data-v-1283e63b"]]),ae={__name:"AboutView",setup(w){return(s,t)=>(r(),j(X))}};export{ae as default};
