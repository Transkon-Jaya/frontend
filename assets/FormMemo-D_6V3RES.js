import{_ as M,u as U,B as D,C as V,r as i,n as A,o as C,p as c,c as m,a as o,s as N,b as u,v as p,q as S,d as f,f as v,V as _,A as b,g,h,y as E}from"./index-B44UkB8J.js";import{a as I}from"./logger-B1IqVKgO.js";const R={class:"row"},T={class:"col-xl-6 mx-auto"},z={class:"card"},P={class:"card-body p-4"},$={class:"col-md-12"},L={class:"col-md-12"},j={key:0,class:"mt-3"},q=["src"],G={class:"mt-2"},H={class:"col-md-12"},J={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},K={__name:"FormMemo",setup(O){const l=U();D();const x=b+"/perizinan",t=V({no_document:"",description:"",username:""}),n=new FormData,y=i(),d=i(null),r=i(null),w=s=>{const e=s.target.files[0];if(d.value=e,e){const a=new FileReader;a.onload=F=>{r.value=F.target.result},a.readAsDataURL(e)}else r.value=null};A(()=>t.password!==t.confirmPassword),C(async()=>{try{const s=await c.get(x,{headers:{Authorization:`Bearer ${l.token}`},params:{username:l.username}});y.value=s.data[0]}catch(s){console.error("Fetch error:",s)}});const k=()=>{t.no_document="",t.description=""},B=async()=>{try{if(t.no_document==""){alert("No Document Masih Kosong");return}if(!d.value){alert("Upload Memo");return}n.append("username",l.username),n.append("memo",d.value),n.append("description",t.description),n.append("no_document",t.no_document);const s=await c.post(`${b}/tools/memo`,n,{headers:{Authorization:`Bearer ${l.token}`}});await E(),alert("Inserted successfully!"),window.location.reload()}catch(s){I("Submit error:",s),alert("Error updating profile.")}};return(s,e)=>(g(),m("div",R,[o("div",T,[o("div",z,[e[8]||(e[8]=o("div",{class:"card-header px-4 py-3"},[o("h5",{class:"mb-0"},"TRJA Memo Upload")],-1)),o("div",P,[o("form",{onSubmit:N(B,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[o("div",$,[e[3]||(e[3]=o("label",{for:"no_dokument",class:"form-label"},"No Document",-1)),u(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.no_document=a),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,t.no_document]])]),o("div",L,[e[4]||(e[4]=o("label",{for:"photo",class:"form-label"},"Upload Memo",-1)),o("input",{type:"file",class:"form-control",id:"photo",onChange:w,accept:"image/*"},null,32),r.value?(g(),m("div",j,[o("img",{src:r.value,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px","max-height":"200px","object-fit":"contain"}},null,8,q),o("div",G,[o("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:e[1]||(e[1]=()=>{r.value=null,d.value=null,s.document.getElementById("photo").value=""})}," Hapus Gambar ")])])):S("",!0)]),o("div",H,[e[5]||(e[5]=o("label",{for:"text",class:"form-label"},"Description",-1)),u(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.description=a),type:"text",class:"form-control",id:"no_dokument"},null,512),[[p,t.description]])]),o("div",J,[f(_,{type:"submit",color:"danger",size:"md",block:!1},{default:v(()=>e[6]||(e[6]=[h(" Submit ")])),_:1}),f(_,{type:"reset",class:"btn btn-secondary",onClick:k},{default:v(()=>e[7]||(e[7]=[h(" Reset ")])),_:1})])],32)])])])]))}},X=M(K,[["__scopeId","data-v-4a22637b"]]);export{X as default};
