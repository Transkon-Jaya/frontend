import{_ as B,J as I,r as u,o as F,c as n,a as s,m as b,d as T,h as D,f as C,i as H,t as e,F as x,j as P,x as y,A as _,P as J,g as o}from"./index-BSs2LI8U.js";const V={class:"container-global"},j={class:"d-flex justify-content-between align-items-center"},O={class:"button-group"},Y={key:0,class:"text-center py-5"},R={key:1,class:"alert alert-danger"},U={key:2},G={class:"d-flex align-items-center mb-3"},K={class:"detail-img me-4"},q=["src"],z={key:1,class:"fas fa-user-circle fa-5x text-secondary"},Q={class:"col-md-4 employee-info"},W={class:"info-row"},X={class:"info-value"},Z={class:"info-row"},ss={class:"info-value"},ts={class:"info-row"},es={class:"info-value"},as={class:"info-row"},ls={class:"info-value"},ns={class:"info-row"},os={class:"info-value"},is={class:"info-row"},rs={class:"info-value"},ds={class:"info-row"},us={class:"info-value"},cs={class:"info-row"},ps={class:"info-value"},fs={class:"col-md-4 employee-info"},vs={class:"info-row"},ms={class:"info-value"},gs={class:"info-row"},bs={class:"info-value"},ys={class:"info-row"},_s={class:"info-value"},hs={class:"info-row"},ws={class:"info-value"},ks={class:"info-row"},Ds={class:"info-value"},xs={class:"info-row"},Ps={class:"info-value"},Ss={class:"info-row"},As={class:"info-value"},Ms={key:0,class:"text-center py-3"},Es={key:1,class:"table table-bordered mt-3"},Ls={key:0},Ns={key:2,class:"text-center py-3"},$s={key:3,class:"table table-bordered mt-3"},Bs={key:0},Is={__name:"AbsensiDetailView",setup(Fs){const h=I(),w=h.params.username,a=u(null),m=u(null),g=u(!0),p=u(null),f=u([]),v=u(!0),S=async l=>{try{const t=await y.get(`${_}/get/profile-picture`,{params:{params:[l]}});m.value=J+"/profile/"+t.data}catch(t){console.error("Error fetching employee photo:",t)}},A=async()=>{var l;try{g.value=!0;const t=await y.get(`${_}/users?username=${w}`);a.value=t.data,a.value&&((l=a.value[0])!=null&&l.username)&&await S(a.value[0].username),M()}catch(t){p.value=t.message||"Failed to load employee data"}finally{g.value=!1}},M=async()=>{try{v.value=!0;const l=await y.get(`${_}/table-user?username=${h.params.username}&limit=7`);f.value=l.data}catch(l){p.value=l.message||"Failed to load attendance data"}finally{v.value=!1}};F(async()=>{console.log("Username from route:",w),await A(),console.log("data : ",a.value)});function E(l){const t=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],i=new Date(l),r=i.getDate(),d=t[i.getMonth()],c=i.getFullYear();return String(i.getHours()).padStart(2,"0"),String(i.getMinutes()).padStart(2,"0"),String(i.getSeconds()).padStart(2,"0"),`${r} ${d} ${c}`}function k(l){return l&&l.split(" ")[1]||"-"}const L=l=>{if(!l)return null;try{const t=new Date(l),i=new Date;if(isNaN(t.getTime()))return"Invalid date";let r=i.getFullYear()-t.getFullYear(),d=i.getMonth()-t.getMonth(),c=i.getDate()-t.getDate();if(c<0){d--;const $=new Date(i.getFullYear(),i.getMonth(),0);c+=$.getDate()}return d<0&&(r--,d+=12),`${r} Tahun ${d} Bulan ${c} Hari`}catch(t){return console.error("Error calculating age:",t),"Error"}},N=()=>{window.print()};return(l,t)=>{const i=H("router-link");return o(),n("div",V,[s("div",j,[t[2]||(t[2]=s("h2",{class:"fw-bold"},"Employee Attendance Detail",-1)),s("div",O,[s("button",{onClick:N,class:"btn btn-danger me-2"},t[0]||(t[0]=[s("i",{class:"fas fa-print me-1"},null,-1),D(" Print ")])),T(i,{to:"/hr/employee",class:"btn btn-danger"},{default:C(()=>t[1]||(t[1]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),D(" Back ")])),_:1})])]),g.value?(o(),n("div",Y,t[3]||(t[3]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading employee data...",-1)]))):p.value?(o(),n("div",R,e(p.value),1)):a.value?(o(),n("div",U,[s("div",G,[s("div",K,[m.value?(o(),n("img",{key:0,src:m.value,alt:"Employee Photo",class:"employee-photo"},null,8,q)):(o(),n("i",z))]),s("div",Q,[s("div",W,[t[4]||(t[4]=s("span",{class:"info-label"},"NIK",-1)),s("span",X,e(a.value[0].username),1)]),s("div",Z,[t[5]||(t[5]=s("span",{class:"info-label"},"Name",-1)),s("span",ss,e(a.value[0].name),1)]),s("div",ts,[t[6]||(t[6]=s("span",{class:"info-label"},"Dob",-1)),s("span",es,e(a.value[0].dob||"-"),1)]),s("div",as,[t[7]||(t[7]=s("span",{class:"info-label"},"Age",-1)),s("span",ls,e(L(a.value[0].dob)||"-"),1)]),s("div",ns,[t[8]||(t[8]=s("span",{class:"info-label"},"Gender",-1)),s("span",os,e(a.value[0].gender),1)]),s("div",is,[t[9]||(t[9]=s("span",{class:"info-label"},"Status",-1)),s("span",rs,e(a.value[0].status||"-"),1)]),s("div",ds,[t[10]||(t[10]=s("span",{class:"info-label"},"Email",-1)),s("span",us,e(a.value[0].email||"-"),1)]),s("div",cs,[t[11]||(t[11]=s("span",{class:"info-label"},"Phone",-1)),s("span",ps,e(a.value[0].phone||"-"),1)])]),s("div",fs,[s("div",vs,[t[12]||(t[12]=s("span",{class:"info-label"},"Dept",-1)),s("span",ms,e(a.value[0].department||"-"),1)]),s("div",gs,[t[13]||(t[13]=s("span",{class:"info-label"},"Jabatan",-1)),s("span",bs,e(a.value[0].jabatan||"-"),1)]),s("div",ys,[t[14]||(t[14]=s("span",{class:"info-label"},"Emp status",-1)),s("span",_s,e(a.value[0].kepegawaian||"-"),1)]),s("div",hs,[t[15]||(t[15]=s("span",{class:"info-label"},"Class",-1)),s("span",ws,e(a.value[0].klasifikasi||"-"),1)]),s("div",ks,[t[16]||(t[16]=s("span",{class:"info-label"},"Placement",-1)),s("span",Ds,e(a.value[0].placement||"-"),1)]),s("div",xs,[t[17]||(t[17]=s("span",{class:"info-label"},"Hub",-1)),s("span",Ps,e(a.value[0].hub_placement||"-"),1)]),s("div",Ss,[t[18]||(t[18]=s("span",{class:"info-label"},"Location",-1)),s("span",As,e(a.value[0].lokasi||"-"),1)])])]),t[29]||(t[29]=s("h4",{class:"fw-bold mt-4"},"Training History",-1)),v.value?(o(),n("div",Ms,t[19]||(t[19]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(o(),n("table",Es,[t[25]||(t[25]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Training Certificate"),s("th",null,"Date issued"),s("th",null,"Issued by")])],-1)),s("tbody",null,[f.value.length===0?(o(),n("tr",Ls,t[20]||(t[20]=[s("td",{colspan:"4",class:"text-center py-4"},"No records found",-1)]))):b("",!0),(o(!0),n(x,null,P(l.sertifikatData,(r,d)=>(o(),n("tr",{key:d},[s("td",null,e(r.sertifikat||"-"),1),s("td",null,e(r.tanggal||"-"),1),s("td",null,e(r.lembaga||"-"),1)]))),128)),t[21]||(t[21]=s("tr",null,[s("td",null,"Sertifikat Pelatihan Leadership 2023"),s("td",null,"15 Maret 2023"),s("td",null,"PT. Pelatihan Profesional Indonesia")],-1)),t[22]||(t[22]=s("tr",null,[s("td",null,"Sertifikat Digital Marketing Masterclass"),s("td",null,"2 September 2022"),s("td",null,"Google Digital Academy")],-1)),t[23]||(t[23]=s("tr",null,[s("td",null,"Sertifikat Manajemen Proyek"),s("td",null,"10 November 2021"),s("td",null,"Project Management Institute")],-1)),t[24]||(t[24]=s("tr",null,[s("td",null,"Sertifikat Bahasa Inggris Bisnis"),s("td",null,"5 Juli 2020"),s("td",null,"British Council Indonesia")],-1))])])),t[30]||(t[30]=s("h4",{class:"fw-bold mt-4"},"Attendance History",-1)),v.value?(o(),n("div",Ns,t[26]||(t[26]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(o(),n("table",$s,[t[28]||(t[28]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Date"),s("th",null,"In"),s("th",null,"Out")])],-1)),s("tbody",null,[f.value.length===0?(o(),n("tr",Bs,t[27]||(t[27]=[s("td",{colspan:"4",class:"text-center py-4"},"No attendance records found",-1)]))):b("",!0),(o(!0),n(x,null,P(f.value,(r,d)=>(o(),n("tr",{key:d},[s("td",null,e(E(r.tanggal)),1),s("td",null,e(k(r.hour_in||"-")),1),s("td",null,e(k(r.hour_out||"-")),1)]))),128))])]))])):b("",!0)])}}},Cs=B(Is,[["__scopeId","data-v-399dd811"]]);export{Cs as default};
