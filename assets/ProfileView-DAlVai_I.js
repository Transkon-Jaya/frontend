import{u as a,g as e,i as l,o as s,e as o,c as t,a as r,l as n,d,w as i,v as m,m as p,q as u,V as c,b as v,f,B as b,p as w,H as h}from"./index-bhEXSi7T.js";const y={class:"row"},P={class:"col-xl-6 mx-auto"},g={class:"card"},x={class:"card-body p-4"},U={class:"col-md-12"},V={class:"col-md-12"},N={class:"col-md-12"},S={class:"col-md-12"},_={class:"col-md-12"},k={class:"col-md-12"},C={class:"col-md-12"},j={class:"col-md-12"},B={key:0,class:"text-danger"},D={class:"col-md-12"},E={key:0,class:"mt-3"},I=["src"],q={class:"col-md-12 mt-4 mb-3 d-flex gap-3"},F="Loading...",H={__name:"ProfileView",setup(H){const L=a(),R=L.apiBaseUrl+"/profile",z=e({name:F,email:F,phone:F,department:F,position:F,username:F,password:"",confirmPassword:""}),A=new FormData,G=e(),J=e(null),K=a=>{J.value=a.target.files[0]},M=l((()=>z.value.password!==z.value.confirmPassword));s((async()=>{try{const a=await o.get(R,{params:{username:L.username}});G.value=a.data[0],O()}catch(a){}}));const O=()=>{z.value.name=G.value.name,z.value.email=G.value.email,z.value.phone=G.value.phone,z.value.department=G.value.department,z.value.position=G.value.jabatan,z.value.username=L.username,z.value.password="",z.value.confirmPassword=""},Q=()=>{O()},T=async()=>{if(!M.value)try{A.append("name",z.value.name),A.append("email",z.value.email),A.append("phone",z.value.phone),A.append("department",z.value.department),A.append("position",z.value.position),A.append("username",z.value.username),z.value.password&&A.append("password",z.value.password),J.value&&A.append("profilePicture",J.value);const a=await o.post(R,A);b("update profile : ",a.data),L.setProfile(a.data.foto),b("user data : ",L.photo),await w(),window.location.reload(),alert("Profile updated successfully!")}catch(a){h("Submit error:",a),alert("Error updating profile.")}};return(a,e)=>(v(),t("div",y,[r("div",P,[r("div",g,[e[19]||(e[19]=r("div",{class:"card-header px-4 py-3"},[r("h5",{class:"mb-0"},"User Settings")],-1)),r("div",x,[r("form",{onSubmit:n(T,["prevent"]),class:"row g-3 needs-validation",novalidate:""},[r("div",U,[e[8]||(e[8]=r("label",{for:"Name",class:"form-label"},"Name",-1)),i(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>z.value.name=a),type:"text",class:"form-control",id:"firstName",disabled:""},null,512),[[m,z.value.name]])]),r("div",V,[e[9]||(e[9]=r("label",{for:"phone",class:"form-label"},"E-mail",-1)),i(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>z.value.email=a),type:"text",class:"form-control",id:"email"},null,512),[[m,z.value.email]])]),r("div",N,[e[10]||(e[10]=r("label",{for:"phone",class:"form-label"},"Phone",-1)),i(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>z.value.phone=a),type:"text",class:"form-control",id:"phone"},null,512),[[m,z.value.phone]])]),r("div",S,[e[11]||(e[11]=r("label",{for:"department",class:"form-label"},"Department",-1)),i(r("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>z.value.department=a),type:"text",class:"form-control",id:"department",disabled:""},null,512),[[m,z.value.department]])]),r("div",_,[e[12]||(e[12]=r("label",{for:"position",class:"form-label"},"Position",-1)),i(r("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>z.value.position=a),type:"text",class:"form-control",id:"position",disabled:""},null,512),[[m,z.value.position]])]),r("div",k,[e[13]||(e[13]=r("label",{for:"userName",class:"form-label"},"User Name",-1)),i(r("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>z.value.username=a),type:"userName",class:"form-control",id:"userName",disabled:""},null,512),[[m,z.value.username]])]),r("div",C,[e[14]||(e[14]=r("label",{for:"password",class:"form-label"},"Password",-1)),i(r("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>z.value.password=a),type:"password",class:"form-control",id:"password"},null,512),[[m,z.value.password]])]),r("div",j,[e[15]||(e[15]=r("label",{for:"confirmationPassword",class:"form-label"},"Confirm Password",-1)),i(r("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>z.value.confirmPassword=a),type:"password",class:"form-control",id:"confirmationPassword"},null,512),[[m,z.value.confirmPassword]])]),M.value?(v(),t("small",B," Passwords do not match! ")):d("",!0),r("div",D,[e[16]||(e[16]=r("label",{for:"photo",class:"form-label"},"Upload Photo",-1)),r("input",{type:"file",class:"form-control",id:"photo",onChange:K,accept:"image/*"},null,32),a.previewImage?(v(),t("div",E,[r("img",{src:a.previewImage,alt:"Preview",class:"img-thumbnail",style:{"max-width":"200px"}},null,8,I)])):d("",!0)]),r("div",q,[p(c,{type:"submit",class:"btn btn-danger",disabled:M.value},{default:u((()=>e[17]||(e[17]=[f("Submit ")]))),_:1},8,["disabled"]),p(c,{type:"reset",class:"btn btn-secondary",onClick:Q},{default:u((()=>e[18]||(e[18]=[f(" Reset ")]))),_:1})])],32)])])])]))}};export{H as default};
//# sourceMappingURL=ProfileView-DAlVai_I.js.map
