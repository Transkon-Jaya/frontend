import{_ as N,H as B,r as d,o as I,c as l,a as s,n as b,d as $,h as w,f as C,i as F,t as e,F as x,j as D,s as g,A as _,P as H,g as n}from"./index-Bf3st3Ei.js";const T={class:"container-global"},V={class:"d-flex justify-content-between align-items-center"},j={class:"button-group"},J={key:0,class:"text-center py-5"},O={key:1,class:"alert alert-danger"},R={key:2},U={class:"d-flex align-items-center mb-3"},G={class:"detail-img me-4"},K=["src"],Y={key:1,class:"fas fa-user-circle fa-5x text-secondary"},q={class:"col-md-4 employee-info"},z={class:"info-row"},Q={class:"info-value"},W={class:"info-row"},X={class:"info-value"},Z={class:"info-row"},ss={class:"info-value"},ts={class:"info-row"},es={class:"info-value"},as={class:"info-row"},ls={class:"info-value"},ns={class:"info-row"},os={class:"info-value"},is={class:"info-row"},rs={class:"info-value"},ds={class:"col-md-4 employee-info"},us={class:"info-row"},cs={class:"info-value"},ps={class:"info-row"},fs={class:"info-value"},vs={class:"info-row"},ms={class:"info-value"},bs={class:"info-row"},gs={class:"info-value"},_s={class:"info-row"},ys={class:"info-value"},hs={class:"info-row"},ks={class:"info-value"},ws={class:"info-row"},xs={class:"info-value"},Ds={key:0,class:"text-center py-3"},Ss={key:1,class:"table table-bordered mt-3"},Ps={key:0},As={key:2,class:"text-center py-3"},Ls={key:3,class:"table table-bordered mt-3"},Es={key:0},Ms={__name:"AbsensiDetailView",setup(Ns){const y=B(),h=y.params.username,a=d(null),v=d(null),m=d(!0),c=d(null),p=d([]),f=d(!0),S=async o=>{try{const t=await g.get(`${_}/get/foto`,{params:{params:[o]}});v.value=H+"/profile/"+t.data}catch(t){console.error("Error fetching employee photo:",t)}},P=async()=>{var o;try{m.value=!0;const t=await g.get(`${_}/users?username=${h}`);a.value=t.data,a.value&&((o=a.value[0])!=null&&o.username)&&await S(a.value[0].username),A()}catch(t){c.value=t.message||"Failed to load employee data"}finally{m.value=!1}},A=async()=>{try{f.value=!0;const o=await g.get(`${_}/table-user?username=${y.params.username}&limit=7`);p.value=o.data}catch(o){c.value=o.message||"Failed to load attendance data"}finally{f.value=!1}};I(async()=>{console.log("Username from route:",h),await P(),console.log("data : ",a.value)});function L(o){const t=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],r=new Date(o),i=r.getDate(),u=t[r.getMonth()],M=r.getFullYear();return String(r.getHours()).padStart(2,"0"),String(r.getMinutes()).padStart(2,"0"),String(r.getSeconds()).padStart(2,"0"),`${i} ${u} ${M}`}function k(o){return o&&o.split(" ")[1]||"-"}const E=()=>{window.print()};return(o,t)=>{const r=F("router-link");return n(),l("div",T,[s("div",V,[t[2]||(t[2]=s("h2",{class:"fw-bold"},"Employee Attendance Detail",-1)),s("div",j,[s("button",{onClick:E,class:"btn btn-danger me-2"},t[0]||(t[0]=[s("i",{class:"fas fa-print me-1"},null,-1),w(" Print ")])),$(r,{to:"/hr/employee",class:"btn btn-danger"},{default:C(()=>t[1]||(t[1]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),w(" Back ")])),_:1})])]),m.value?(n(),l("div",J,t[3]||(t[3]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading employee data...",-1)]))):c.value?(n(),l("div",O,e(c.value),1)):a.value?(n(),l("div",R,[s("div",U,[s("div",G,[v.value?(n(),l("img",{key:0,src:v.value,alt:"Employee Photo",class:"employee-photo"},null,8,K)):(n(),l("i",Y))]),s("div",q,[s("div",z,[t[4]||(t[4]=s("span",{class:"info-label"},"NIK",-1)),s("span",Q,e(a.value[0].username),1)]),s("div",W,[t[5]||(t[5]=s("span",{class:"info-label"},"Name",-1)),s("span",X,e(a.value[0].name),1)]),s("div",Z,[t[6]||(t[6]=s("span",{class:"info-label"},"Dob",-1)),s("span",ss,e(a.value[0].dob||"-"),1)]),s("div",ts,[t[7]||(t[7]=s("span",{class:"info-label"},"Gender",-1)),s("span",es,e(a.value[0].gender),1)]),s("div",as,[t[8]||(t[8]=s("span",{class:"info-label"},"Status",-1)),s("span",ls,e(a.value[0].status||"-"),1)]),s("div",ns,[t[9]||(t[9]=s("span",{class:"info-label"},"Email",-1)),s("span",os,e(a.value[0].email||"-"),1)]),s("div",is,[t[10]||(t[10]=s("span",{class:"info-label"},"Phone",-1)),s("span",rs,e(a.value[0].phone||"-"),1)])]),s("div",ds,[s("div",us,[t[11]||(t[11]=s("span",{class:"info-label"},"Dept",-1)),s("span",cs,e(a.value[0].department||"-"),1)]),s("div",ps,[t[12]||(t[12]=s("span",{class:"info-label"},"Jabatan",-1)),s("span",fs,e(a.value[0].jabatan||"-"),1)]),s("div",vs,[t[13]||(t[13]=s("span",{class:"info-label"},"E-Status",-1)),s("span",ms,e(a.value[0].kepegawaian||"-"),1)]),s("div",bs,[t[14]||(t[14]=s("span",{class:"info-label"},"Class",-1)),s("span",gs,e(a.value[0].klasifikasi||"-"),1)]),s("div",_s,[t[15]||(t[15]=s("span",{class:"info-label"},"Placement",-1)),s("span",ys,e(a.value[0].placement||"-"),1)]),s("div",hs,[t[16]||(t[16]=s("span",{class:"info-label"},"Hub",-1)),s("span",ks,e(a.value[0].hub_placement||"-"),1)]),s("div",ws,[t[17]||(t[17]=s("span",{class:"info-label"},"Location",-1)),s("span",xs,e(a.value[0].lokasi||"-"),1)])])]),t[28]||(t[28]=s("h4",{class:"fw-bold mt-4"},"Training History",-1)),f.value?(n(),l("div",Ds,t[18]||(t[18]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(n(),l("table",Ss,[t[24]||(t[24]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Training Certificate"),s("th",null,"Date issued"),s("th",null,"Issued by")])],-1)),s("tbody",null,[p.value.length===0?(n(),l("tr",Ps,t[19]||(t[19]=[s("td",{colspan:"4",class:"text-center py-4"},"No records found",-1)]))):b("",!0),(n(!0),l(x,null,D(o.sertifikatData,(i,u)=>(n(),l("tr",{key:u},[s("td",null,e(i.sertifikat||"-"),1),s("td",null,e(i.tanggal||"-"),1),s("td",null,e(i.lembaga||"-"),1)]))),128)),t[20]||(t[20]=s("tr",null,[s("td",null,"Sertifikat Pelatihan Leadership 2023"),s("td",null,"15 Maret 2023"),s("td",null,"PT. Pelatihan Profesional Indonesia")],-1)),t[21]||(t[21]=s("tr",null,[s("td",null,"Sertifikat Digital Marketing Masterclass"),s("td",null,"2 September 2022"),s("td",null,"Google Digital Academy")],-1)),t[22]||(t[22]=s("tr",null,[s("td",null,"Sertifikat Manajemen Proyek"),s("td",null,"10 November 2021"),s("td",null,"Project Management Institute")],-1)),t[23]||(t[23]=s("tr",null,[s("td",null,"Sertifikat Bahasa Inggris Bisnis"),s("td",null,"5 Juli 2020"),s("td",null,"British Council Indonesia")],-1))])])),t[29]||(t[29]=s("h4",{class:"fw-bold mt-4"},"Attendance History",-1)),f.value?(n(),l("div",As,t[25]||(t[25]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Loading attendance data...",-1)]))):(n(),l("table",Ls,[t[27]||(t[27]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Date"),s("th",null,"In"),s("th",null,"Out")])],-1)),s("tbody",null,[p.value.length===0?(n(),l("tr",Es,t[26]||(t[26]=[s("td",{colspan:"4",class:"text-center py-4"},"No attendance records found",-1)]))):b("",!0),(n(!0),l(x,null,D(p.value,(i,u)=>(n(),l("tr",{key:u},[s("td",null,e(L(i.tanggal)),1),s("td",null,e(k(i.hour_in||"-")),1),s("td",null,e(k(i.hour_out||"-")),1)]))),128))])]))])):b("",!0)])}}},Is=N(Ms,[["__scopeId","data-v-c8cb5ff9"]]);export{Is as default};
