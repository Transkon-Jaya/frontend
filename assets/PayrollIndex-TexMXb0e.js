import{_ as S,c as s,a as t,t as n,d as p,f as k,i as N,s as B,b as w,k as D,F as v,j as h,r as d,o as C,p as P,H as F,g as r,h as I,q as x}from"./index-CFqpVhRV.js";const J={props:{title:String},setup(){F();const f=d([]),l=d(1),_=d(10),o=d(0),g=d(!1),m=d([{id:"1",bulan:"Januari"},{id:"2",bulan:"Februari"},{id:"3",bulan:"Maret"},{id:"4",bulan:"April"},{id:"5",bulan:"Mei"},{id:"6",bulan:"Juni"},{id:"7",bulan:"Juli"},{id:"8",bulan:"Agustus"},{id:"9",bulan:"September"},{id:"10",bulan:"Oktober"},{id:"11",bulan:"November"},{id:"12",bulan:"Desember"}]),c=new Date().getFullYear(),b=d([]);for(let e=c;e>=c-10;e--)b.value.push(e);const a=d({tahun:"",bulan:""}),u=async()=>{try{const e={page:l.value,...a.value},i=await P.get("/api/payroll",{params:e});f.value=i.data.data,o.value=i.data.total}catch(e){console.error("Error fetching payroll data:",e)}},y=()=>{l.value=1,u()},V=e=>{const i=m.value.find(M=>M.id==e);return i?i.bulan:"-"},j=e=>new Intl.NumberFormat("id-ID").format(e),A=async e=>{if(confirm("Are You Sure?"))try{await P.delete(`/api/payroll/${e}`),u()}catch(i){console.error("Error deleting payroll:",i)}};return C(()=>{u()}),{payrollData:f,currentPage:l,perPage:_,totalRecords:o,isAdmin:g,months:m,years:b,filters:a,fetchData:u,filterData:y,getMonthName:V,formatNumber:j,deletePayroll:A}}},R={class:"row"},T={class:"col-md-12 project-list"},E={class:"card"},U={class:"row"},Y={class:"col-md-6 mt-2 p-0 d-flex"},G={class:"col-md-6 p-0"},q={class:"col-md-12"},H={class:"card"},L={class:"card-header"},O={class:"row"},z={class:"col-3"},K=["value"],Q={class:"col-3"},W=["value"],X={class:"card-body"},Z={class:"table-responsive"},$={class:"table table-striped"},tt={class:"action"},at={class:"me-2"},lt=["href"],ot={key:0},et={key:1,class:"delete"},nt=["onClick"],st={class:"d-flex justify-content-end mt-4"};function rt(f,l,_,o,g,m){const c=N("router-link"),b=N("pagination");return r(),s("div",R,[t("div",T,[t("div",E,[t("div",U,[t("div",Y,[t("h4",null,n(_.title),1)]),t("div",G,[p(c,{to:"/hr/rekap-data",class:"btn btn-primary"},{default:k(()=>l[4]||(l[4]=[I("+ Tambah")])),_:1})])])])]),t("div",q,[t("div",H,[t("div",L,[t("form",{onSubmit:l[2]||(l[2]=B((...a)=>o.filterData&&o.filterData(...a),["prevent"]))},[t("div",O,[t("div",z,[w(t("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>o.filters.tahun=a),class:"form-control"},[l[5]||(l[5]=t("option",{value:"",selected:""},"Tahun",-1)),(r(!0),s(v,null,h(o.years,a=>(r(),s("option",{value:a,key:a},n(a),9,K))),128))],512),[[D,o.filters.tahun]])]),t("div",Q,[w(t("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>o.filters.bulan=a),class:"form-control"},[l[6]||(l[6]=t("option",{value:"",selected:""},"Bulan",-1)),(r(!0),s(v,null,h(o.months,a=>(r(),s("option",{value:a.id,key:a.id},n(a.bulan),9,W))),128))],512),[[D,o.filters.bulan]])]),l[7]||(l[7]=t("div",{class:"col-3"},[t("button",{type:"submit",class:"border-0 mt-3",style:{"background-color":"transparent"}},[t("i",{class:"fas fa-search"})])],-1))])],32)]),t("div",X,[t("div",Z,[t("table",$,[l[11]||(l[11]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Nomor Gaji"),t("th",null,"Nama"),t("th",null,"Jabatan"),t("th",null,"Bulan"),t("th",null,"Grand Total"),t("th",null,"Actions")])],-1)),t("tbody",null,[(r(!0),s(v,null,h(o.payrollData,(a,u)=>(r(),s("tr",{key:a.id},[t("td",null,n((o.currentPage-1)*o.perPage+u+1)+".",1),t("td",null,n(a.no_gaji),1),t("td",null,n(a.user.name),1),t("td",null,n(a.user.jabatan.nama_jabatan),1),t("td",null,n(o.getMonthName(a.bulan))+" "+n(a.tahun),1),t("td",null,"Rp "+n(o.formatNumber(a.grand_total)),1),t("td",null,[t("ul",tt,[t("li",at,[t("a",{href:`/payroll/${a.id}/download`,target:"_blank"},l[8]||(l[8]=[t("i",{style:{color:"blue"},class:"fa fa-solid fa-print"},null,-1)]),8,lt)]),o.isAdmin?(r(),s("li",ot,[p(c,{to:`/payroll/${a.id}/edit`},{default:k(()=>l[9]||(l[9]=[t("i",{style:{color:"brown"},class:"fa fa-solid fa-edit"},null,-1)])),_:2},1032,["to"])])):x("",!0),o.isAdmin?(r(),s("li",et,[t("button",{onClick:y=>o.deletePayroll(a.id),class:"border-0",style:{"background-color":"transparent"}},l[10]||(l[10]=[t("i",{class:"fa fa-solid fa-trash"},null,-1)]),8,nt)])):x("",!0)])])]))),128))])])]),t("div",st,[p(b,{modelValue:o.currentPage,"onUpdate:modelValue":l[3]||(l[3]=a=>o.currentPage=a),records:o.totalRecords,"per-page":o.perPage,onPaginate:o.fetchData},null,8,["modelValue","records","per-page","onPaginate"])])])])])])}const it=S(J,[["render",rt],["__scopeId","data-v-0066e0f8"]]);export{it as default};
