import{_ as J,r as o,o as Q,l as E,c as i,a as e,n as x,h as d,t as n,F as L,j as N,b as p,k as P,y as f,p as X,v as S,q as Y,s as $,A,J as Z,g as r}from"./index-Bf3st3Ei.js";const ee={class:"card border-0 shadow-sm"},te={class:"card-header"},ae={class:"d-flex justify-content-between align-items-center"},le=["disabled"],se={class:"card-body"},ne={key:0,class:"alert alert-danger alert-dismissible fade show"},oe={key:1,class:"text-center py-5"},ie={key:2,class:"table-responsive"},re={class:"table table-hover table-striped table-bordered mb-0"},ue={class:"table-dark"},de=["onUpdate:modelValue","placeholder"],ve={key:0},ce=["colspan"],me={class:"text-center"},pe=["onClick"],be={class:"text-center"},ge={class:"text-center"},fe={class:"text-center"},ye={class:"text-center"},ke={class:"text-center"},xe={class:"text-center"},_e={class:"btn-group btn-group-sm",role:"group"},we=["onClick"],he=["onClick"],Ce={class:"d-flex flex-wrap justify-content-between align-items-center mt-3"},Pe={class:"d-flex align-items-center mb-2"},Se=["value"],$e={class:"text-muted"},Ae={"aria-label":"Page navigation"},De={class:"pagination pagination-sm mb-0"},Ee={class:"page-item disabled"},Le={class:"page-link"},Ne={key:0,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},Ve={class:"modal-dialog modal-dialog-centered"},Ie={class:"modal-content border-0 shadow"},Oe={class:"modal-title"},Ue={class:"modal-body"},je={class:"mb-3"},Be=["disabled"],Ke={class:"mb-3"},Fe={class:"mb-3"},Me={class:"mb-3"},Re={class:"mb-3"},Te={class:"mb-3"},Ge={class:"modal-footer border-top-0"},He={key:1,class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)"}},qe={class:"modal-dialog modal-dialog-centered"},We={class:"modal-content border-0 shadow"},ze={class:"modal-body"},Je={__name:"Employee",setup(Qe){const K=Z(),c=o([]),_=o(!0),y=o(null),F=o(0),w=o(!1),u=o(!1),s=o({}),V=o(-1),k=o(!1),b=o(null),m=o({username:"",name:"",department:"",placement:"",gender:"",lokasi:""}),g=o(10),v=o(1),M=[10,20,50,{value:-1,text:"All"}],I=[{text:"NIK",value:"username",align:"center",sortable:!0,filterable:!0},{text:"Nama",value:"name",align:"center",sortable:!0,filterable:!0},{text:"Departemen",value:"department",align:"center",sortable:!0,filterable:!0},{text:"Penempatan",value:"placement",align:"center",sortable:!0,filterable:!0},{text:"Gender",value:"gender",align:"center",sortable:!0,filterable:!0},{text:"Lokasi",value:"lokasi",align:"center",sortable:!0,filterable:!0},{text:"Actions",value:"actions",align:"center",sortable:!1,filterable:!1}];Q(async()=>{try{_.value=!0;const l=await $.get(`${A}/users?username=tj`);c.value=l.data,F.value=c.value.length,_.value=!1}catch(l){y.value=l.message,_.value=!1}});const h=E(()=>c.value.filter(l=>Object.keys(m.value).every(t=>m.value[t]?String(l[t]).toLowerCase().includes(m.value[t].toLowerCase()):!0))),D=E(()=>{if(g.value===-1)return h.value;const l=(v.value-1)*g.value,t=l+g.value;return h.value.slice(l,t)}),O=E(()=>g.value===-1?1:Math.ceil(h.value.length/g.value)),R=()=>{s.value={username:"",name:"",department:"",placement:"",gender:"Laki-laki",lokasi:""},u.value=!0},T=l=>{V.value=c.value.indexOf(l),s.value=Object.assign({},l),w.value=!0},G=async()=>{try{if(u.value){const l=await $.post(`${A}/users`,s.value);c.value.unshift(l.data),u.value=!1}else Object.assign(c.value[V.value],s.value),await $.put(`${A}/users/${s.value.username}`,s.value),w.value=!1;s.value={}}catch(l){y.value=l.message}},U=()=>{w.value=!1,u.value=!1,s.value={}},H=l=>{K.push({name:"hr-absensi-detail",params:{username:l}})},q=()=>{Object.keys(m.value).forEach(l=>{m.value[l]=""}),v.value=1},W=l=>{b.value=l,k.value=!0},z=async()=>{try{await $.delete(`${A}/users/${b.value.username}`),c.value=c.value.filter(l=>l.username!==b.value.username),k.value=!1,b.value=null}catch(l){y.value=l.message,k.value=!1}},j=()=>{k.value=!1,b.value=null};return(l,t)=>(r(),i("div",ee,[e("div",te,[e("div",ae,[t[14]||(t[14]=e("h3",{class:"mb-0"},"List Karyawan",-1)),e("div",null,[e("button",{onClick:q,class:"btn btn-sm btn-light me-2",disabled:!Object.values(m.value).some(Boolean)},t[12]||(t[12]=[e("i",{class:"fas fa-filter-circle-xmark me-1"},null,-1),d(" Reset Filters ")]),8,le),e("button",{onClick:R,class:"btn btn-sm btn-danger"},t[13]||(t[13]=[e("i",{class:"fas fa-plus me-1"},null,-1),d(" Add New ")]))])])]),e("div",se,[y.value?(r(),i("div",ne,[d(n(y.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=a=>y.value=null)})])):x("",!0),_.value?(r(),i("div",oe,t[15]||(t[15]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),e("p",{class:"mt-2"},"Loading data...",-1)]))):(r(),i("div",ie,[e("table",re,[e("thead",ue,[e("tr",null,[(r(),i(L,null,N(I,a=>e("th",{key:a.value,class:f(a.align?`text-${a.align}`:"")},[e("div",null,n(a.text),1),a.filterable?p((r(),i("input",{key:0,"onUpdate:modelValue":C=>m.value[a.value]=C,type:"text",class:"form-control form-control-sm mt-1",placeholder:`Filter ${a.text}`,onInput:t[1]||(t[1]=C=>v.value=1)},null,40,de)),[[S,m.value[a.value]]]):x("",!0)],2)),64))])]),e("tbody",null,[D.value.length===0?(r(),i("tr",ve,[e("td",{colspan:I.length,class:"text-center py-4"},"No data available",8,ce)])):x("",!0),(r(!0),i(L,null,N(D.value,(a,C)=>(r(),i("tr",{key:C,class:"align-middle"},[e("td",me,[e("a",{href:"javascript:void(0)",onClick:B=>H(a.username),class:"text-primary fw-semibold"},n(a.username),9,pe)]),e("td",be,n(a.name),1),e("td",ge,n(a.department),1),e("td",fe,n(a.placement),1),e("td",ye,[e("span",{class:f(["badge",a.gender==="Laki-laki"?"bg-info":"bg-danger"])},n(a.gender),3)]),e("td",ke,n(a.lokasi),1),e("td",xe,[e("div",_e,[e("button",{onClick:B=>T(a),class:"btn btn-warning",title:"Edit"},t[16]||(t[16]=[e("i",{class:"fas fa-edit"},null,-1)]),8,we),e("button",{onClick:B=>W(a),class:"btn btn-danger",title:"Delete"},t[17]||(t[17]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,he)])])]))),128))])])])),e("div",Ce,[e("div",Pe,[p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),class:"form-select form-select-sm me-2",style:{width:"90px"},onChange:t[3]||(t[3]=a=>v.value=1)},[(r(),i(L,null,N(M,a=>e("option",{key:a.value||a,value:a.value||a},n(a.text||a),9,Se)),64))],544),[[P,g.value]]),e("small",$e," Showing "+n(D.value.length)+" of "+n(h.value.length)+" entries ",1)]),e("nav",Ae,[e("ul",De,[e("li",{class:f(["page-item",{disabled:v.value===1}])},[e("button",{class:"page-link",onClick:t[4]||(t[4]=a=>v.value--)},t[18]||(t[18]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))],2),e("li",Ee,[e("span",Le," Page "+n(v.value)+" of "+n(O.value),1)]),e("li",{class:f(["page-item",{disabled:v.value===O.value}])},[e("button",{class:"page-link",onClick:t[5]||(t[5]=a=>v.value++)},t[19]||(t[19]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])]),w.value||u.value?(r(),i("div",Ne,[e("div",Ve,[e("div",Ie,[e("div",{class:f(["modal-header",(u.value,"bg-danger text-white")])},[e("h5",Oe,n(u.value?"Tambah Karyawan Baru":"Edit Karyawan"),1),e("button",{type:"button",class:f(["btn-close",(u.value,"btn-close-white")]),onClick:U},null,2)],2),e("div",Ue,[e("form",{onSubmit:X(G,["prevent"])},[e("div",je,[t[20]||(t[20]=e("label",{class:"form-label"},[d("NIK "),e("span",{class:"text-danger"},"*")],-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.value.username=a),type:"text",class:"form-control",disabled:!u.value,required:""},null,8,Be),[[S,s.value.username]])]),e("div",Ke,[t[21]||(t[21]=e("label",{class:"form-label"},[d("Nama "),e("span",{class:"text-danger"},"*")],-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.value.name=a),type:"text",class:"form-control",required:""},null,512),[[S,s.value.name]])]),e("div",Fe,[t[23]||(t[23]=e("label",{class:"form-label"},"Departemen",-1)),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>s.value.department=a),class:"form-select"},t[22]||(t[22]=[Y('<option value="Workshop" data-v-c16c3a15>Workshop</option><option value="Accounting" data-v-c16c3a15>Accounting</option><option value="Commercial" data-v-c16c3a15>Commercial</option><option value="Supply Chain" data-v-c16c3a15>Supply Chain</option><option value="Strategic Planning" data-v-c16c3a15>Strategic Planning</option><option value="HR" data-v-c16c3a15>HR</option><option value="GA" data-v-c16c3a15>GA</option><option value="Planner" data-v-c16c3a15>Planner</option><option value="Sustainability" data-v-c16c3a15>Sustainability</option><option value="BOD" data-v-c16c3a15>BOD</option>',10)]),512),[[P,s.value.department]])]),e("div",Me,[t[25]||(t[25]=e("label",{class:"form-label"},"Penempatan",-1)),p(e("select",{"onUpdate:modelValue":t[9]||(t[9]=a=>s.value.placement=a),class:"form-select"},t[24]||(t[24]=[e("option",{value:"Office"},"Office",-1),e("option",{value:"Site"},"Site",-1)]),512),[[P,s.value.placement]])]),e("div",Re,[t[27]||(t[27]=e("label",{class:"form-label"},"Gender",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>s.value.gender=a),class:"form-select"},t[26]||(t[26]=[e("option",{value:"L"},"L",-1),e("option",{value:"P"},"P",-1)]),512),[[P,s.value.gender]])]),e("div",Te,[t[28]||(t[28]=e("label",{class:"form-label"},"Lokasi",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>s.value.lokasi=a),type:"text",class:"form-control"},null,512),[[S,s.value.lokasi]])]),e("div",Ge,[e("button",{type:"button",class:"btn btn-secondary",onClick:U},t[29]||(t[29]=[e("i",{class:"fas fa-times me-1"},null,-1),d(" Cancel ")])),e("button",{type:"submit",class:f(["btn",(u.value,"btn-danger")])},[t[30]||(t[30]=e("i",{class:"fas fa-save me-1"},null,-1)),d(" "+n(u.value?"Simpan":"Update"),1)],2)])],32)])])])])):x("",!0),k.value?(r(),i("div",He,[e("div",qe,[e("div",We,[e("div",{class:"modal-header bg-danger text-white"},[t[31]||(t[31]=e("h5",{class:"modal-title"},"Konfirmasi Hapus",-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:j})]),e("div",ze,[t[34]||(t[34]=e("p",null,"Apakah Anda yakin ingin menghapus karyawan ini?",-1)),e("p",null,[t[32]||(t[32]=e("strong",null,"NIK:",-1)),d(" "+n(b.value.username),1)]),e("p",null,[t[33]||(t[33]=e("strong",null,"Nama:",-1)),d(" "+n(b.value.name),1)]),t[35]||(t[35]=e("p",{class:"text-danger"},"Data yang dihapus tidak dapat dikembalikan!",-1))]),e("div",{class:"modal-footer border-top-0"},[e("button",{type:"button",class:"btn btn-secondary",onClick:j},t[36]||(t[36]=[e("i",{class:"fas fa-times me-1"},null,-1),d(" Batal ")])),e("button",{type:"button",class:"btn btn-danger",onClick:z},t[37]||(t[37]=[e("i",{class:"fas fa-trash-alt me-1"},null,-1),d(" Hapus ")]))])])])])):x("",!0)]))}},Ze=J(Je,[["__scopeId","data-v-c16c3a15"]]);export{Ze as default};
