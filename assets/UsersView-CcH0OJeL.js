import{_,c as a,a as l,d as f,f as w,i as y,g as r,b as d,v as c,F as u,j as v,t as m,k as U}from"./index-DxvSCoCV.js";const b={data(){return{users:[],levels:Array.from({length:11},(t,n)=>n),columns:[{label:"Name",field:"name",editable:!0},{label:"Username",field:"username",editable:!0},{label:"Level",field:"level",editable:!0},{label:"Actions",field:"actions"}]}},methods:{async fetchUsers(){try{const t=await fetch("https://www.transkon-rent.com/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwt-token")}`},body:JSON.stringify({level:localStorage.getItem("user_level")})});this.users=await t.json()}catch(t){console.error("Error fetching users:",t)}},async updateUser(t){try{await fetch(`/api/users/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(n){console.error("Error updating user:",n)}},async deleteUser(t){if(confirm(`Are you sure you want to delete ${t.username}?`))try{await fetch(`/api/users/${t.id}`,{method:"DELETE"}),this.fetchUsers()}catch(n){console.error("Error deleting user:",n)}},openCreateUserModal(){alert("Open user creation modal")}},mounted(){this.fetchUsers()}},g={class:"admin-users"},k=["onUpdate:modelValue"],p=["onUpdate:modelValue"],C=["onUpdate:modelValue"],V=["value"],E=["onClick"],S=["onClick"],M={key:4};function N(t,n,T,j,i,s){const h=y("vue-good-table");return r(),a("div",g,[n[1]||(n[1]=l("h2",null,"User Management",-1)),l("button",{onClick:n[0]||(n[0]=(...e)=>s.openCreateUserModal&&s.openCreateUserModal(...e))},"Create New User"),f(h,{columns:i.columns,rows:i.users,"pagination-options":{enabled:!0,mode:"pages",perPage:10},"search-options":{enabled:!0},"sort-options":{enabled:!0}},{"table-row":w(e=>[e.column.field==="name"?d((r(),a("input",{key:0,"onUpdate:modelValue":o=>e.row.name=o},null,8,k)),[[c,e.row.name]]):e.column.field==="username"?d((r(),a("input",{key:1,"onUpdate:modelValue":o=>e.row.username=o},null,8,p)),[[c,e.row.username]]):e.column.field==="level"?d((r(),a("select",{key:2,"onUpdate:modelValue":o=>e.row.level=o},[(r(!0),a(u,null,v(i.levels,o=>(r(),a("option",{key:o,value:o},m(o),9,V))),128))],8,C)),[[U,e.row.level]]):e.column.field==="actions"?(r(),a(u,{key:3},[l("button",{onClick:o=>s.updateUser(e.row)},"Save",8,E),l("button",{onClick:o=>s.deleteUser(e.row)},"Delete",8,S)],64)):(r(),a("span",M,m(e.row[e.column.field]),1))]),_:1},8,["columns","rows"])])}const A=_(b,[["render",N],["__scopeId","data-v-1f54ecb3"]]);export{A as default};
