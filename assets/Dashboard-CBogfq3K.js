import{_ as Q,c as i,g as c,a as t,b as v,v as y,q as N,h as C,t as u,F as O,j as G,e as q,u as Z,r as b,n as rt,o as $,p as F,A as S,B as z,k as nt,s as K,Q as It,y as At,d as lt}from"./index-g6npIRNv.js";import{E as st,a as Pt}from"./jspdf.plugin.autotable-G7d3Xfsi.js";const Ft={setup(){const x=Z(),e=b([]),k=b(!0),a=b(!1),w=b(null),_=b(""),o=b(""),g=p=>p?new Date(p).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",s=async()=>{var p,A;try{k.value=!0,w.value=null;const D=await F.get(`${S}/tracking-invoices`,{headers:{Authorization:`Bearer ${x.token}`}});e.value=D.data.data||[]}catch(D){w.value=((A=(p=D.response)==null?void 0:p.data)==null?void 0:A.error)||"Gagal memuat data invoice",console.error("Fetch Error:",D)}finally{k.value=!1}},I=async p=>{try{a.value=!0;const A={acct:p.acct,tax_dept:p.tax_dept,admin:p.admin,expedisi:p.expedisi,remarks:p.remarks};await F.put(`${S}/tracking-invoices`,A,{params:{ta_id:p.ta_id},headers:{Authorization:`Bearer ${x.token}`}})}catch(A){console.error("Gagal update tracking:",A),alert("Gagal menyimpan perubahan. Coba lagi."),s()}finally{a.value=!1}},h=rt(()=>e.value.filter(p=>{var B;const A=_.value?(B=p.invoiceNo)==null?void 0:B.toLowerCase().includes(_.value.toLowerCase()):!0,D=o.value?new Date(p.invoiceDate).toISOString().split("T")[0]===o.value:!0;return A&&D})),H=()=>{_.value="",o.value=""};return $(s),{invoices:e,loading:k,submitting:a,error:w,formatDate:g,updateTracking:I,filterInvoiceNo:_,filterDate:o,filteredInvoices:h,resetFilters:H}}},St={class:"info-card"},Vt={class:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between"},Mt={class:"filters d-flex flex-wrap gap-2"},Ut={class:"card-body"},Nt={key:0,class:"text-center py-5"},Rt={key:1,class:"alert alert-danger"},Et={key:2,class:"table-responsive"},zt={class:"modern-table"},Bt={class:"checkbox-cell"},Lt=["onUpdate:modelValue","onChange","disabled"],Ot={class:"checkbox-cell"},Gt=["onUpdate:modelValue","onChange","disabled"],Wt={class:"checkbox-cell"},jt=["onUpdate:modelValue","onChange","disabled"],Yt={class:"checkbox-cell"},Xt=["onUpdate:modelValue","onChange","disabled"],qt=["onUpdate:modelValue","onBlur","disabled"];function Ht(x,e,k,a,w,_){return c(),i("div",St,[t("div",Vt,[e[3]||(e[3]=t("h3",{class:"card-title mb-2 mb-md-0"},"TRANSMITAL INVOICE INTERNAL",-1)),t("div",Mt,[v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.filterInvoiceNo=o),placeholder:"Cari No. Invoice...",class:"form-control form-control-sm",style:{"max-width":"200px"}},null,512),[[y,a.filterInvoiceNo]]),v(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>a.filterDate=o),class:"form-control form-control-sm"},null,512),[[y,a.filterDate]]),t("button",{class:"btn btn-sm btn-secondary",onClick:e[2]||(e[2]=(...o)=>a.resetFilters&&a.resetFilters(...o))},"Reset")])]),t("div",Ut,[a.loading?(c(),i("div",Nt,e[4]||(e[4]=[t("div",{class:"spinner-border text-primary"},null,-1),t("p",null,"Loading invoices...",-1)]))):N("",!0),a.error?(c(),i("div",Rt,[e[5]||(e[5]=t("strong",null,"Error:",-1)),C(" "+u(a.error),1)])):(c(),i("div",Et,[t("table",zt,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"No. Inv"),t("th",null,"Tgl Invoice"),t("th",null,"Acct"),t("th",null,"Tax Dept."),t("th",null,"Admin"),t("th",null,"Expedisi"),t("th",null,"Remarks")])],-1)),t("tbody",null,[(c(!0),i(O,null,G(a.filteredInvoices,(o,g)=>(c(),i("tr",{key:o.ta_id},[t("td",null,u(g+1),1),t("td",null,u(o.invoiceNo),1),t("td",null,u(a.formatDate(o.invoiceDate)),1),t("td",Bt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s=>o.acct=s,onChange:s=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,Lt),[[q,o.acct]])]),t("td",Ot,[v(t("input",{type:"checkbox","onUpdate:modelValue":s=>o.tax_dept=s,onChange:s=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,Gt),[[q,o.tax_dept]])]),t("td",Wt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s=>o.admin=s,onChange:s=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,jt),[[q,o.admin]])]),t("td",Yt,[v(t("input",{type:"checkbox","onUpdate:modelValue":s=>o.expedisi=s,onChange:s=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,Xt),[[q,o.expedisi]])]),t("td",null,[v(t("input",{type:"text","onUpdate:modelValue":s=>o.remarks=s,onBlur:s=>a.updateTracking(o),class:"form-control form-control-sm",disabled:a.submitting,placeholder:"Catatan"},null,40,qt),[[y,o.remarks]])])]))),128))])])]))])])}const Jt=Q(Ft,[["render",Ht],["__scopeId","data-v-d3ea5812"]]),Kt={setup(){const x=Z(),e=b([]),k=b(!1),a=b(!1),w=b(null),_=b([]),o=b(!1),g=b(!1),s=b(!1),I=b(null),h=b({ta_id:"",date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""}),H=l=>["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][l-1]||"",p=async l=>{var m,r;if(!l){alert("TA ID tidak valid.");return}try{const d=(await F.get(`${S}/transmittal`,{params:{ta_id:l},headers:{Authorization:`Bearer ${x.token}`}})).data.data;if(!d)throw new Error("Data transmittal tidak ditemukan.");const n=new st({compress:!0,unit:"mm",format:"a4"}),T=new Image;T.src=It,T.onload=()=>{n.addImage(T,"PNG",15,15,30,12,void 0,"FAST"),n.setFontSize(16).setFont(void 0,"bold"),n.text("TRANSMITTAL ADVICE",105,22,{align:"center"});const P=new Date(d.date),j=H(P.getMonth()+1),ot=P.getFullYear();n.setFontSize(10).setFont(void 0,"normal"),n.text(`No: ${d.ta_id}/${j}/${ot}`,105,28,{align:"center"}),n.text(`TA Date: ${at(d.date)}`,160,28),n.setDrawColor(0),n.line(15,30,195,30),n.setFont(void 0,"bold").setFontSize(10),n.text("PT. TRANSKON JAYA",15,36),n.setFont(void 0,"normal"),n.text(`Attention: ${d.attention||"Account Payable"}`,15,42),n.text(`Company: ${d.company}`,15,48),n.text(`Dept. of Origin: ${d.from_origin}`,15,54);const L="Address : ",R=d.address||"",E=120,M=36,Dt=E+n.getTextWidth(L),Y=n.splitTextToSize(R,70-n.getTextWidth(L));n.text(L+Y[0],E,M);for(let U=1;U<Y.length;U++)n.text(Y[U],Dt,M+U*5);const wt=M+Y.length*5;n.text(`City/State: ${d.state}`,E,wt),n.line(15,58,195,58),n.setFont(void 0,"normal"),n.text("Undercover this transmittal, We are forwarding you the following:",15,64);const _t=[["1",(d.description||"").split(",").map(U=>U.trim()).filter(U=>U).join(", "),d.remarks||""]];Pt(n,{head:[["No.","Document Description","Remarks"]],body:_t,startY:68,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[51,51,51],textColor:[255,255,255],halign:"center",fontStyle:"bold"},columnStyles:{0:{halign:"center",cellWidth:10},1:{cellWidth:130},2:{cellWidth:40}}});const X=n.lastAutoTable.finalY+100;n.text("Received By:",15,X+60),n.text("Date:",15,X+90),n.setFontSize(8),n.text("Please Acknowledge Receipt by returning the copy of this Transmittal to PT. Transkon Jaya",15,X+95),n.text("or Return by Fax (0542) 770403",15,X+100);const Ct=n.output("blob"),Tt=new Blob([Ct],{type:"application/pdf"}),J=document.createElement("a");J.href=URL.createObjectURL(Tt),J.download=`Transmittal_${d.ta_id}.pdf`,J.click()}}catch(f){console.error("Gagal generate PDF:",f),alert("Gagal mengunduh PDF. Coba lagi. Detail: "+(((r=(m=f.response)==null?void 0:m.data)==null?void 0:r.error)||f.message))}},A=async l=>{var m,r;if(!l){alert("TA ID tidak valid.");return}try{const d=(await F.get(`${S}/transmittal`,{params:{ta_id:l},headers:{Authorization:`Bearer ${x.token}`}})).data.data;if(!d)throw new Error("Data transmittal tidak ditemukan.");const n=new st({unit:"mm",format:"a4"}),T=20,P=20,j=170;n.rect(T,P,j,60),n.setFont(void 0,"bold").setFontSize(12),n.text(`To : ${d.company||d.customer||""}`,T+3,P+8),n.setFontSize(10),n.text("Attn :",T+3,P+18),n.setFont(void 0,"normal"),n.text(d.attention||"",T+25,P+18),n.setFont(void 0,"bold"),n.text("Address:",T+3,P+28);const ot=n.getTextWidth("Address:");n.setFont(void 0,"normal");const L=d.address||"",R=n.splitTextToSize(L,j-25);R.length>0&&n.text(R[0],T+25,P+28);for(let M=1;M<R.length;M++)n.text(R[M],T+25,P+28+M*5);const E=P+28+R.length*5;n.text(d.state||"",T+25,E),n.setFont(void 0,"bold"),n.text("Phone :",T+3,E+10),n.setFont(void 0,"normal"),n.text("",T+25,E+10),n.save(`Address_${d.company||d.customer}.pdf`)}catch(f){console.error("Gagal generate PDF:",f),alert("Gagal mengunduh PDF. Coba lagi. Detail: "+(((r=(m=f.response)==null?void 0:m.data)==null?void 0:r.error)||f.message))}},D=b(1),B=b(10),W=b(1),tt=b(0),dt=async()=>{try{return(await F.get(`${S}/get-next-ta-id`,{headers:{Authorization:`Bearer ${x.token}`}})).data.ta_id}catch(l){throw console.error("Gagal ambil TA ID:",l),alert("Gagal generate TA ID. Coba lagi."),l}},it=async l=>{const m=l.target.value;if(m.length<2){_.value=[];return}try{const r=await F.get(`${S}/customers_dropdown`,{params:{search:m},headers:{Authorization:`Bearer ${x.token}`}});_.value=r.data.data||[]}catch(r){_.value=[],console.warn("Failed to fetch customers:",r)}},ct=l=>{h.value.company=l.name,h.value.address=l.address||"",h.value.state=l.state||"",_.value=[]},V=async()=>{var l,m;try{k.value=!0,w.value=null;const r=await F.get(`${S}/transmittal`,{params:{page:D.value,limit:B.value},headers:{Authorization:`Bearer ${x.token}`}});e.value=r.data.items||[],W.value=r.data.totalPages||1,tt.value=r.data.totalCount||0}catch(r){w.value=((m=(l=r.response)==null?void 0:l.data)==null?void 0:m.error)||"Failed to load data",console.error("Fetch Error:",r)}finally{k.value=!1}},mt=async()=>{try{k.value=!0;const l=await dt();h.value={ta_id:l,date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""},s.value=!1,o.value=!0}catch(l){l.value="Failed to generate TA ID"}finally{k.value=!1}},ut=async l=>{var m,r;try{k.value=!0;const d=(await F.get(`${S}/transmittal`,{params:{ta_id:l},headers:{Authorization:`Bearer ${x.token}`}})).data.data;h.value={...d,receive_date:d.receive_date||null},s.value=!0,o.value=!0}catch(f){w.value="Failed to load transmittal: "+(((r=(m=f.response)==null?void 0:m.data)==null?void 0:r.error)||f.message)}finally{k.value=!1}},et=()=>{o.value=!1,h.value={ta_id:"",date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""}},bt=async()=>{var l,m;try{a.value=!0,w.value=null,h.value.receive_date===""&&(h.value.receive_date=null);const r=`${S}/transmittal`,f=s.value?"put":"post",d=s.value?{ta_id:h.value.ta_id}:{},n=await F[f](r,h.value,{params:d,headers:{Authorization:`Bearer ${x.token}`,"Content-Type":"application/json"}});if(n.data.status===200||n.data.status===201)et(),V();else throw new Error(n.data.error||"Operation failed")}catch(r){w.value=((m=(l=r.response)==null?void 0:l.data)==null?void 0:m.error)||r.message||"Save failed",console.error("Submit Error:",r)}finally{a.value=!1}},vt=l=>{I.value=l,g.value=!0},ft=async()=>{var l,m;try{a.value=!0,await F.delete(`${S}/transmittal`,{params:{ta_id:I.value},headers:{Authorization:`Bearer ${x.token}`}}),g.value=!1,V()}catch(r){w.value="Delete failed: "+(((m=(l=r.response)==null?void 0:l.data)==null?void 0:m.error)||r.message)}finally{a.value=!1}},gt=()=>{D.value<W.value&&(D.value++,V())},pt=()=>{D.value>1&&(D.value--,V())},yt=l=>{D.value=l,V()},xt=()=>{D.value=1,V()},at=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",kt=l=>({Pending:"badge bg-warning",Received:"badge bg-info",Completed:"badge bg-success"})[l]||"badge bg-secondary",ht=rt(()=>{const l=[];let r=Math.max(1,D.value-2),f=Math.min(W.value,r+5-1);f-r+1<5&&(r=Math.max(1,f-5+1));for(let d=r;d<=f;d++)l.push(d);return l});return $(()=>{V()}),{transmittals:e,loading:k,error:w,submitting:a,customers:_,showModal:o,isEditing:s,showDeleteModal:g,deleteTaId:I,formData:h,currentPage:D,itemsPerPage:B,totalPages:W,totalCount:tt,visiblePages:ht,fetchTransmittals:V,openAddModal:mt,openEditModal:ut,submitForm:bt,downloadPdf:p,downloadAddress:A,confirmDelete:vt,deleteTransmittal:ft,closeModal:et,nextPage:gt,prevPage:pt,goToPage:yt,resetPagination:xt,formatDate:at,statusBadgeClass:kt,handleCompanyInput:it,selectCustomer:ct}}},Qt={class:"container-fluid"},Zt={class:"card border-0 shadow"},$t={class:"card-header bg-black text-white"},te={class:"d-flex justify-content-between align-items-center"},ee=["disabled"],ae=["disabled"],oe={class:"card-body"},ne={key:0,class:"alert alert-danger alert-dismissible fade show mb-4"},le={key:1,class:"text-center py-5"},se={key:2,class:"text-center py-5"},re={key:3},de={class:"table-responsive"},ie={class:"table table-hover table-bordered"},ce={class:"text-center"},me=["onClick"],ue=["onClick"],be=["onClick"],ve=["onClick"],fe={class:"d-flex justify-content-between align-items-center mt-4"},ge={class:"text-muted"},pe={class:"pagination pagination-sm"},ye=["onClick"],xe={class:"form-group mb-0",style:{width:"120px"}},ke={class:"modal-content border-0 shadow"},he={class:"modal-header bg-black text-white"},De={class:"modal-title"},we={class:"modal-body"},_e={class:"row g-3"},Ce={class:"col-md-6"},Te=["readonly","placeholder"],Ie={class:"col-md-6"},Ae={class:"col-md-6"},Pe={class:"col-md-6"},Fe={class:"col-md-6 position-relative"},Se={key:0,class:"list-group mt-1",style:{position:"absolute","z-index":"1000",width:"calc(100% - 2px)","max-height":"200px","overflow-y":"auto"}},Ve=["onClick"],Me={class:"col-md-6"},Ue={class:"col-md-6"},Ne={class:"col-md-6"},Re={class:"col-md-6"},Ee={class:"col-md-12"},ze={class:"col-md-6"},Be={class:"col-md-6"},Le={class:"col-md-6"},Oe={class:"col-md-6"},Ge={class:"col-md-6"},We={class:"modal-footer border-top-0 mt-4"},je=["disabled"],Ye={key:0,class:"spinner-border spinner-border-sm me-1"},Xe={class:"modal-content border-0 shadow"},qe={class:"modal-header bg-danger text-white"},He={class:"modal-body"},Je={class:"modal-footer border-top-0"},Ke=["disabled"],Qe={key:0,class:"spinner-border spinner-border-sm me-1"};function Ze(x,e,k,a,w,_){return c(),i("div",Qt,[t("div",Zt,[t("div",$t,[t("div",te,[e[39]||(e[39]=t("h3",{class:"mb-0"},"Transmittal Management",-1)),t("div",null,[t("button",{onClick:e[0]||(e[0]=(...o)=>a.openAddModal&&a.openAddModal(...o)),class:"btn btn-sm btn-light me-2",disabled:a.loading},e[37]||(e[37]=[t("i",{class:"fas fa-plus me-1"},null,-1),C(" Add New ")]),8,ee),t("button",{onClick:e[1]||(e[1]=(...o)=>a.fetchTransmittals&&a.fetchTransmittals(...o)),class:"btn btn-sm btn-light me-2",disabled:a.loading},[t("i",{class:z(["fas fa-sync",{"fa-spin":a.loading}])},null,2),e[38]||(e[38]=C(" Refresh "))],8,ae)])])]),t("div",oe,[a.error?(c(),i("div",ne,[e[40]||(e[40]=t("strong",null,"Error:",-1)),C(" "+u(a.error)+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[2]||(e[2]=o=>a.error=null)})])):N("",!0),a.loading&&!a.showModal?(c(),i("div",le,e[41]||(e[41]=[t("div",{class:"spinner-border text-primary",role:"status"},null,-1),t("p",{class:"mt-2"},"Loading transmittals...",-1)]))):a.transmittals.length===0&&!a.loading?(c(),i("div",se,[e[44]||(e[44]=t("i",{class:"fas fa-database fa-3x text-muted mb-3"},null,-1)),e[45]||(e[45]=t("h5",null,"No Transmittals Found",-1)),e[46]||(e[46]=t("p",{class:"text-muted"},"There are no transmittal records available",-1)),t("button",{onClick:e[3]||(e[3]=(...o)=>a.openAddModal&&a.openAddModal(...o)),class:"btn btn-primary me-2"},e[42]||(e[42]=[t("i",{class:"fas fa-plus me-1"},null,-1),C(" Create New ")])),t("button",{onClick:e[4]||(e[4]=(...o)=>a.fetchTransmittals&&a.fetchTransmittals(...o)),class:"btn btn-outline-primary"},e[43]||(e[43]=[t("i",{class:"fas fa-sync me-1"},null,-1),C(" Refresh ")]))])):(c(),i("div",re,[t("div",de,[t("table",ie,[e[51]||(e[51]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"TA ID"),t("th",null,"Date"),t("th",null,"From Origin"),t("th",null,"No. Inv"),t("th",null,"Company"),t("th",null,"Status"),t("th",null,"Receive Date"),t("th",null,"Actions"),t("th",null,"Download"),t("th",null,"address")])],-1)),t("tbody",null,[(c(!0),i(O,null,G(a.transmittals,o=>(c(),i("tr",{key:o.ta_id},[t("td",null,[t("code",null,u(o.ta_id),1)]),t("td",null,u(a.formatDate(o.date)),1),t("td",null,u(o.from_origin),1),t("td",null,u(o.description),1),t("td",null,u(o.company),1),t("td",null,[t("span",{class:z(a.statusBadgeClass(o.ras_status))},u(o.ras_status),3)]),t("td",null,u(o.receive_date?a.formatDate(o.receive_date):"-"),1),t("td",ce,[t("button",{onClick:g=>a.openEditModal(o.ta_id),class:"btn btn-sm btn-warning me-1"},e[47]||(e[47]=[t("i",{class:"fas fa-edit"},null,-1)]),8,me),t("button",{onClick:g=>a.confirmDelete(o.ta_id),class:"btn btn-sm btn-danger"},e[48]||(e[48]=[t("i",{class:"fas fa-trash"},null,-1)]),8,ue)]),t("td",null,[t("button",{onClick:g=>a.downloadPdf(o.ta_id),class:"btn btn-sm btn-light"},e[49]||(e[49]=[t("i",{class:"fas fa-download me-1"},null,-1),C(" Download PDF ")]),8,be)]),t("td",null,[t("button",{onClick:g=>a.downloadAddress(o.ta_id),class:"btn btn-sm btn-light"},e[50]||(e[50]=[t("i",{class:"fas fa-download me-1"},null,-1),C(" address ")]),8,ve)])]))),128))])])]),t("div",fe,[t("div",ge," Page "+u(a.currentPage)+" of "+u(a.totalPages)+" ("+u(a.totalCount)+" records) ",1),t("nav",null,[t("ul",pe,[t("li",{class:z(["page-item",{disabled:a.currentPage===1}])},[t("button",{class:"page-link",onClick:e[5]||(e[5]=(...o)=>a.prevPage&&a.prevPage(...o))},"«")],2),(c(!0),i(O,null,G(a.visiblePages,o=>(c(),i("li",{key:o,class:z(["page-item",{active:o===a.currentPage}])},[t("button",{class:"page-link",onClick:g=>a.goToPage(o)},u(o),9,ye)],2))),128)),t("li",{class:z(["page-item",{disabled:a.currentPage===a.totalPages}])},[t("button",{class:"page-link",onClick:e[6]||(e[6]=(...o)=>a.nextPage&&a.nextPage(...o))},"»")],2)])]),t("div",xe,[v(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>a.itemsPerPage=o),class:"form-select form-select-sm",onChange:e[8]||(e[8]=(...o)=>a.resetPagination&&a.resetPagination(...o))},e[52]||(e[52]=[t("option",{value:"10"},"10 / page",-1),t("option",{value:"25"},"25 / page",-1),t("option",{value:"50"},"50 / page",-1)]),544),[[nt,a.itemsPerPage]])])])]))])]),a.showModal?(c(),i("div",{key:0,class:"modal fade show d-block",style:{"z-index":"1050",background:"rgba(0,0,0,0.5)"},onClick:e[31]||(e[31]=(...o)=>a.closeModal&&a.closeModal(...o))},[t("div",{class:"modal-dialog modal-dialog-centered modal-lg",onClick:e[30]||(e[30]=K(()=>{},["stop"]))},[t("div",ke,[t("div",he,[t("h5",De,u(a.isEditing?"Edit Transmittal":"Add New Transmittal"),1),t("button",{type:"button",class:"btn-close btn-close-white",onClick:e[9]||(e[9]=(...o)=>a.closeModal&&a.closeModal(...o))})]),t("div",we,[t("form",{onSubmit:e[29]||(e[29]=K((...o)=>a.submitForm&&a.submitForm(...o),["prevent"]))},[t("div",_e,[t("div",Ce,[e[53]||(e[53]=t("label",{class:"form-label"},"TA ID",-1)),v(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>a.formData.ta_id=o),type:"text",class:"form-control",readonly:a.isEditing,placeholder:a.isEditing?"":"Auto-generated on save",required:""},null,8,Te),[[y,a.formData.ta_id]])]),t("div",Ie,[e[54]||(e[54]=t("label",{class:"form-label"},[C("Date "),t("span",{class:"text-danger"},"*")],-1)),v(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>a.formData.date=o),type:"date",class:"form-control",required:""},null,512),[[y,a.formData.date]])]),t("div",Ae,[e[55]||(e[55]=t("label",{class:"form-label"},[C("From Origin "),t("span",{class:"text-danger"},"*")],-1)),v(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>a.formData.from_origin=o),type:"text",class:"form-control",required:""},null,512),[[y,a.formData.from_origin]])]),t("div",Pe,[e[56]||(e[56]=t("label",{class:"form-label"},"Document Type",-1)),v(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>a.formData.document_type=o),type:"text",class:"form-control"},null,512),[[y,a.formData.document_type]])]),t("div",Fe,[e[57]||(e[57]=t("label",{class:"form-label"},"Company",-1)),v(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>a.formData.company=o),type:"text",class:"form-control",onInput:e[15]||(e[15]=(...o)=>a.handleCompanyInput&&a.handleCompanyInput(...o)),onBlur:e[16]||(e[16]=o=>a.customers.value=[]),placeholder:"Ketik untuk cari customer"},null,544),[[y,a.formData.company]]),a.customers.length>0?(c(),i("ul",Se,[(c(!0),i(O,null,G(a.customers,o=>(c(),i("li",{key:o.name,class:"list-group-item list-group-item-action",onClick:g=>a.selectCustomer(o),style:{cursor:"pointer"}},u(o.name)+" - "+u(o.address||"No address"),9,Ve))),128))])):N("",!0)]),t("div",Me,[e[58]||(e[58]=t("label",{class:"form-label"},"Attention",-1)),v(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>a.formData.attention=o),type:"text",class:"form-control"},null,512),[[y,a.formData.attention]])]),t("div",Ue,[e[59]||(e[59]=t("label",{class:"form-label"},"Address",-1)),v(t("textarea",{"onUpdate:modelValue":e[18]||(e[18]=o=>a.formData.address=o),rows:"2",class:"form-control"},null,512),[[y,a.formData.address]])]),t("div",Ne,[e[60]||(e[60]=t("label",{class:"form-label"},"State",-1)),v(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>a.formData.state=o),type:"text",class:"form-control"},null,512),[[y,a.formData.state]])]),t("div",Re,[e[61]||(e[61]=t("label",{class:"form-label"},"Description",-1)),v(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>a.formData.description=o),type:"text",class:"form-control"},null,512),[[y,a.formData.description]])]),t("div",Ee,[e[62]||(e[62]=t("label",{class:"form-label"},"Remarks",-1)),v(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>a.formData.remarks=o),rows:"2",class:"form-control"},null,512),[[y,a.formData.remarks]])]),t("div",ze,[e[63]||(e[63]=t("label",{class:"form-label"},"AWB/Reg",-1)),v(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>a.formData.awb_reg=o),type:"text",class:"form-control"},null,512),[[y,a.formData.awb_reg]])]),t("div",Be,[e[64]||(e[64]=t("label",{class:"form-label"},"Expeditur",-1)),v(t("input",{"onUpdate:modelValue":e[23]||(e[23]=o=>a.formData.expeditur=o),type:"text",class:"form-control"},null,512),[[y,a.formData.expeditur]])]),t("div",Le,[e[65]||(e[65]=t("label",{class:"form-label"},"Receiver Name",-1)),v(t("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>a.formData.receiver_name=o),type:"text",class:"form-control"},null,512),[[y,a.formData.receiver_name]])]),t("div",Oe,[e[66]||(e[66]=t("label",{class:"form-label"},"Receive Date (Optional)",-1)),v(t("input",{"onUpdate:modelValue":e[25]||(e[25]=o=>a.formData.receive_date=o),type:"date",class:"form-control",onInput:e[26]||(e[26]=(...o)=>x.handleReceiveDateInput&&x.handleReceiveDateInput(...o))},null,544),[[y,a.formData.receive_date]])]),t("div",Ge,[e[68]||(e[68]=t("label",{class:"form-label"},"Status",-1)),v(t("select",{"onUpdate:modelValue":e[27]||(e[27]=o=>a.formData.ras_status=o),class:"form-select"},e[67]||(e[67]=[t("option",{value:""},"-- Pilih Status --",-1),t("option",{value:"Pending"},"Pending",-1),t("option",{value:"Received"},"Received",-1),t("option",{value:"Completed"},"Completed",-1)]),512),[[nt,a.formData.ras_status]])])]),t("div",We,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[28]||(e[28]=(...o)=>a.closeModal&&a.closeModal(...o))},"Cancel"),t("button",{type:"submit",class:"btn btn-primary",disabled:a.submitting},[a.submitting?(c(),i("span",Ye)):N("",!0),C(" "+u(a.isEditing?"Update":"Create"),1)],8,je)])],32)])])])])):N("",!0),a.showDeleteModal?(c(),i("div",{key:1,class:"modal fade show d-block",style:{"z-index":"1060",background:"rgba(0,0,0,0.5)"},onClick:e[36]||(e[36]=o=>a.showDeleteModal=!1)},[t("div",{class:"modal-dialog modal-dialog-centered",onClick:e[35]||(e[35]=K(()=>{},["stop"]))},[t("div",Xe,[t("div",qe,[e[69]||(e[69]=t("h5",{class:"modal-title"},"Confirm Delete",-1)),t("button",{type:"button",class:"btn-close btn-close-white",onClick:e[32]||(e[32]=o=>a.showDeleteModal=!1)})]),t("div",He,[e[71]||(e[71]=t("p",null,"Are you sure you want to delete this transmittal?",-1)),t("p",null,[e[70]||(e[70]=t("strong",null,"TA ID:",-1)),C(" "+u(a.deleteTaId),1)]),e[72]||(e[72]=t("p",{class:"text-danger"},"This action cannot be undone!",-1))]),t("div",Je,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[33]||(e[33]=o=>a.showDeleteModal=!1)},"Cancel"),t("button",{type:"button",class:"btn btn-danger",onClick:e[34]||(e[34]=(...o)=>a.deleteTransmittal&&a.deleteTransmittal(...o)),disabled:a.submitting},[a.submitting?(c(),i("span",Qe)):N("",!0),e[73]||(e[73]=C(" Delete "))],8,Ke)])])])])):N("",!0)])}const $e=Q(Kt,[["render",Ze],["__scopeId","data-v-6dcb6103"]]),ta={key:0,class:"text-center py-5"},ea={key:1,class:"container-fluid px-3"},aa={class:"d-flex justify-content-between align-items-center mb-3"},oa={class:"text-muted mb-0"},na={class:"text-primary"},la={class:"text-end"},sa={class:"fs-6 fw-bold"},ra={class:"nav nav-tabs mb-4"},da=["onClick"],ia={class:"tab-content"},ca={key:0,class:"tab-pane fade show active"},ma={key:1,class:"tab-pane fade show active"},ua={key:2,class:"text-center py-5"},ba={__name:"Dashboard",setup(x){const e=Z();b(null);const k=b(!0),a=b("0"),w=[{label:"Transmittal Management",value:"0"},{label:"Transmittal Invoice Internal",value:"1"},{label:"Coming Soon",value:"2"}],_=b(),o=()=>{const g=new Date,s=g.getHours().toString().padStart(2,"0"),I=g.getMinutes().toString().padStart(2,"0"),h=g.getSeconds().toString().padStart(2,"0");_.value=`${s}:${I}:${h}`};return $(()=>{o(),setInterval(o,1e3),setTimeout(()=>{k.value=!1},800)}),(g,s)=>k.value?(c(),i("div",ta,s[0]||(s[0]=[t("div",{class:"spinner-border text-primary"},null,-1),t("p",{class:"mt-2"},"Loading dashboard...",-1)]))):(c(),i("div",ea,[t("div",aa,[t("div",null,[s[2]||(s[2]=t("h1",{class:"h3 fw-bold mb-1"},[t("i",{class:"fa-solid fa-business-time me-2"}),C(" Commercial Dashboard ")],-1)),t("p",oa,[s[1]||(s[1]=C("Hi, ")),t("strong",na,u(At(e).name),1)])]),t("div",la,[t("div",sa,u(_.value),1)])]),t("ul",ra,[(c(),i(O,null,G(w,I=>t("li",{class:"nav-item",key:I.value},[t("button",{class:z(["nav-link",{active:a.value===I.value}]),onClick:h=>a.value=I.value},u(I.label),11,da)])),64))]),t("div",ia,[a.value==="0"?(c(),i("div",ca,[lt($e)])):N("",!0),a.value==="1"?(c(),i("div",ma,[lt(Jt)])):(c(),i("div",ua,s[3]||(s[3]=[t("i",{class:"fa-solid fa-clock fa-3x text-muted mb-3"},null,-1),t("h4",null,"Feature Coming Soon",-1),t("p",{class:"text-muted"},"This section is under development.",-1)])))])]))}},pa=Q(ba,[["__scopeId","data-v-8cb087b5"]]);export{pa as default};
