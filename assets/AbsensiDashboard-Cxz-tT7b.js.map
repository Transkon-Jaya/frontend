{"version":3,"file":"AbsensiDashboard-Cxz-tT7b.js","sources":["../../src/views/hr/AbsensiDashboard.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport BigTable from \"@/components/BigTable.vue\";\r\nimport MiniTable from \"@/components/MiniTable.vue\";\r\nimport RouterLink from \"@/components/RouterLink.vue\"\r\n\r\nimport { useUserStore } from \"@/stores/user.js\";\r\nconst userData = useUserStore();\r\n\r\n//Big Table Settings\r\nconst settings = ref({\r\n  title: \"\",\r\n  styleClass: \"\",\r\n  size: [10,30,100] //Multiplier, Addition, Minimum\r\n});\r\n\r\nconst fields = ref({\r\n    firstCol: {label: \"USERNAME\", field: \"username\", type: \"type\", width: 100},\r\n    priority: [\"status\", \"name\", \"department\", \"jabatan\", \"hour_in\", \"hour_out\"],\r\n    unpriority: [\"lastUpdated\"],\r\n    hidden: [\"tanggal\", 'rn', 'created_at'],\r\n    toRemove: [\"id\"],\r\n    exclude: [],\r\n    uneditable: [],\r\n    checkbox: [\"spare_exists\"],\r\n    date: [],\r\n    datetime: [],\r\n    status:{\r\n        field: \"status\",\r\n        calculate: (row) => {\r\n            const today = new Date();\r\n            const todayString = today.toISOString().slice(0, 10); // Format: 'YYYY-MM-DD'\r\n\r\n            const hourInDate = row.hour_in ? row.hour_in.slice(0, 10) : null;\r\n            const hourOutDate = row.hour_out ? row.hour_out.slice(0, 10) : null;\r\n\r\n            // Check if either hour_in or hour_out is today\r\n            const isToday = (hourInDate === todayString) || (hourOutDate === todayString);\r\n\r\n            if (!isToday) {\r\n                return \"Tidak Hadir\";\r\n            }\r\n\r\n            // If today, check status\r\n            if (row.hour_out == null) {\r\n                return \"Masuk\"; // Entered\r\n            } else {\r\n                return \"Pulang\"; // Left\r\n            }\r\n        }\r\n    },\r\n});\r\n\r\nconst urls = ref({\r\n  data: `${userData.apiBaseUrl}/absensi-latest`,\r\n  dropdowns: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    },\r\n    tk_no: {\r\n      url: userData.apiBaseUrl + \"/dropdowns/tk_no\",\r\n      valueField: \"tk_no\",\r\n      column: \"tk_no\"\r\n    },\r\n  },\r\n  get: {\r\n    vehicle_type: {\r\n      url: userData.apiBaseUrl + \"/get/vehicle_type\",\r\n      valueField: \"vehicle_type\",\r\n      column: \"vehicle_type\"\r\n    }\r\n  }\r\n});\r\n//--\r\n\r\n\r\nconst currentTime = ref();\r\nfunction updateClock() {\r\n  const now = new Date();\r\n  const hours = now.getHours().toString().padStart(2, \"0\");\r\n  const minutes = now.getMinutes().toString().padStart(2, \"0\");\r\n  const seconds = now.getSeconds().toString().padStart(2, \"0\");\r\n  currentTime.value = `${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\nonMounted(() => {\r\n  \r\n  // Mulai jam berjalan\r\n  updateClock();\r\n  setInterval(updateClock, 1000);\r\n});\r\n\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <h4 class=\"fw-bold\">Absensi</h4>\r\n            <div class=\"text-end\">\r\n                <h5 class=\"fw-bold text-primary\"></h5>\r\n                <div>{{ currentTime }}</div>\r\n            </div>\r\n        </div>\r\n        <BigTable\r\n        :settings=\"settings\"\r\n        :urls=\"urls\"\r\n        :fields=\"fields\"\r\n        :canInsert=\"false\"\r\n        :canUpdate=\"true\"\r\n        ></BigTable>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>"],"names":["userData","useUserStore","settings","ref","fields","row","todayString","hourInDate","hourOutDate","urls","currentTime","updateClock","now","hours","minutes","seconds","onMounted"],"mappings":"geAQA,MAAMA,EAAWC,EAAY,EAGvBC,EAAWC,EAAI,CACnB,MAAO,GACP,WAAY,GACZ,KAAM,CAAC,GAAG,GAAG,GAAG,CAClB,CAAC,EAEKC,EAASD,EAAI,CACf,SAAU,CAAC,MAAO,WAAY,MAAO,WAAY,KAAM,OAAQ,MAAO,GAAG,EACzE,SAAU,CAAC,SAAU,OAAQ,aAAc,UAAW,UAAW,UAAU,EAC3E,WAAY,CAAC,aAAa,EAC1B,OAAQ,CAAC,UAAW,KAAM,YAAY,EACtC,SAAU,CAAC,IAAI,EACf,QAAS,CAAE,EACX,WAAY,CAAE,EACd,SAAU,CAAC,cAAc,EACzB,KAAM,CAAE,EACR,SAAU,CAAE,EACZ,OAAO,CACH,MAAO,SACP,UAAYE,GAAQ,CAEhB,MAAMC,EADQ,IAAI,OACQ,YAAW,EAAG,MAAM,EAAG,EAAE,EAE7CC,EAAaF,EAAI,QAAUA,EAAI,QAAQ,MAAM,EAAG,EAAE,EAAI,KACtDG,EAAcH,EAAI,SAAWA,EAAI,SAAS,MAAM,EAAG,EAAE,EAAI,KAK/D,OAFiBE,IAAeD,GAAiBE,IAAgBF,EAO7DD,EAAI,UAAY,KACT,QAEA,SAPA,aASd,CACJ,CACL,CAAC,EAEKI,EAAON,EAAI,CACf,KAAM,GAAGH,EAAS,UAAU,kBAC5B,UAAW,CACT,aAAc,CACZ,IAAKA,EAAS,WAAa,0BAC3B,WAAY,eACZ,OAAQ,cACT,EACD,MAAO,CACL,IAAKA,EAAS,WAAa,mBAC3B,WAAY,QACZ,OAAQ,OACT,CACF,EACD,IAAK,CACH,aAAc,CACZ,IAAKA,EAAS,WAAa,oBAC3B,WAAY,eACZ,OAAQ,cACT,CACF,CACH,CAAC,EAIKU,EAAcP,EAAG,EACvB,SAASQ,GAAc,CACrB,MAAMC,EAAM,IAAI,KACVC,EAAQD,EAAI,SAAU,EAAC,SAAQ,EAAG,SAAS,EAAG,GAAG,EACjDE,EAAUF,EAAI,WAAY,EAAC,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrDG,EAAUH,EAAI,WAAY,EAAC,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC3DF,EAAY,MAAQ,GAAGG,CAAK,IAAIC,CAAO,IAAIC,CAAO,EACpD,CAEA,OAAAC,EAAU,IAAM,CAGdL,IACA,YAAYA,EAAa,GAAI,CAC/B,CAAC"}