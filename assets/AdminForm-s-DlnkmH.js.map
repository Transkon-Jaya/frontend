{"version":3,"file":"AdminForm-s-DlnkmH.js","sources":["../../src/views/de/AdminForm.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport {API_BASE_URL} from \"@/config/config\";\r\nimport MiniTable from \"@/components/MiniTable.vue\";\r\nimport BigTable from \"@/components/BigTable.vue\";\r\nimport MiniForm from \"@/components/MiniForm.vue\";\r\n\r\nimport { useUserStore} from \"@/stores/user.js\";\r\nconst userData = useUserStore();\r\n\r\nconst settings = ref({\r\n   title: \"Down Equipment\",\r\n   size: [5,55,100],\r\n   canInsert: true,\r\n   canUpdate: true\r\n});\r\n\r\nconst urls = ref({\r\n  data: `${API_BASE_URL}/de_site`,\r\n  params: `?username=${encodeURIComponent(userData.username)}`,\r\n  dropdowns: {\r\n    vehicle_type: { url: API_BASE_URL + \"/dropdowns/vehicle_type\", valueField: \"vehicle_type\", column: \"vehicle_type\" },\r\n    tk_no: {  url: API_BASE_URL + \"/dropdowns/tk_no\", valueField: \"tk_no\", column: \"tk_no\" },\r\n    tk_no_spare: {  url: API_BASE_URL + \"/dropdowns/tk_no\", valueField: \"tk_no\", column: \"tk_no\" },\r\n    category: {url: API_BASE_URL + \"/dropdowns/op_svc_category\", valueField: \"category\", column: \"category\"},\r\n    engine_: {url: API_BASE_URL + \"/dropdowns/op_svc_category_engine\", valueField: \"engine_\", column: \"engine_\"},\r\n    drive_train: {url: API_BASE_URL + \"/dropdowns/op_svc_category_driveTrain\", valueField: \"drive_train\", column: \"drive_train\"},\r\n    chasis: {url: API_BASE_URL + \"/dropdowns/op_svc_category_chasis\", valueField: \"chasis\", column: \"chasis\"},\r\n    electrical_body: {url: API_BASE_URL + \"/dropdowns/op_svc_category_electricalBody\", valueField: \"electrical_body\", column: \"electrical_body\"},\r\n    ac_system: {url: API_BASE_URL + \"/dropdowns/op_svc_category_acSystem\", valueField: \"ac_system\", column: \"ac_system\"},\r\n    repair_electrical: {url: API_BASE_URL + \"/dropdowns/op_svc_category_repairElectrical\", valueField: \"repair_electrical\", column: \"repair_electrical\"},\r\n    defact: {url: API_BASE_URL + \"/dropdowns/op_svc_category_defact\", valueField: \"defact\", column: \"defact\"},\r\n    body: {url: API_BASE_URL + \"/dropdowns/op_svc_category_body\", valueField: \"body\", column: \"body\"},\r\n  },\r\n  get: {\r\n    vehicle_type: {url: API_BASE_URL + \"/get/vehicle_type\", valueField: \"vehicle_type\", column: \"vehicle_type\"}\r\n  }\r\n});\r\n\r\nconst fields = ref({\r\n  firstCol: {label: \"TK Number\", field: \"tk_no\", type: \"type\"},\r\n    columns: [\r\n        {column: \"tk_no\", label: \"TK NO\", filterText: \"Filter TK\", required: true,},\r\n        {column: \"vehicle_type\", label: \"Vehicle Type\", filterText: \"All Vehicle\",\r\n          autofill: {\r\n            triggeredBy: \"tk_no\",\r\n            url: \"get/vehicle_type\",\r\n            getValue: res => res[0]\r\n          }\r\n        },\r\n        {column: \"plate_no\", label: \"Plate Number\", filterText: \"All Plate No\",\r\n          autofill: {\r\n            triggeredBy: \"tk_no\",\r\n            url: \"get/plate_no\",\r\n            getValue: res => res[0]\r\n          }\r\n        },\r\n        {column: \"km\", label: \"Kilometer\", filterText: \"km\", required: true,},\r\n        {column: \"down_since\", label: \"Down Since\", filterText: \"Down Since\", required: true,},\r\n        {column: \"estimated_return\", label: \"Estimated Return\"},\r\n        {column: \"spare_exists\", label: \"Unit Spare\"},\r\n        {column: \"tk_no_spare\", label: \"TK NO Spare\", filterText: \"Filter TK\", required: true,\r\n          visibleIf: (formData) => formData.spare_exists === true\r\n        },\r\n        {column: \"category\", label: \"Category\", filterText: \"Category\"},\r\n        {column: \"schedule\", label: \"Schedule\", filterText: \"Schedule\", required: true,\r\n          visibleIf: (formData) => {\r\n              return false;\r\n            },\r\n          compute: (formData) => {\r\n            console.log(\"formdata \", formData.category);\r\n            console.log(\"some \", formData.category.some(item => item.value === \"Schedule\"))\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Schedule\");\r\n          }\r\n        },\r\n        {column: \"engine_\", label: \"Engine\", filterText: \"Engine\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Engine\");\r\n          }\r\n        },\r\n        {column: \"drive_train\", label: \"Drive Train\", filterText: \"Drive Train\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Drive Train\");\r\n          }\r\n        },\r\n        {column: \"chasis\", label: \"Chasis\", filterText: \"Chasis\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Chasis\");\r\n          }\r\n        },\r\n        {column: \"electrical_body\", label: \"Electrical Body\", filterText: \"Electrical Body\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Electrical Body\");\r\n          }\r\n        },\r\n        {column: \"ac_system\", label: \"AC System\", filterText: \"AC System\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"AC System\");\r\n          }\r\n        },\r\n        {column: \"repair_electrical\", label: \"Repair Electrical\", filterText: \"Repair Electrical\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Repair Electrical\");\r\n          }\r\n        },\r\n        {column: \"defact\", label: \"Defact\", filterText: \"Defact\", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Defact\");\r\n          }\r\n        },\r\n        {column: \"body\", label: \"Body \", filterText: \"Body \", required: true,\r\n          visibleIf: (formData) => {\r\n            return Array.isArray(formData.category) && formData.category.some(item => item.value === \"Body\");\r\n          }\r\n        },\r\n        {column: \"comment\", label: \"Comment\", filterText: \"Comment\"},\r\n        {column: \"progress\", label: \"Progress\", \"filterText\" : \"Progress\", visibleIf: (formData) => {return false;}}, \r\n    ],\r\n    priority: [\"done\", \"vehicle_type\", \"plate_no\"],\r\n    hidden: [\"id\", \"schedule\"],\r\n    toRemove: [\"customer\", \"alt_location\", \"username\", \"createdAt\", \"lastUpdated\",\"vgtSelected\"],\r\n    exclude: [\"vehicle_type\", \"plate_no\", \"category\"],\r\n    merge: [\r\n    ],\r\n    uneditable: [\"vehicle_type\", \"plate_no\"],\r\n    dropdown: [\r\n        \"tk_no\", \"tk_no_spare\"\r\n    ],\r\n    multiselect: [\r\n      \"category\", \"engine_\", \"drive_train\", \"chasis\", \"electrical_body\", \"ac_system\", \"repair_electrical\", \"defact\", \"body\"\r\n    ],\r\n    checkbox: [\r\n      \"done\", \"spare_exists\", \"deleted\"\r\n    ],\r\n    date: [\r\n    ],\r\n    datetime: [\r\n      \"down_since\", \"estimated_return\"\r\n    ],\r\n    number: [\r\n      \"km\",\r\n    ],\r\n});\r\n\r\nconst formData = ref({});\r\nonMounted(() => {\r\n  fields.value.columns.forEach(col => {\r\n    formData.value[col.column] = col.default !== undefined ? col.default : '';\r\n  });\r\n  formData.value[\"username\"] = userData.username;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <MiniForm\r\n    v-if=\"settings.canInsert\"\r\n      v-model=\"formData\"\r\n      :fields=\"fields\"\r\n      :urls=\"urls\"\r\n    />\r\n    <div class=\"card\">\r\n      <BigTable\r\n        :settings=\"settings\"\r\n        :urls=\"urls\"\r\n        :fields=\"fields\"\r\n        :canInsert=\"false\"\r\n        :canUpdate=\"true\"\r\n    ></BigTable>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.card {\r\n  table-layout: fixed;\r\n  margin: 40px auto 30px auto;\r\n  width: 85%;\r\n  padding: 40px;\r\n}\r\n  .card h3 {\r\n    font-size: 28px;\r\n  }\r\n  </style>\r\n"],"names":["userData","useUserStore","settings","ref","title","size","canInsert","canUpdate","urls","data","API_BASE_URL","params","encodeURIComponent","username","dropdowns","vehicle_type","url","valueField","column","tk_no","tk_no_spare","category","engine_","drive_train","chasis","electrical_body","ac_system","repair_electrical","defact","body","get","fields","firstCol","label","field","type","columns","filterText","required","autofill","triggeredBy","getValue","res","visibleIf","formData","spare_exists","compute","Array","isArray","some","item","value","priority","hidden","toRemove","exclude","merge","uneditable","dropdown","multiselect","checkbox","date","datetime","number","onMounted","forEach","col","default"],"mappings":"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"}