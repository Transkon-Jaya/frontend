import{_ as ct,c as m,g as f,a as e,b as g,v as D,q as M,h as _,t as w,F as q,j as J,e as et,u as mt,r as u,n as Dt,o as ft,p as z,A as j,z as L,k as dt,s as ut,B as Wt,Q as Gt,y as Yt,d as yt}from"./index-Cq0ZFpcm.js";import{E as xt,a as Xt}from"./jspdf.plugin.autotable-DaOqn5QT.js";import{E as qt}from"./exceljs.min-D7XX8oil.js";import{c as at}from"./_commonjsHelpers-Cpj98o6Y.js";const Jt={setup(){const F=mt(),t=u([]),h=u(!0),a=u(!1),S=u(null),T=u(""),o=u(""),k=u(""),i=u(null),s=u(null),d=y=>y?new Date(y).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",I=async()=>{var y,A;try{h.value=!0,S.value=null;const U=await z.get(`${j}/tracking-invoices`,{headers:{Authorization:`Bearer ${F.token}`}});t.value=U.data.data||[]}catch(U){S.value=((A=(y=U.response)==null?void 0:y.data)==null?void 0:A.error)||"Gagal memuat data invoice",console.error("Fetch Error:",U)}finally{h.value=!1}},p=async y=>{try{a.value=!0;const A={acct:y.acct,tax_dept:y.tax_dept,admin:y.admin,expedisi:y.expedisi,remarks:y.remarks};await z.put(`${j}/tracking-invoices`,A,{params:{ta_id:y.ta_id},headers:{Authorization:`Bearer ${F.token}`}})}catch(A){console.error("Gagal update tracking:",A),alert("Gagal menyimpan perubahan. Coba lagi."),I()}finally{a.value=!1}},C=Dt(()=>t.value.filter(y=>{var P;const A=T.value?(P=y.invoiceNo)==null?void 0:P.toLowerCase().includes(T.value.toLowerCase()):!0,U=y.invoiceDate?new Date(y.invoiceDate).toISOString().split("T")[0]:"",B=o.value?U>=o.value:!0,E=k.value?U<=k.value:!0;return A&&B&&E})),H=()=>{T.value="",o.value="",k.value="",i.value&&$(i.value).datepicker("clearDates"),s.value&&$(s.value).datepicker("clearDates")};return ft(()=>{I(),i.value&&$(i.value).datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"id",todayHighlight:!0,clearBtn:!0}).on("changeDate",function(y){o.value=$(this).datepicker("getFormattedDate")}),s.value&&$(s.value).datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"id",todayHighlight:!0,clearBtn:!0}).on("changeDate",function(y){k.value=$(this).datepicker("getFormattedDate")})}),{invoices:t,loading:h,submitting:a,error:S,formatDate:d,updateTracking:p,filterInvoiceNo:T,filterStartDate:o,filterEndDate:k,filteredInvoices:C,resetFilters:H,startDateInput:i,endDateInput:s}}},Kt={class:"info-card"},Qt={class:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between"},Zt={class:"filters d-flex flex-wrap gap-2"},$t={class:"input-group input-group-sm",style:{"max-width":"250px"}},te={class:"card-body"},ee={key:0,class:"text-center py-5"},ae={key:1,class:"alert alert-danger"},oe={key:2,class:"table-responsive"},ne={class:"modern-table"},le={class:"checkbox-cell"},se=["onUpdate:modelValue","onChange","disabled"],re={class:"checkbox-cell"},ie=["onUpdate:modelValue","onChange","disabled"],de={class:"checkbox-cell"},ue=["onUpdate:modelValue","onChange","disabled"],ce={class:"checkbox-cell"},me=["onUpdate:modelValue","onChange","disabled"],fe=["onUpdate:modelValue","onBlur","disabled"];function ve(F,t,h,a,S,T){return f(),m("div",Kt,[e("div",Qt,[t[5]||(t[5]=e("h3",{class:"card-title mb-2 mb-md-0"},"TRANSMITAL INVOICE INTERNAL",-1)),e("div",Zt,[g(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.filterInvoiceNo=o),placeholder:"Cari No. Invoice...",class:"form-control form-control-sm",style:{"max-width":"200px"}},null,512),[[D,a.filterInvoiceNo]])]),e("div",$t,[g(e("input",{type:"text",ref:"startDateInput","onUpdate:modelValue":t[1]||(t[1]=o=>a.filterStartDate=o),class:"form-control form-control-sm datepicker",placeholder:"Start Date"},null,512),[[D,a.filterStartDate]]),t[4]||(t[4]=e("span",{class:"input-group-text"},"→",-1)),g(e("input",{type:"text",ref:"endDateInput","onUpdate:modelValue":t[2]||(t[2]=o=>a.filterEndDate=o),class:"form-control form-control-sm datepicker",placeholder:"End Date"},null,512),[[D,a.filterEndDate]])]),e("button",{class:"btn btn-sm btn-secondary",onClick:t[3]||(t[3]=(...o)=>a.resetFilters&&a.resetFilters(...o))},"Reset")]),e("div",te,[a.loading?(f(),m("div",ee,t[6]||(t[6]=[e("div",{class:"spinner-border text-primary"},null,-1),e("p",null,"Loading invoices...",-1)]))):M("",!0),a.error?(f(),m("div",ae,[t[7]||(t[7]=e("strong",null,"Error:",-1)),_(" "+w(a.error),1)])):(f(),m("div",oe,[e("table",ne,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"No."),e("th",null,"No. Inv"),e("th",null,"Tgl Invoice"),e("th",null,"Acct"),e("th",null,"Tax Dept."),e("th",null,"Admin"),e("th",null,"Expedisi"),e("th",null,"Remarks")])],-1)),e("tbody",null,[(f(!0),m(q,null,J(a.filteredInvoices,(o,k)=>(f(),m("tr",{key:o.ta_id},[e("td",null,w(k+1),1),e("td",null,w(o.invoiceNo),1),e("td",null,w(a.formatDate(o.invoiceDate)),1),e("td",le,[g(e("input",{type:"checkbox","onUpdate:modelValue":i=>o.acct=i,onChange:i=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,se),[[et,o.acct]])]),e("td",re,[g(e("input",{type:"checkbox","onUpdate:modelValue":i=>o.tax_dept=i,onChange:i=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,ie),[[et,o.tax_dept]])]),e("td",de,[g(e("input",{type:"checkbox","onUpdate:modelValue":i=>o.admin=i,onChange:i=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,ue),[[et,o.admin]])]),e("td",ce,[g(e("input",{type:"checkbox","onUpdate:modelValue":i=>o.expedisi=i,onChange:i=>a.updateTracking(o),class:"form-checkbox",disabled:a.submitting},null,40,me),[[et,o.expedisi]])]),e("td",null,[g(e("input",{type:"text","onUpdate:modelValue":i=>o.remarks=i,onBlur:i=>a.updateTracking(o),class:"form-control form-control-sm",disabled:a.submitting,placeholder:"Catatan"},null,40,fe),[[D,o.remarks]])])]))),128))])])]))])])}const pe=ct(Jt,[["render",ve],["__scopeId","data-v-25544ecf"]]);var ot={exports:{}},ge=ot.exports,kt;function be(){return kt||(kt=1,function(F,t){(function(h,a){a()})(ge,function(){function h(s,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function a(s,d,I){var p=new XMLHttpRequest;p.open("GET",s),p.responseType="blob",p.onload=function(){i(p.response,d,I)},p.onerror=function(){console.error("could not download file")},p.send()}function S(s){var d=new XMLHttpRequest;d.open("HEAD",s,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function T(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof at=="object"&&at.global===at?at:void 0,k=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function(s,d,I){var p=o.URL||o.webkitURL,C=document.createElement("a");d=d||s.name||"download",C.download=d,C.rel="noopener",typeof s=="string"?(C.href=s,C.origin===location.origin?T(C):S(C.href)?a(s,d,I):T(C,C.target="_blank")):(C.href=p.createObjectURL(s),setTimeout(function(){p.revokeObjectURL(C.href)},4e4),setTimeout(function(){T(C)},0))}:"msSaveOrOpenBlob"in navigator?function(s,d,I){if(d=d||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(h(s,I),d);else if(S(s))a(s,d,I);else{var p=document.createElement("a");p.href=s,p.target="_blank",setTimeout(function(){T(p)})}}:function(s,d,I,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof s=="string")return a(s,d,I);var C=s.type==="application/octet-stream",H=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||C&&H||k)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var E=A.result;E=y?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=E:location=E,p=null},A.readAsDataURL(s)}else{var U=o.URL||o.webkitURL,B=U.createObjectURL(s);p?p.location=B:location.href=B,p=null,setTimeout(function(){U.revokeObjectURL(B)},4e4)}});o.saveAs=i.saveAs=i,F.exports=i})}(ot)),ot.exports}var ye=be();const xe={setup(){const F=mt(),t=u([]),h=u(!1),a=u(!1),S=u(null),T=u([]),o=u(!1),k=u(!1),i=u(!1),s=u(null),d=u(""),I=u(""),p=u(""),C=u(""),H=u(""),y=u(""),A=u(""),U=u(""),B=u("asc"),E=u({ta_id:"",date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""}),P=u(1),vt=u(10),K=u(1),pt=u(0);let nt=null;const lt=u(null),st=u(null),Q=()=>{nt&&clearTimeout(nt),nt=setTimeout(()=>{P.value=1,O()},300)},wt=n=>{U.value===n?B.value=B.value==="asc"?"desc":"asc":(U.value=n,B.value="asc"),Q()},O=async()=>{var n,b;try{h.value=!0,S.value=null;const r={page:P.value,limit:vt.value};I.value&&(r.start_date=I.value),p.value&&(r.end_date=p.value),d.value&&(r.ta_id=d.value),C.value&&(r.from_origin=C.value),H.value&&(r.description=H.value),y.value&&(r.company=y.value),A.value&&(r.ras_status=A.value),U.value&&(r.sort_by=U.value,r.sort_order=B.value);const x=await z.get(`${j}/transmittal`,{params:r,headers:{Authorization:`Bearer ${F.token}`}});t.value=x.data.items||[],K.value=x.data.totalPages||1,pt.value=x.data.totalCount||0}catch(r){S.value=((b=(n=r.response)==null?void 0:n.data)==null?void 0:b.error)||"Failed to load data",console.error("Fetch Error:",r)}finally{h.value=!1}},ht=async()=>{try{h.value=!0;const n={page:1,limit:1e4};I.value&&(n.start_date=I.value),d.value&&(n.ta_id=d.value),C.value&&(n.from_origin=C.value),H.value&&(n.description=H.value),y.value&&(n.company=y.value),A.value&&(n.ras_status=A.value),U.value&&(n.sort_by=U.value,n.sort_order=B.value);const r=(await z.get(`${j}/transmittal`,{params:n,headers:{Authorization:`Bearer ${F.token}`}})).data.items||[];if(r.length===0){alert("Tidak ada data yang sesuai filter untuk diekspor.");return}const x=new qt.Workbook,c=x.addWorksheet("Transmittal Data");c.addRow(["TA ID","Date","From Origin","Description","Company","Status","Address","State","Attention","AWB/Reg","Expeditur","Receiver Name","Receive Date","Remarks"]),c.getRow(1).eachCell(v=>{v.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD3D3D3"}},v.font={bold:!0},v.alignment={vertical:"middle",horizontal:"center",wrapText:!0},v.border={style:"thin"}});const R=v=>{if(!v)return"";const V=new Date(v);return`${V.getDate()}/${V.getMonth()+1}/${V.getFullYear()}`};r.forEach(v=>{c.addRow([v.ta_id,R(v.date),v.from_origin,v.description,v.company,v.ras_status,v.address,v.state,v.attention,v.awb_reg,v.expeditur,v.receiver_name,R(v.receive_date),v.remarks])}),c.columns.forEach(v=>{let V=10;v.eachCell({includeEmpty:!0},W=>{if(W.value){const X=W.value.toString().length;X>V&&(V=X)}}),v.width=V<20?20:V});const N=await x.xlsx.writeBuffer(),Y=`Transmittal_Data_${new Date().toISOString().split("T")[0]}.xlsx`;ye.saveAs(new Blob([N]),Y)}catch(n){console.error("Export Excel gagal:",n),alert("Gagal mengekspor data ke Excel.")}finally{h.value=!1}},Ct=n=>["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][n-1]||"",_t=async n=>{var b,r;if(!n)return alert("TA ID tidak valid.");try{const c=(await z.get(`${j}/transmittal`,{params:{ta_id:n},headers:{Authorization:`Bearer ${F.token}`}})).data.data;if(!c)throw new Error("Data tidak ditemukan.");const l=new xt({compress:!0,unit:"mm",format:"a4"}),R=new Image;R.src=Gt,R.onload=()=>{l.addImage(R,"PNG",15,15,30,12),l.setFontSize(16).setFont(void 0,"bold"),l.text("TRANSMITTAL ADVICE",105,22,{align:"center"});const N=new Date(c.date),Y=Ct(N.getMonth()+1),v=N.getFullYear();l.setFontSize(10).setFont(void 0,"normal"),l.text(`No: ${c.ta_id}/${Y}/${v}`,105,28,{align:"center"}),l.text(`TA Date: ${bt(c.date)}`,160,28),l.setDrawColor(0),l.line(15,30,195,30),l.setFont(void 0,"bold").setFontSize(10),l.text("PT. TRANSKON JAYA",15,36),l.setFont(void 0,"normal"),l.text(`Attention: ${c.attention||"Account Payable"}`,15,42),l.text(`Company: ${c.company}`,15,48),l.text(`Dept. of Origin: ${c.from_origin}`,15,54);const V="Address : ",W=c.address||"",X=120,rt=36,jt=X+l.getTextWidth(V),Z=l.splitTextToSize(W,70-l.getTextWidth(V));l.text(V+Z[0],X,rt);for(let G=1;G<Z.length;G++)l.text(Z[G],jt,rt+G*5);const Ot=rt+Z.length*5;l.text(`City/State: ${c.state}`,X,Ot),l.line(15,58,195,58),l.text("Undercover this transmittal, We are forwarding you the following:",15,64);const Ht=[["1",(c.description||"").split(",").map(G=>G.trim()).filter(G=>G).join(", "),c.remarks||""]];Xt(l,{head:[["No.","Document Description","Remarks"]],body:Ht,startY:68,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[51,51,51],textColor:[255,255,255],halign:"center",fontStyle:"bold"},columnStyles:{0:{halign:"center",cellWidth:10},1:{cellWidth:130},2:{cellWidth:40}}});const tt=l.lastAutoTable.finalY+100;l.text("Received By:",15,tt+60),l.text("Date:",15,tt+90),l.setFontSize(8),l.text("Please Acknowledge Receipt by returning the copy of this Transmittal to PT. Transkon Jaya",15,tt+95),l.text("or Return by Fax (0542) 770403",15,tt+100);const it=document.createElement("a");it.href=URL.createObjectURL(l.output("blob")),it.download=`Transmittal_${c.ta_id}.pdf`,it.click()}}catch(x){alert("Gagal mengunduh PDF: "+(((r=(b=x.response)==null?void 0:b.data)==null?void 0:r.error)||x.message))}},Tt=async n=>{var b,r;if(!n)return alert("TA ID tidak valid.");try{const c=(await z.get(`${j}/transmittal`,{params:{ta_id:n},headers:{Authorization:`Bearer ${F.token}`}})).data.data;if(!c)throw new Error("Data tidak ditemukan.");const l=new xt({unit:"mm",format:"a4"}),R=20,N=20,Y=170;l.rect(R,N,Y,60),l.setFont(void 0,"bold").setFontSize(12),l.text(`To : ${c.company||""}`,R+3,N+8),l.setFontSize(10),l.text("Attn :",R+3,N+18),l.setFont(void 0,"normal"),l.text(c.attention||"",R+25,N+18),l.setFont(void 0,"bold"),l.text("Address:",R+3,N+28);const v=l.splitTextToSize(c.address||"",Y-25);v.length>0&&l.text(v[0],R+25,N+28);for(let W=1;W<v.length;W++)l.text(v[W],R+25,N+28+W*5);const V=N+28+v.length*5;l.text(c.state||"",R+25,V),l.setFont(void 0,"bold"),l.text("Phone :",R+3,V+10),l.setFont(void 0,"normal"),l.text("",R+25,V+10),l.save(`Address_${c.company}.pdf`)}catch(x){alert("Gagal unduh alamat: "+(((r=(b=x.response)==null?void 0:b.data)==null?void 0:r.error)||x.message))}},It=async n=>{const b=n.target.value;if(b.length<2){T.value=[];return}try{const r=await z.get(`${j}/customers_dropdown`,{params:{search:b},headers:{Authorization:`Bearer ${F.token}`}});T.value=r.data.data||[]}catch{T.value=[]}},Ft=n=>{E.value.company=n.name,E.value.address=n.address||"",E.value.state=n.state||"",T.value=[]},St=async()=>{var n,b;try{h.value=!0;const x=(await At()).number,c="TRJA"+String(x).padStart(4,"0");E.value={ta_id:c,date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""},i.value=!1,o.value=!0}catch(r){S.value=((b=(n=r.response)==null?void 0:n.data)==null?void 0:b.error)||"Failed to generate new TA ID",console.error("Generate ID Error:",r)}finally{h.value=!1}},At=async()=>(await z.get(`${j}/get-next-ta-id`,{headers:{Authorization:`Bearer ${F.token}`}})).data,Et=async n=>{var b,r;try{h.value=!0;const c=(await z.get(`${j}/transmittal`,{params:{ta_id:n},headers:{Authorization:`Bearer ${F.token}`}})).data.data;E.value={...c,receive_date:c.receive_date||null},i.value=!0,o.value=!0}catch(x){S.value="Gagal muat data: "+(((r=(b=x.response)==null?void 0:b.data)==null?void 0:r.error)||x.message)}finally{h.value=!1}},gt=()=>{o.value=!1,E.value={ta_id:"",date:"",from_origin:"",document_type:"",attention:"",company:"",address:"",state:"",awb_reg:"",expeditur:"",receiver_name:"",receive_date:null,ras_status:"",description:"",remarks:""}},Ut=async()=>{var n,b;try{a.value=!0,E.value.receive_date===""&&(E.value.receive_date=null);const r=i.value?"put":"post",x=i.value?{ta_id:E.value.ta_id}:{},c=await z[r](`${j}/transmittal`,E.value,{params:x,headers:{Authorization:`Bearer ${F.token}`,"Content-Type":"application/json"}});if(c.data.status===200||c.data.status===201)gt(),O();else throw new Error(c.data.error||"Simpan gagal")}catch(r){S.value=((b=(n=r.response)==null?void 0:n.data)==null?void 0:b.error)||r.message}finally{a.value=!1}},Rt=n=>{s.value=n,k.value=!0},Vt=async()=>{var n,b;try{a.value=!0,await z.delete(`${j}/transmittal`,{params:{ta_id:s.value},headers:{Authorization:`Bearer ${F.token}`}}),k.value=!1,O()}catch(r){S.value="Hapus gagal: "+(((b=(n=r.response)==null?void 0:n.data)==null?void 0:b.error)||r.message)}finally{a.value=!1}},Mt=()=>{P.value<K.value&&(P.value++,O())},Pt=()=>{P.value>1&&(P.value--,O())},Nt=n=>{P.value=n,O()},Bt=()=>{P.value=1,O()},bt=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",Lt=n=>({Pending:"badge bg-warning",Received:"badge bg-info",Completed:"badge bg-success"})[n]||"badge bg-secondary",zt=Dt(()=>{const n=[];let r=Math.max(1,P.value-2),x=Math.min(K.value,r+5-1);x-r+1<5&&(r=Math.max(1,x-5+1));for(let c=r;c<=x;c++)n.push(c);return n});return ft(async()=>{try{if(await Wt(),typeof $>"u"){console.warn("jQuery tidak tersedia. Datepicker tidak akan diinisialisasi."),O();return}O(),lt.value&&$(lt.value).datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"id",todayHighlight:!0,clearBtn:!0}).on("changeDate",function(){I.value=$(this).datepicker("getFormattedDate"),Q()}),st.value&&$(st.value).datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"id",todayHighlight:!0,clearBtn:!0}).on("changeDate",function(){p.value=$(this).datepicker("getFormattedDate"),Q()})}catch(n){S.value="Inisialisasi gagal: "+n.message,console.error(n)}}),{transmittals:t,loading:h,error:S,submitting:a,customers:T,showModal:o,isEditing:i,showDeleteModal:k,deleteTaId:s,formData:E,filterTaId:d,filterStartDate:I,filterEndDate:p,filterFromOrigin:C,filterNoInv:H,filterCompany:y,filterStatus:A,startDateInput:lt,endDateInput:st,sortData:wt,sortColumn:U,sortDirection:B,currentPage:P,itemsPerPage:vt,totalPages:K,totalCount:pt,visiblePages:zt,fetchTransmittals:O,openAddModal:St,openEditModal:Et,submitForm:Ut,downloadPdf:_t,downloadAddress:Tt,exportExcel:ht,confirmDelete:Rt,deleteTransmittal:Vt,closeModal:gt,nextPage:Mt,prevPage:Pt,goToPage:Nt,resetPagination:Bt,applyFilters:Q,formatDate:bt,statusBadgeClass:Lt,handleCompanyInput:It,selectCustomer:Ft}}},ke={class:"container-fluid"},De={class:"card border-0 shadow"},we={class:"card-header bg-black text-white"},he={class:"d-flex justify-content-between align-items-center"},Ce=["disabled"],_e=["disabled"],Te=["disabled"],Ie={class:"card-body"},Fe={class:"d-flex align-items-center gap-2 mb-2"},Se={key:0,class:"alert alert-danger alert-dismissible fade show mb-4"},Ae={key:1,class:"text-center py-5"},Ee={key:2,class:"text-center py-5"},Ue={key:3},Re={class:"table-responsive"},Ve={class:"table table-hover table-bordered"},Me={class:"table-light"},Pe={class:"mt-1"},Ne={key:0,class:"text-muted"},Be={class:"mt-1"},Le={key:0,class:"text-muted"},ze={class:"mt-1"},je={key:0,class:"text-muted"},Oe={class:"mt-1"},He={key:0,class:"text-muted"},We={class:"mt-1"},Ge={key:0,class:"text-muted"},Ye={class:"mt-1"},Xe={key:0,class:"text-muted"},qe={class:"text-center"},Je={class:"d-flex justify-content-center gap-2"},Ke=["onClick"],Qe=["onClick"],Ze=["onClick"],$e=["onClick"],ta={class:"d-flex justify-content-between align-items-center mt-4"},ea={class:"text-muted"},aa={class:"pagination pagination-sm"},oa=["onClick"],na={class:"form-group mb-0",style:{width:"120px"}},la={class:"modal-content border-0 shadow"},sa={class:"modal-header bg-black text-white"},ra={class:"modal-title"},ia={class:"modal-body"},da={class:"row g-3"},ua={class:"col-md-6"},ca=["readonly","placeholder"],ma={class:"col-md-6"},fa={class:"col-md-6"},va={class:"col-md-6"},pa={class:"col-md-6 position-relative"},ga={key:0,class:"list-group mt-1",style:{position:"absolute","z-index":"1000",width:"calc(100% - 2px)","max-height":"200px","overflow-y":"auto"}},ba=["onClick"],ya={class:"col-md-6"},xa={class:"col-md-6"},ka={class:"col-md-6"},Da={class:"col-md-6"},wa={class:"col-md-12"},ha={class:"col-md-6"},Ca={class:"col-md-6"},_a={class:"col-md-6"},Ta={class:"col-md-6"},Ia={class:"col-md-6"},Fa={class:"modal-footer border-top-0 mt-4"},Sa=["disabled"],Aa={key:0,class:"spinner-border spinner-border-sm me-1"},Ea={class:"modal-content border-0 shadow"},Ua={class:"modal-header bg-danger text-white"},Ra={class:"modal-body"},Va={class:"modal-footer border-top-0"},Ma=["disabled"],Pa={key:0,class:"spinner-border spinner-border-sm me-1"};function Na(F,t,h,a,S,T){return f(),m("div",ke,[e("div",De,[e("div",we,[e("div",he,[t[62]||(t[62]=e("h3",{class:"mb-0"},"Transmittal Management",-1)),e("div",null,[e("button",{onClick:t[0]||(t[0]=(...o)=>a.openAddModal&&a.openAddModal(...o)),class:"btn btn-sm btn-light me-2",disabled:a.loading},t[59]||(t[59]=[e("i",{class:"fas fa-plus me-1"},null,-1),_(" Add New ")]),8,Ce),e("button",{onClick:t[1]||(t[1]=(...o)=>a.fetchTransmittals&&a.fetchTransmittals(...o)),class:"btn btn-sm btn-light me-2",disabled:a.loading},[e("i",{class:L(["fas fa-sync",{"fa-spin":a.loading}])},null,2),t[60]||(t[60]=_(" Refresh "))],8,_e),e("button",{onClick:t[2]||(t[2]=(...o)=>a.exportExcel&&a.exportExcel(...o)),class:"btn btn-sm btn-success",disabled:a.loading},[t[61]||(t[61]=e("i",{class:"fas fa-file-excel me-1"},null,-1)),_(" "+w(a.loading?"Downloading...":"Download All to Excel"),1)],8,Te)])])]),e("div",Ie,[e("div",Fe,[g(e("input",{ref:"startDateInput",type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>a.filterStartDate=o),class:"form-control form-control-sm datepicker",placeholder:"Start",onChange:t[4]||(t[4]=(...o)=>a.applyFilters&&a.applyFilters(...o)),style:{"max-width":"120px"}},null,544),[[D,a.filterStartDate]]),g(e("input",{ref:"endDateInput",type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>a.filterEndDate=o),class:"form-control form-control-sm datepicker",placeholder:"End",onChange:t[6]||(t[6]=(...o)=>a.applyFilters&&a.applyFilters(...o)),style:{"max-width":"120px"}},null,544),[[D,a.filterEndDate]])]),a.error?(f(),m("div",Se,[t[63]||(t[63]=e("strong",null,"Error:",-1)),_(" "+w(a.error)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[7]||(t[7]=o=>a.error=null)})])):M("",!0),a.loading&&!a.showModal?(f(),m("div",Ae,t[64]||(t[64]=[e("div",{class:"spinner-border text-primary",role:"status"},null,-1),e("p",{class:"mt-2"},"Loading transmittals...",-1)]))):a.transmittals.length===0&&!a.loading?(f(),m("div",Ee,[t[66]||(t[66]=e("i",{class:"fas fa-database fa-3x text-muted mb-3"},null,-1)),t[67]||(t[67]=e("h5",null,"No Transmittals Found",-1)),t[68]||(t[68]=e("p",{class:"text-muted"},"There are no transmittal records available",-1)),e("button",{onClick:t[8]||(t[8]=(...o)=>a.openAddModal&&a.openAddModal(...o)),class:"btn btn-primary me-2"},t[65]||(t[65]=[e("i",{class:"fas fa-plus me-1"},null,-1),_(" Create New ")]))])):(f(),m("div",Ue,[e("div",Re,[e("table",Ve,[e("thead",Me,[e("tr",null,[e("th",{onClick:t[11]||(t[11]=o=>a.sortData("ta_id")),style:{cursor:"pointer"}},[t[69]||(t[69]=_(" TA ID ")),e("div",Pe,[g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>a.filterTaId=o),type:"text",class:"form-control form-control-sm",placeholder:"Filter...",onInput:t[10]||(t[10]=(...o)=>a.applyFilters&&a.applyFilters(...o))},null,544),[[D,a.filterTaId]])]),a.sortColumn==="ta_id"?(f(),m("small",Ne,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),e("th",{onClick:t[14]||(t[14]=o=>a.sortData("date")),style:{cursor:"pointer"}},[t[70]||(t[70]=_(" Date ")),e("div",Be,[g(e("input",{ref:"startDateInput",type:"text","onUpdate:modelValue":t[12]||(t[12]=o=>a.filterStartDate=o),class:"form-control form-control-sm datepicker",placeholder:"Start",onChange:t[13]||(t[13]=(...o)=>a.applyFilters&&a.applyFilters(...o)),style:{"max-width":"120px"}},null,544),[[D,a.filterStartDate]])]),a.sortColumn==="date"?(f(),m("small",Le,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),e("th",{onClick:t[17]||(t[17]=o=>a.sortData("from_origin")),style:{cursor:"pointer"}},[t[71]||(t[71]=_(" From Origin ")),e("div",ze,[g(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>a.filterFromOrigin=o),type:"text",class:"form-control form-control-sm",placeholder:"Filter...",onInput:t[16]||(t[16]=(...o)=>a.applyFilters&&a.applyFilters(...o))},null,544),[[D,a.filterFromOrigin]])]),a.sortColumn==="from_origin"?(f(),m("small",je,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),e("th",{onClick:t[20]||(t[20]=o=>a.sortData("description")),style:{cursor:"pointer"}},[t[72]||(t[72]=_(" No. Inv ")),e("div",Oe,[g(e("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>a.filterNoInv=o),type:"text",class:"form-control form-control-sm",placeholder:"Filter...",onInput:t[19]||(t[19]=(...o)=>a.applyFilters&&a.applyFilters(...o))},null,544),[[D,a.filterNoInv]])]),a.sortColumn==="description"?(f(),m("small",He,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),e("th",{onClick:t[23]||(t[23]=o=>a.sortData("company")),style:{cursor:"pointer"}},[t[73]||(t[73]=_(" Company ")),e("div",We,[g(e("input",{"onUpdate:modelValue":t[21]||(t[21]=o=>a.filterCompany=o),type:"text",class:"form-control form-control-sm",placeholder:"Filter...",onInput:t[22]||(t[22]=(...o)=>a.applyFilters&&a.applyFilters(...o))},null,544),[[D,a.filterCompany]])]),a.sortColumn==="company"?(f(),m("small",Ge,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),e("th",{class:"text-center align-middle",onClick:t[26]||(t[26]=o=>a.sortData("ras_status")),style:{cursor:"pointer"}},[t[75]||(t[75]=_(" Status ")),e("div",Ye,[g(e("select",{"onUpdate:modelValue":t[24]||(t[24]=o=>a.filterStatus=o),class:"form-select form-select-sm",onChange:t[25]||(t[25]=(...o)=>a.applyFilters&&a.applyFilters(...o))},t[74]||(t[74]=[e("option",{value:""},"All",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Received"},"Received",-1),e("option",{value:"Completed"},"Completed",-1)]),544),[[dt,a.filterStatus]])]),a.sortColumn==="ras_status"?(f(),m("small",Xe,[e("i",{class:L(["fas",a.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)])):M("",!0)]),t[76]||(t[76]=e("th",{class:"text-center align-middle",style:{"vertical-align":"middle !important","text-align":"center"}},"Actions",-1)),t[77]||(t[77]=e("th",{class:"text-center align-middle",style:{"vertical-align":"middle !important","text-align":"center"}},"Download",-1)),t[78]||(t[78]=e("th",{class:"text-center align-middle",style:{"vertical-align":"middle !important","text-align":"center"}},"Address",-1))])]),e("tbody",null,[(f(!0),m(q,null,J(a.transmittals,o=>(f(),m("tr",{key:o.ta_id},[e("td",null,[e("code",null,w(o.ta_id),1)]),e("td",null,w(a.formatDate(o.date)),1),e("td",null,w(o.from_origin),1),e("td",null,w(o.description),1),e("td",null,w(o.company),1),e("td",null,[e("span",{class:L(a.statusBadgeClass(o.ras_status))},w(o.ras_status),3)]),e("td",qe,[e("div",Je,[e("button",{onClick:k=>a.openEditModal(o.ta_id),class:"btn btn-sm btn-warning"},t[79]||(t[79]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ke),e("button",{onClick:k=>a.confirmDelete(o.ta_id),class:"btn btn-sm btn-danger"},t[80]||(t[80]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Qe)])]),e("td",null,[e("button",{onClick:k=>a.downloadPdf(o.ta_id),class:"btn btn-sm btn-light"},t[81]||(t[81]=[e("i",{class:"fas fa-download me-1"},null,-1),_(" pdf ")]),8,Ze)]),e("td",null,[e("button",{onClick:k=>a.downloadAddress(o.ta_id),class:"btn btn-sm btn-light"},t[82]||(t[82]=[e("i",{class:"fas fa-download me-1"},null,-1),_(" adr ")]),8,$e)])]))),128))])])]),e("div",ta,[e("div",ea," Page "+w(a.currentPage)+" of "+w(a.totalPages)+" ("+w(a.totalCount)+" records) ",1),e("nav",null,[e("ul",aa,[e("li",{class:L(["page-item",{disabled:a.currentPage===1}])},[e("button",{class:"page-link",onClick:t[27]||(t[27]=(...o)=>a.prevPage&&a.prevPage(...o))},"«")],2),(f(!0),m(q,null,J(a.visiblePages,o=>(f(),m("li",{key:o,class:L(["page-item",{active:o===a.currentPage}])},[e("button",{class:"page-link",onClick:k=>a.goToPage(o)},w(o),9,oa)],2))),128)),e("li",{class:L(["page-item",{disabled:a.currentPage===a.totalPages}])},[e("button",{class:"page-link",onClick:t[28]||(t[28]=(...o)=>a.nextPage&&a.nextPage(...o))},"»")],2)])]),e("div",na,[g(e("select",{"onUpdate:modelValue":t[29]||(t[29]=o=>a.itemsPerPage=o),class:"form-select form-select-sm",onChange:t[30]||(t[30]=(...o)=>a.resetPagination&&a.resetPagination(...o))},t[83]||(t[83]=[e("option",{value:"10"},"10 / page",-1),e("option",{value:"25"},"25 / page",-1),e("option",{value:"50"},"50 / page",-1)]),544),[[dt,a.itemsPerPage]])])])]))])]),a.showModal?(f(),m("div",{key:0,class:"modal fade show d-block",style:{"z-index":"1050",background:"rgba(0,0,0,0.5)"},onClick:t[53]||(t[53]=(...o)=>a.closeModal&&a.closeModal(...o))},[e("div",{class:"modal-dialog modal-dialog-centered modal-lg",onClick:t[52]||(t[52]=ut(()=>{},["stop"]))},[e("div",la,[e("div",sa,[e("h5",ra,w(a.isEditing?"Edit Transmittal":"Add New Transmittal"),1),e("button",{type:"button",class:"btn-close btn-close-white",onClick:t[31]||(t[31]=(...o)=>a.closeModal&&a.closeModal(...o))})]),e("div",ia,[e("form",{onSubmit:t[51]||(t[51]=ut((...o)=>a.submitForm&&a.submitForm(...o),["prevent"]))},[e("div",da,[e("div",ua,[t[84]||(t[84]=e("label",{class:"form-label"},"TA ID",-1)),g(e("input",{"onUpdate:modelValue":t[32]||(t[32]=o=>a.formData.ta_id=o),type:"text",class:"form-control",readonly:a.isEditing,placeholder:a.isEditing?"":"Auto-generated on save",required:""},null,8,ca),[[D,a.formData.ta_id]])]),e("div",ma,[t[85]||(t[85]=e("label",{class:"form-label"},[_("Date "),e("span",{class:"text-danger"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[33]||(t[33]=o=>a.formData.date=o),type:"date",class:"form-control",required:""},null,512),[[D,a.formData.date]])]),e("div",fa,[t[86]||(t[86]=e("label",{class:"form-label"},[_("From Origin "),e("span",{class:"text-danger"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[34]||(t[34]=o=>a.formData.from_origin=o),type:"text",class:"form-control",required:""},null,512),[[D,a.formData.from_origin]])]),e("div",va,[t[87]||(t[87]=e("label",{class:"form-label"},"Document Type",-1)),g(e("input",{"onUpdate:modelValue":t[35]||(t[35]=o=>a.formData.document_type=o),type:"text",class:"form-control"},null,512),[[D,a.formData.document_type]])]),e("div",pa,[t[88]||(t[88]=e("label",{class:"form-label"},"Company",-1)),g(e("input",{"onUpdate:modelValue":t[36]||(t[36]=o=>a.formData.company=o),type:"text",class:"form-control",onInput:t[37]||(t[37]=(...o)=>a.handleCompanyInput&&a.handleCompanyInput(...o)),onBlur:t[38]||(t[38]=o=>a.customers.value=[]),placeholder:"Ketik untuk cari customer"},null,544),[[D,a.formData.company]]),a.customers.length>0?(f(),m("ul",ga,[(f(!0),m(q,null,J(a.customers,o=>(f(),m("li",{key:o.name,class:"list-group-item list-group-item-action",onClick:k=>a.selectCustomer(o),style:{cursor:"pointer"}},w(o.name)+" - "+w(o.address||"No address"),9,ba))),128))])):M("",!0)]),e("div",ya,[t[89]||(t[89]=e("label",{class:"form-label"},"Attention",-1)),g(e("input",{"onUpdate:modelValue":t[39]||(t[39]=o=>a.formData.attention=o),type:"text",class:"form-control"},null,512),[[D,a.formData.attention]])]),e("div",xa,[t[90]||(t[90]=e("label",{class:"form-label"},"Address",-1)),g(e("textarea",{"onUpdate:modelValue":t[40]||(t[40]=o=>a.formData.address=o),rows:"2",class:"form-control"},null,512),[[D,a.formData.address]])]),e("div",ka,[t[91]||(t[91]=e("label",{class:"form-label"},"State",-1)),g(e("input",{"onUpdate:modelValue":t[41]||(t[41]=o=>a.formData.state=o),type:"text",class:"form-control"},null,512),[[D,a.formData.state]])]),e("div",Da,[t[92]||(t[92]=e("label",{class:"form-label"},"Description",-1)),g(e("input",{"onUpdate:modelValue":t[42]||(t[42]=o=>a.formData.description=o),type:"text",class:"form-control"},null,512),[[D,a.formData.description]])]),e("div",wa,[t[93]||(t[93]=e("label",{class:"form-label"},"Remarks",-1)),g(e("textarea",{"onUpdate:modelValue":t[43]||(t[43]=o=>a.formData.remarks=o),rows:"2",class:"form-control"},null,512),[[D,a.formData.remarks]])]),e("div",ha,[t[94]||(t[94]=e("label",{class:"form-label"},"AWB/Reg",-1)),g(e("input",{"onUpdate:modelValue":t[44]||(t[44]=o=>a.formData.awb_reg=o),type:"text",class:"form-control"},null,512),[[D,a.formData.awb_reg]])]),e("div",Ca,[t[95]||(t[95]=e("label",{class:"form-label"},"Expeditur",-1)),g(e("input",{"onUpdate:modelValue":t[45]||(t[45]=o=>a.formData.expeditur=o),type:"text",class:"form-control"},null,512),[[D,a.formData.expeditur]])]),e("div",_a,[t[96]||(t[96]=e("label",{class:"form-label"},"Receiver Name",-1)),g(e("input",{"onUpdate:modelValue":t[46]||(t[46]=o=>a.formData.receiver_name=o),type:"text",class:"form-control"},null,512),[[D,a.formData.receiver_name]])]),e("div",Ta,[t[97]||(t[97]=e("label",{class:"form-label"},"Receive Date (Optional)",-1)),g(e("input",{"onUpdate:modelValue":t[47]||(t[47]=o=>a.formData.receive_date=o),type:"date",class:"form-control",onInput:t[48]||(t[48]=(...o)=>F.handleReceiveDateInput&&F.handleReceiveDateInput(...o))},null,544),[[D,a.formData.receive_date]])]),e("div",Ia,[t[99]||(t[99]=e("label",{class:"form-label"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[49]||(t[49]=o=>a.formData.ras_status=o),class:"form-select"},t[98]||(t[98]=[e("option",{value:""},"-- Pilih Status --",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Received"},"Received",-1),e("option",{value:"Completed"},"Completed",-1)]),512),[[dt,a.formData.ras_status]])])]),e("div",Fa,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[50]||(t[50]=(...o)=>a.closeModal&&a.closeModal(...o))},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:a.submitting},[a.submitting?(f(),m("span",Aa)):M("",!0),_(" "+w(a.isEditing?"Update":"Create"),1)],8,Sa)])],32)])])])])):M("",!0),a.showDeleteModal?(f(),m("div",{key:1,class:"modal fade show d-block",style:{"z-index":"1060",background:"rgba(0,0,0,0.5)"},onClick:t[58]||(t[58]=o=>a.showDeleteModal=!1)},[e("div",{class:"modal-dialog modal-dialog-centered",onClick:t[57]||(t[57]=ut(()=>{},["stop"]))},[e("div",Ea,[e("div",Ua,[t[100]||(t[100]=e("h5",{class:"modal-title"},"Confirm Delete",-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:t[54]||(t[54]=o=>a.showDeleteModal=!1)})]),e("div",Ra,[t[102]||(t[102]=e("p",null,"Are you sure you want to delete this transmittal?",-1)),e("p",null,[t[101]||(t[101]=e("strong",null,"TA ID:",-1)),_(" "+w(a.deleteTaId),1)]),t[103]||(t[103]=e("p",{class:"text-danger"},"This action cannot be undone!",-1))]),e("div",Va,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[55]||(t[55]=o=>a.showDeleteModal=!1)},"Cancel"),e("button",{type:"button",class:"btn btn-danger",onClick:t[56]||(t[56]=(...o)=>a.deleteTransmittal&&a.deleteTransmittal(...o)),disabled:a.submitting},[a.submitting?(f(),m("span",Pa)):M("",!0),t[104]||(t[104]=_(" Delete "))],8,Ma)])])])])):M("",!0)])}const Ba=ct(xe,[["render",Na],["__scopeId","data-v-51800eb8"]]),La={key:0,class:"text-center py-5"},za={key:1,class:"container-fluid px-3"},ja={class:"d-flex justify-content-between align-items-center mb-3"},Oa={class:"text-muted mb-0"},Ha={class:"text-primary"},Wa={class:"text-end"},Ga={class:"fs-6 fw-bold"},Ya={class:"nav nav-tabs mb-4"},Xa=["onClick"],qa={class:"tab-content"},Ja={key:0,class:"tab-pane fade show active"},Ka={key:1,class:"tab-pane fade show active"},Qa={key:2,class:"tab-pane fade show active text-center py-5"},Za={__name:"Dashboard",setup(F){const t=mt();u(null);const h=u(!0),a=u("0"),S=[{label:"Transmittal Management",value:"0"},{label:"Transmittal Invoice Internal",value:"1"},{label:"Coming Soon",value:"2"}],T=u(),o=()=>{const k=new Date,i=k.getHours().toString().padStart(2,"0"),s=k.getMinutes().toString().padStart(2,"0"),d=k.getSeconds().toString().padStart(2,"0");T.value=`${i}:${s}:${d}`};return ft(()=>{o(),setInterval(o,1e3),setTimeout(()=>{h.value=!1},800)}),(k,i)=>h.value?(f(),m("div",La,i[0]||(i[0]=[e("div",{class:"spinner-border text-primary"},null,-1),e("p",{class:"mt-2"},"Loading dashboard...",-1)]))):(f(),m("div",za,[e("div",ja,[e("div",null,[i[2]||(i[2]=e("h1",{class:"h3 fw-bold mb-1"},[e("i",{class:"fa-solid fa-business-time me-2"}),_(" Commercial Dashboard ")],-1)),e("p",Oa,[i[1]||(i[1]=_("Hi, ")),e("strong",Ha,w(Yt(t).name),1)])]),e("div",Wa,[e("div",Ga,w(T.value),1)])]),e("ul",Ya,[(f(),m(q,null,J(S,s=>e("li",{class:"nav-item",key:s.value},[e("button",{class:L(["nav-link",{active:a.value===s.value}]),onClick:d=>a.value=s.value},w(s.label),11,Xa)])),64))]),e("div",qa,[a.value==="0"?(f(),m("div",Ja,[yt(Ba)])):M("",!0),a.value==="1"?(f(),m("div",Ka,[yt(pe)])):M("",!0),a.value==="2"?(f(),m("div",Qa,i[3]||(i[3]=[e("i",{class:"fa-solid fa-clock fa-3x text-muted mb-3"},null,-1),e("h4",null,"Feature Coming Soon",-1),e("p",{class:"text-muted"},"This section is under development.",-1)]))):M("",!0)])]))}},no=ct(Za,[["__scopeId","data-v-3e5aa6dd"]]);export{no as default};
